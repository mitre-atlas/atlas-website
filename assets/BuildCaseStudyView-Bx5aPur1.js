import{N as ce,b9 as Qe,S as fe,aB as me,ba as fa,f as M,Y as ye,bb as en,g as u,I as L,bc as tl,bd as nl,be as al,r as U,bf as va,aL as ue,aI as Oe,bg as Bn,b6 as ft,bh as Et,bi as ll,aS as ut,aC as Dn,bj as Yn,F as se,bk as ma,O as ha,D as Ze,o as $,c as Z,w,j as Q,aY as tn,d as q,v as Ie,t as F,bl as bn,au as Ne,bm as pa,b as z,bn as ol,bo as il,bp as rl,bq as ul,_ as ga,p as sl,k as cl,br as dl,aE as Me,bs as fl,bt as vl,b1 as ya,G as ba,E as qt,bu as ml,L as He,bv as hl,bw as pl,bx as Un,by as gl,aJ as Pn,bz as It,bA as yl,a0 as $n,a6 as bl,bB as kl,aO as En,aM as wl,u as In,m as st,h as Ge,i as kn,a as pe,al as Sl,bC as _l,bD as xl,bE as Tn,bF as Vl,z as Cl,bG as Dl,q as ge,s as St,a5 as An,bH as Pl,aZ as El,bI as Tt,bJ as Il,aG as ka,bK as Tl,ax as Al,b7 as Ml,a7 as Ol,bL as Rl,bM as Nl,a9 as Fl,Q as Bl,R as Yl,U as Ul,X as wa,bN as $l,b8 as Ll,ab as Hl,bO as jl,bP as ql,ac as zl,bQ as Sa,bR as Xl,bS as Wl,a3 as Ln,A as Gl,B as Jl,bT as Kl,b2 as Ql}from"./index-CWz_pq1_.js";import{c as nn,d as Zl,e as Mn,f as je,b as wn,g as _a,h as xa,i as Va,j as Ca,k as eo,l as to,m as no,n as ao,o as lo,p as oo,u as io,q as ro,a as Ke,r as uo,s as so,t as Da,v as co,w as fo,x as vo}from"./filter-D7tSgEzS.js";import{V as Fe,b as Pt,c as et,a as zt}from"./VCard-JjTE3Cn8.js";import{V as On}from"./VChip-CH_OW7Q_.js";import{V as Xt}from"./VAlert-BxHG93KK.js";import{m as mo}from"./powerpointFunctions-y3vlo69e.js";import{_ as ho}from"./PageSectionTitle.vue_vue_type_script_setup_true_lang-i7FxkluF.js";const po=ce({...nn(),...Qe(Zl(),["inline"])},"VCheckbox"),go=fe()({name:"VCheckbox",inheritAttrs:!1,props:po(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=me(e,"modelValue"),{isFocused:o,focus:i,blur:s}=Mn(e),r=fa(),d=M(()=>e.id||`checkbox-${r}`);return ye(()=>{const[c,f]=en(t),v=je.filterProps(e),h=wn.filterProps(e);return u(je,L({class:["v-checkbox",e.class]},c,v,{modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,id:d.value,focused:o.value,style:e.style}),{...a,default:p=>{let{id:m,messagesId:k,isDisabled:b,isReadonly:B,isValid:V}=p;return u(wn,L(h,{id:m.value,"aria-describedby":k.value,disabled:b.value,readonly:B.value},f,{error:V.value===!1,modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,onFocus:i,onBlur:s}),a)}})}),{}}}),yo=ce({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...tl({origin:"center center",scrollStrategy:"block",transition:{component:nl},zIndex:2400})},"VDialog"),an=fe()({name:"VDialog",props:yo(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{scopeId:l}=al(),o=U();function i(r){const d=r.relatedTarget,c=r.target;if(d!==c&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(c)&&!o.value.contentEl.contains(c)){const f=ll(o.value.contentEl);if(!f.length)return;const v=f[0],h=f[f.length-1];d===v?h.focus():v.focus()}}va&&ue(()=>a.value&&e.retainFocus,r=>{r?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0}),ue(a,async r=>{await Oe(),r?o.value.contentEl?.focus({preventScroll:!0}):o.value.activatorEl?.focus({preventScroll:!0})});const s=M(()=>L({"aria-haspopup":"dialog","aria-expanded":String(a.value)},e.activatorProps));return ye(()=>{const r=Bn.filterProps(e);return u(Bn,L({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},r,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,"aria-modal":"true",activatorProps:s.value,role:"dialog"},l),{activator:t.activator,default:function(){for(var d=arguments.length,c=new Array(d),f=0;f<d;f++)c[f]=arguments[f];return u(ft,{root:"VDialog"},{default:()=>[t.default?.(...c)]})}})}),Et({},o)}}),bo=ce({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...nn({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ut(e).every(n=>n!=null&&typeof n=="object")},..._a({clearable:!0})},"VFileInput"),ko=fe()({name:"VFileInput",inheritAttrs:!1,props:bo(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const{t:o}=Dn(),i=me(e,"modelValue"),{isFocused:s,focus:r,blur:d}=Mn(e),c=M(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=M(()=>(i.value??[]).reduce((y,T)=>{let{size:A=0}=T;return y+A},0)),v=M(()=>Yn(f.value,c.value)),h=M(()=>(i.value??[]).map(y=>{const{name:T="",size:A=0}=y;return e.showSize?`${T} (${Yn(A,c.value)})`:T})),p=M(()=>{const y=i.value?.length??0;return e.showSize?o(e.counterSizeString,y,v.value):o(e.counterString,y)}),m=U(),k=U(),b=U(),B=M(()=>s.value||e.active),V=M(()=>["plain","underlined"].includes(e.variant));function D(){b.value!==document.activeElement&&b.value?.focus(),s.value||r()}function _(y){b.value?.click()}function x(y){a("mousedown:control",y)}function R(y){b.value?.click(),a("click:control",y)}function W(y){y.stopPropagation(),D(),Oe(()=>{i.value=[],ma(e["onClick:clear"],y)})}return ue(i,y=>{(!Array.isArray(y)||!y.length)&&b.value&&(b.value.value="")}),ye(()=>{const y=!!(l.counter||e.counter),T=!!(y||l.details),[A,H]=en(t),{modelValue:I,...C}=je.filterProps(e),S=xa(e);return u(je,L({ref:m,modelValue:i.value,"onUpdate:modelValue":N=>i.value=N,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":V.value},e.class],style:e.style,"onClick:prepend":_},A,C,{centerAffix:!V.value,focused:s.value}),{...l,default:N=>{let{id:ae,isDisabled:J,isDirty:ke,isReadonly:we,isValid:tt}=N;return u(Va,L({ref:k,"prepend-icon":e.prependIcon,onMousedown:x,onClick:R,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},S,{id:ae.value,active:B.value||ke.value,dirty:ke.value,disabled:J.value,focused:s.value,error:tt.value===!1}),{...l,default:mt=>{let{props:{class:ht,...pt}}=mt;return u(se,null,[u("input",L({ref:b,type:"file",readonly:we.value,disabled:J.value,multiple:e.multiple,name:e.name,onClick:Se=>{Se.stopPropagation(),we.value&&Se.preventDefault(),D()},onChange:Se=>{if(!Se.target)return;const nt=Se.target;i.value=[...nt.files??[]]},onFocus:D,onBlur:d},pt,H),null),u("div",{class:ht},[!!i.value?.length&&(l.selection?l.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:v.value}):e.chips?h.value.map(Se=>u(On,{key:Se,size:"small",color:e.color},{default:()=>[Se]})):h.value.join(", "))])])}})},details:T?N=>u(se,null,[l.details?.(N),y&&u(se,null,[u("span",null,null),u(Ca,{active:!!i.value?.length,value:p.value},l.counter)])]):void 0})}),Et({},m,k,b)}}),wo=ce({...ha(),...eo()},"VForm"),ln=fe()({name:"VForm",props:wo(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:a}=n;const l=to(e),o=U();function i(r){r.preventDefault(),l.reset()}function s(r){const d=r,c=l.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),a("submit",d),d.defaultPrevented||c.then(f=>{let{valid:v}=f;v&&o.value?.submit()}),d.preventDefault()}return ye(()=>u("form",{ref:o,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:s},[t.default?.(l)])),Et(l,o)}}),So=z("b",null,"overwrite any existing progress",-1),_o={__name:"UploadFileDialog",emits:["submit"],setup(e,{emit:n}){let t="";const a=U();ue(a,()=>{o=0,f.value=!1,r=[],m.value.resetValidation()});function l(B){return B.length===1||"Required"}let o=0;function i(B){o++;const V=B[0],D=[".yaml"];let _="";const x=V?.name.lastIndexOf(".");return x>=0&&(_=V.name.slice(x),o===1&&(t=V.name.substring(0,x))),D.includes(_)?(Object.defineProperty(V,"name",{writable:!0,value:ol()+".yaml"}),!0):`Invalid file type: expected .yaml, got ${_}`}function s(B){const V=B[0],D=1e6,_=2,x=D*_,R=V.size;return R<=0?"Invalid file":R<=x?!0:`File too large, (${_} MB limit)`}let r=Ze([]),d=Ze({});const c=U();let f=U(!1),v=U(!1);async function h(B){const D=await B[0].text();try{r=[],f.value=!1,d=il(D,{schema:rl});const _=ul(d);for(let x=0;x<_.length;x++)r.push(_[x]);return _?(f.value=!0,""):!0}catch(_){return _.reason}}const p=n,m=U(null);async function k(){await m.value.validate(),c.value&&(p("submit",d,t),a.value=[],v.value=!1)}function b(B){a.value=[],B.value=!1}return(B,V)=>($(),Z(an,{width:"500",modelValue:F(v),"onUpdate:modelValue":V[4]||(V[4]=D=>pa(v)?v.value=D:v=D)},{activator:w(({props:D})=>[u(Q,L(D,{text:"Load case study","prepend-icon":"mdi-upload",color:"blue",variant:"text"}),null,16)]),default:w(({isActive:D})=>[u(ln,{onSubmit:V[2]||(V[2]=tn(()=>{},["prevent"])),modelValue:c.value,"onUpdate:modelValue":V[3]||(V[3]=_=>c.value=_),ref_key:"form",ref:m},{default:w(()=>[u(Fe,{title:"Load Case Study"},{default:w(()=>[u(Pt,{class:"text-subtitle-2"},{default:w(()=>[q(" To view or edit an existing case study, upload a .yaml file created by this website. Loading a file will "),So,q(" in the form. The current case study schema version is "+Ie(`v${F(bn).$version}`)+" ",1),u(ko,{label:"Case study .yaml file",accept:".yaml",rules:[l,i,s,h],"error-messages":F(r),error:F(f),variant:"outlined",density:"compact",class:"mt-6",modelValue:a.value,"onUpdate:modelValue":V[0]||(V[0]=_=>a.value=_)},null,8,["rules","error-messages","error","modelValue"])]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:_=>b(D)},null,8,["onClick"]),u(Q,{text:"Ok",type:"submit",onClick:V[1]||(V[1]=_=>k())})]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["modelValue"]))}},xo={},vt=e=>(sl("data-v-2afa5aea"),e=e(),cl(),e),Vo=vt(()=>z("ol",null,[z("li",null," The attack exploits one or more vulnerabilities that compromise the confidentiality, integrity, or availability of a ML system. "),z("li",null," The attack is against a production/commercial ML system. This can be on MLaaS or ML systems embedded in clients/at the edge. "),z("li",null," Ensure you have permission to share this information and/or publish this research. Please follow the proper channels before reporting a new attack and make sure you are practicing responsible disclosure. ")],-1)),Co=vt(()=>z("ol",null,[z("li",null,"Fill out the form."),z("li",null,"Download the generated case study .yaml file."),z("li",null,[q(" Email the case study file to "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")])],-1)),Do=vt(()=>z("p",null," After downloading the case study, a new button will appear to optionally download a PowerPoint .pptx version for perusal. ",-1)),Po=vt(()=>z("p",null,' To view or edit an existing case study, click the "Load Case Study" button and upload the .yaml file. Make any necessary adjustments, then re-download the file. ',-1)),Eo=vt(()=>z("p",null,[q(" For more guidance, please watch this "),z("a",{target:"_blank",href:"https://www.youtube.com/watch?v=Np_ip14YJGg&list=PLkTApXQou_8J6-t2_7QTTVDLBQlKFXPOu&index=2"},"instructional video"),q(". ")],-1)),Io=vt(()=>z("p",null,[q(" Please contact "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(" with any questions. ")],-1));function To(e,n){return $(),Z(an,{width:"500"},{activator:w(({props:t})=>[u(Q,L(t,{text:"Instructions","prepend-icon":"mdi-information-outline",color:"grey-lighten-2"}),null,16)]),default:w(({isActive:t})=>[u(Fe,null,{default:w(()=>[u(zt,null,{default:w(()=>[q(" Case study considerations ")]),_:1}),u(Pt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Vo]),_:1}),u(zt,null,{default:w(()=>[q(" How to use this case study builder ")]),_:1}),u(Pt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Co,Do,Po,Eo,Io]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Ok",onClick:a=>t.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}const Ao=ga(xo,[["render",To],["__scopeId","data-v-2afa5aea"]]);function Mo(e,n,t){if(n==null)return e;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?u(se,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,n)]),u("span",{class:"v-autocomplete__mask"},[e.substr(n,t)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(n+t)])]):e}const Oo=ce({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...no({filterKeys:["title"]}),...ao(),...Qe(lo({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...dl({transition:!1})},"VAutocomplete"),Hn=fe()({name:"VAutocomplete",props:Oo(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:t}=n;const{t:a}=Dn(),l=U(),o=Me(!1),i=Me(!0),s=Me(!1),r=U(),d=U(),c=me(e,"menu"),f=M({get:()=>c.value,set:P=>{c.value&&!P&&r.value?.ΨopenChildren||(c.value=P)}}),v=Me(-1),h=M(()=>l.value?.color),p=M(()=>f.value?e.closeText:e.openText),{items:m,transformIn:k,transformOut:b}=fl(e),{textColorClasses:B,textColorStyles:V}=vl(h),D=me(e,"search",""),_=me(e,"modelValue",[],P=>k(P===null?[null]:ut(P)),P=>{const le=b(P);return e.multiple?le:le[0]??null}),x=M(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),R=oo(),{filteredItems:W,getMatches:y}=io(e,m,()=>i.value?"":D.value),T=M(()=>e.hideSelected?W.value.filter(P=>!_.value.some(le=>le.value===P.value)):W.value),A=M(()=>!!(e.chips||t.chip)),H=M(()=>A.value||!!t.selection),I=M(()=>_.value.map(P=>P.props.value)),C=M(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&D.value===T.value[0]?.title)&&T.value.length>0&&!i.value&&!s.value),S=M(()=>e.hideNoData&&!T.value.length||e.readonly||R?.isReadonly.value),N=U(),{onListScroll:ae,onListKeydown:J}=ro(N,l);function ke(P){e.openOnClear&&(f.value=!0),D.value=""}function we(){S.value||(f.value=!0)}function tt(P){S.value||(o.value&&(P.preventDefault(),P.stopPropagation()),f.value=!f.value)}function mt(P){if(e.readonly||R?.isReadonly.value)return;const le=l.value.selectionStart,re=_.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(P.key))&&P.preventDefault(),["Enter","ArrowDown"].includes(P.key)&&(f.value=!0),["Escape"].includes(P.key)&&(f.value=!1),C.value&&["Enter","Tab"].includes(P.key)&&qe(T.value[0]),P.key==="ArrowDown"&&C.value&&N.value?.focus("next"),!!e.multiple){if(["Backspace","Delete"].includes(P.key)){if(v.value<0){P.key==="Backspace"&&!D.value&&(v.value=re-1);return}const j=v.value,K=_.value[v.value];K&&!K.props.disabled&&qe(K,!1),v.value=j>=re-1?re-2:j}if(P.key==="ArrowLeft"){if(v.value<0&&le>0)return;const j=v.value>-1?v.value-1:re-1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(D.value?.length,D.value?.length))}if(P.key==="ArrowRight"){if(v.value<0)return;const j=v.value+1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(0,0))}}}function ht(P){if(Un(l.value,":autofill")||Un(l.value,":-webkit-autofill")){const le=m.value.find(re=>re.title===P.target.value);le&&qe(le)}}function pt(){o.value&&(i.value=!0,l.value?.focus())}function Se(P){o.value=!0,setTimeout(()=>{s.value=!0})}function nt(P){s.value=!1}function rn(P){(P==null||P===""&&!e.multiple)&&(_.value=[])}const un=Me(!1);function qe(P){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!P.props.disabled)if(e.multiple){const re=_.value.findIndex(K=>e.valueComparator(K.value,P.value)),j=le??!~re;if(~re){const K=j?[..._.value,P]:[..._.value];K.splice(re,1),_.value=K}else j&&(_.value=[..._.value,P]);e.clearOnSelect&&(D.value="")}else{const re=le!==!1;_.value=re?[P]:[],D.value=re&&!H.value?P.title:"",Oe(()=>{f.value=!1,i.value=!0})}}return ue(o,(P,le)=>{P!==le&&(P?(un.value=!0,D.value=e.multiple||H.value?"":String(_.value.at(-1)?.props.title??""),i.value=!0,Oe(()=>un.value=!1)):(!e.multiple&&D.value==null?_.value=[]:C.value&&!s.value&&!_.value.some(re=>{let{value:j}=re;return j===T.value[0].value})&&qe(T.value[0]),f.value=!1,D.value="",v.value=-1))}),ue(D,P=>{!o.value||un.value||(P&&(f.value=!0),i.value=!P)}),ue(f,()=>{if(!e.hideSelected&&f.value&&_.value.length){const P=T.value.findIndex(le=>_.value.some(re=>le.value===re.value));va&&window.requestAnimationFrame(()=>{P>=0&&d.value?.scrollToIndex(P)})}}),ue(()=>e.items,P=>{!o.value||!P.length||f.value||(f.value=!0)}),ye(()=>{const P=!!(!e.hideNoData||T.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),le=_.value.length>0,re=Ke.filterProps(e);return u(Ke,L({ref:l},re,{modelValue:D.value,"onUpdate:modelValue":[j=>D.value=j,rn],focused:o.value,"onUpdate:focused":j=>o.value=j,validationValue:_.externalValue,counterValue:x.value,dirty:le,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":f.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:le?void 0:e.placeholder,"onClick:clear":ke,"onMousedown:control":we,onKeydown:mt}),{...t,default:()=>u(se,null,[u(ya,L({ref:r,modelValue:f.value,"onUpdate:modelValue":j=>f.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:S.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:pt},e.menuProps),{default:()=>[P&&u(ba,L({ref:N,selected:I.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:J,onFocusin:Se,onFocusout:nt,onScrollPassive:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>[t["prepend-item"]?.(),!T.value.length&&!e.hideNoData&&(t["no-data"]?.()??u(qt,{title:a(e.noDataText)},null)),u(uo,{ref:d,renderless:!0,items:T.value},{default:j=>{let{item:K,index:Pe,itemRef:Ot}=j;const gt=L(K.props,{ref:Ot,key:Pe,active:C.value&&Pe===0?!0:void 0,onClick:()=>qe(K,null)});return t.item?.({item:K,index:Pe,props:gt})??u(qt,L(gt,{role:"option"}),{prepend:yt=>{let{isSelected:ze}=yt;return u(se,null,[e.multiple&&!e.hideSelected?u(wn,{key:K.value,modelValue:ze,ripple:!1,tabindex:"-1"},null):void 0,K.props.prependAvatar&&u(ml,{image:K.props.prependAvatar},null),K.props.prependIcon&&u(He,{icon:K.props.prependIcon},null)])},title:()=>i.value?K.title:Mo(K.title,y(K)?.title,D.value?.length??0)})}}),t["append-item"]?.()]})]}),_.value.map((j,K)=>{function Pe(ze){ze.stopPropagation(),ze.preventDefault(),qe(j,!1)}const Ot={"onClick:close":Pe,onMousedown(ze){ze.preventDefault(),ze.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},gt=A.value?!!t.chip:!!t.selection,yt=gt?hl(A.value?t.chip({item:j,index:K,props:Ot}):t.selection({item:j,index:K})):void 0;if(!(gt&&!yt))return u("div",{key:j.value,class:["v-autocomplete__selection",K===v.value&&["v-autocomplete__selection--selected",B.value]],style:K===v.value?V.value:{}},[A.value?t.chip?u(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>[yt]}):u(On,L({key:"chip",closable:e.closableChips,size:"small",text:j.title,disabled:j.props.disabled},Ot),null):yt??u("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&K<_.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){for(var j=arguments.length,K=new Array(j),Pe=0;Pe<j;Pe++)K[Pe]=arguments[Pe];return u(se,null,[t["append-inner"]?.(...K),e.menuIcon?u(He,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:tt,onClick:pl,"aria-label":a(p.value),title:a(p.value)},null):void 0])}})}),Et({isFocused:o,isPristine:i,menu:f,search:D,filteredItems:W,select:qe},l)}}),Ro=ce({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...nn(),..._a()},"VTextarea"),Pa=fe()({name:"VTextarea",directives:{Intersect:gl},inheritAttrs:!1,props:Ro(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const o=me(e,"modelValue"),{isFocused:i,focus:s,blur:r}=Mn(e),d=M(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),c=M(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function f(A,H){!e.autofocus||!A||H[0].target?.focus?.()}const v=U(),h=U(),p=Me(""),m=U(),k=M(()=>e.persistentPlaceholder||i.value||e.active);function b(){m.value!==document.activeElement&&m.value?.focus(),i.value||s()}function B(A){b(),a("click:control",A)}function V(A){a("mousedown:control",A)}function D(A){A.stopPropagation(),b(),Oe(()=>{o.value="",ma(e["onClick:clear"],A)})}function _(A){const H=A.target;if(o.value=H.value,e.modelModifiers?.trim){const I=[H.selectionStart,H.selectionEnd];Oe(()=>{H.selectionStart=I[0],H.selectionEnd=I[1]})}}const x=U(),R=U(+e.rows),W=M(()=>["plain","underlined"].includes(e.variant));Pn(()=>{e.autoGrow||(R.value=+e.rows)});function y(){e.autoGrow&&Oe(()=>{if(!x.value||!h.value)return;const A=getComputedStyle(x.value),H=getComputedStyle(h.value.$el),I=parseFloat(A.getPropertyValue("--v-field-padding-top"))+parseFloat(A.getPropertyValue("--v-input-padding-top"))+parseFloat(A.getPropertyValue("--v-field-padding-bottom")),C=x.value.scrollHeight,S=parseFloat(A.lineHeight),N=Math.max(parseFloat(e.rows)*S+I,parseFloat(H.getPropertyValue("--v-input-control-height"))),ae=parseFloat(e.maxRows)*S+I||1/0,J=wl(C??0,N,ae);R.value=Math.floor((J-I)/S),p.value=En(J)})}It(y),ue(o,y),ue(()=>e.rows,y),ue(()=>e.maxRows,y),ue(()=>e.density,y);let T;return ue(x,A=>{A?(T=new ResizeObserver(y),T.observe(x.value)):T?.disconnect()}),yl(()=>{T?.disconnect()}),ye(()=>{const A=!!(l.counter||e.counter||e.counterValue),H=!!(A||l.details),[I,C]=en(t),{modelValue:S,...N}=je.filterProps(e),ae=xa(e);return u(je,L({ref:v,modelValue:o.value,"onUpdate:modelValue":J=>o.value=J,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":W.value},e.class],style:e.style},I,N,{centerAffix:R.value===1&&!W.value,focused:i.value}),{...l,default:J=>{let{id:ke,isDisabled:we,isDirty:tt,isReadonly:mt,isValid:ht}=J;return u(Va,L({ref:h,style:{"--v-textarea-control-height":p.value},onClick:B,onMousedown:V,"onClick:clear":D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ae,{id:ke.value,active:k.value||tt.value,centerAffix:R.value===1&&!W.value,dirty:tt.value||e.dirty,disabled:we.value,focused:i.value,error:ht.value===!1}),{...l,default:pt=>{let{props:{class:Se,...nt}}=pt;return u(se,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),$n(u("textarea",L({ref:m,class:Se,value:o.value,onInput:_,autofocus:e.autofocus,readonly:mt.value,disabled:we.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:b,onBlur:r},nt,C),null),[[bl("intersect"),{handler:f},null,{once:!0}]]),e.autoGrow&&$n(u("textarea",{class:[Se,"v-textarea__sizer"],id:`${nt.id}-sizer`,"onUpdate:modelValue":rn=>o.value=rn,ref:x,readonly:!0,"aria-hidden":"true"},null),[[kl,o.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:H?J=>u(se,null,[l.details?.(J),A&&u(se,null,[u("span",null,null),u(Ca,{active:e.persistentCounter||i.value,value:d.value,max:c.value},l.counter)])]):void 0})}),Et({},v,h,m)}}),Ea={__name:"AddProcedure",props:["editProcedure","editIndex"],emits:["submitProcedureStep","cancel","updateShowAddNewStep","update"],setup(e,{expose:n,emit:t}){const{editProcedure:a,editIndex:l}=e;It(()=>{a&&(c.tactic=a.tactic,c.technique=o.getDataObjectById(a.technique)===void 0?"":a.technique,c.description=a.description)});const o=In(),i=U(!1),s=U(null),r=M(()=>!!(!i.value||c.tactic&&c.technique)),d=[m=>m?!0:"Required"];let c=Ze({tactic:"",technique:"",description:""});const f=M(()=>o.getDataObjectsByType("tactics"));ue(()=>c.tactic,(m,k)=>{c.technique&&m!==k&&k&&(c.technique="")});const v=M(()=>{const m=o.getDataObjectsByTypeKeyContainingValue("techniques","tactics",c.tactic);for(let k=0;k<m.length;k++)if(m[k].subtechniques)for(let b=0;b<m[k].subtechniques.length;b++){const B=m[k].subtechniques[b],V=k+1+b;m.splice(V,0,B)}return m}),h=t;n({addProcedureStep:p});function p(){if(i.value=!0,s.value.validate(),r.value&&a){const m=JSON.parse(JSON.stringify(c));h("update",m,l),i.value=!1}else if(r.value){const m=JSON.parse(JSON.stringify(c));h("submitProcedureStep",m),s.value.reset(),i.value=!1}}return(m,k)=>($(),Z(ln,{ref_key:"procedureForm",ref:s,onSubmit:k[5]||(k[5]=tn(()=>{},["prevent"]))},{default:w(()=>[u(Fe,{title:"Add Procedure Step",variant:"outlined",style:st({borderColor:r.value?"grey":"red"})},{default:w(()=>[u(Ge,{class:"pa-6"},{default:w(()=>[u(kn,{cols:"12",lg:"6"},{default:w(()=>[u(Hn,{label:"Tactic",items:f.value,"item-title":"name","item-value":"id",modelValue:F(c).tactic,"onUpdate:modelValue":k[0]||(k[0]=b=>F(c).tactic=b),variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},null,8,["items","modelValue"])]),_:1}),u(kn,{cols:"12",lg:"6"},{default:w(()=>[u(Hn,{label:"Technique",items:v.value,"item-title":"name","item-value":"id",modelValue:F(c).technique,"onUpdate:modelValue":k[1]||(k[1]=b=>F(c).technique=b),disabled:!F(c).tactic,variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},{item:w(({props:b,item:B})=>[u(qt,L(b,{"prepend-icon":B.raw.tactics?"":"mdi-subdirectory-arrow-right"}),null,16,["prepend-icon"])]),_:1},8,["items","modelValue","disabled"])]),_:1}),u(Pa,{label:"Description","prepend-inner-icon":"mdi-text",hint:"Describe how this technique was used in the case study",disabled:!F(c).tactic,variant:"outlined",modelValue:F(c).description,"onUpdate:modelValue":k[2]||(k[2]=b=>F(c).description=b),modelModifiers:{trim:!0},class:"mx-3"},null,8,["disabled","modelValue"])]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{onClick:k[3]||(k[3]=b=>m.$emit(e.editProcedure?"cancel":"updateShowAddNewStep"))},{default:w(()=>[q("Cancel")]),_:1}),u(Q,{type:"submit",color:"green",onClick:k[4]||(k[4]=b=>p())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),i.value&&r.value===!1?($(),Z(Xt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(Ie(F(c).tactic?"Please fill out Technique":"Please fill out Tactic and Technique"),1)]),_:1})):pe("",!0)]),_:1},8,["style"])]),_:1},512))}};var No=Object.defineProperty,Wt=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,jn=(e,n,t)=>n in e?No(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,it=(e,n)=>{for(var t in n||(n={}))Ia.call(n,t)&&jn(e,t,n[t]);if(Wt)for(var t of Wt(n))Ta.call(n,t)&&jn(e,t,n[t]);return e},Aa=(e,n)=>{var t={};for(var a in e)Ia.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&Wt)for(var a of Wt(e))n.indexOf(a)<0&&Ta.call(e,a)&&(t[a]=e[a]);return t};const Ma="[vue-draggable-plus]: ";function Fo(e){console.warn(Ma+e)}function Bo(e){console.error(Ma+e)}function qn(e,n,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(n,1)[0]),e}function Yo(e){return e.replace(/-(\w)/g,(n,t)=>t?t.toUpperCase():"")}function Uo(e){return Object.keys(e).reduce((n,t)=>(typeof e[t]<"u"&&(n[Yo(t)]=e[t]),n),{})}function $o(e,n){if(Array.isArray(e))return e.splice(n,1)}function Lo(e,n,t){if(Array.isArray(e))return e.splice(n,0,t)}function Ho(e){return typeof e>"u"}function jo(e){return typeof e=="string"}function zn(e,n,t){const a=e.children[t];e.insertBefore(n,a)}function sn(e){e.parentNode&&e.parentNode.removeChild(e)}function qo(e,n=document){var t;let a=null;return typeof n?.querySelector=="function"?a=(t=n?.querySelector)==null?void 0:t.call(n,e):a=document.querySelector(e),a||Fo(`Element not found: ${e}`),a}function zo(e,n,t=null){return function(...a){return e.apply(t,a),n.apply(t,a)}}function Xo(e,n){const t=it({},e);return Object.keys(n).forEach(a=>{t[a]?t[a]=zo(e[a],n[a]):t[a]=n[a]}),t}function Wo(e){return e instanceof HTMLElement}function Go(e,n){Object.keys(e).forEach(t=>{n(t,e[t])})}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,a)}return t}function Ae(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Xn(Object(t),!0).forEach(function(a){Jo(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Ut(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ut=function(n){return typeof n}:Ut=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(e)}function Jo(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Be(){return Be=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Be.apply(this,arguments)}function Ko(e,n){if(e==null)return{};var t={},a=Object.keys(e),l,o;for(o=0;o<a.length;o++)l=a[o],!(n.indexOf(l)>=0)&&(t[l]=e[l]);return t}function Qo(e,n){if(e==null)return{};var t=Ko(e,n),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var Zo="1.15.1";function Re(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ye=Re(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),At=Re(/Edge/i),Wn=Re(/firefox/i),_t=Re(/safari/i)&&!Re(/chrome/i)&&!Re(/android/i),Oa=Re(/iP(ad|od|hone)/i),Ra=Re(/chrome/i)&&Re(/android/i),Na={capture:!1,passive:!1};function G(e,n,t){e.addEventListener(n,t,!Ye&&Na)}function X(e,n,t){e.removeEventListener(n,t,!Ye&&Na)}function Gt(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function ei(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ee(e,n,t,a){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&Gt(e,n):Gt(e,n))||a&&e===t)return e;if(e===t)break}while(e=ei(e))}return null}var Gn=/\s+/g;function _e(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var a=(" "+e.className+" ").replace(Gn," ").replace(" "+n+" "," ");e.className=(a+(t?" "+n:"")).replace(Gn," ")}}function E(e,n,t){var a=e&&e.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=t+(typeof t=="string"?"":"px")}}function ct(e,n){var t="";if(typeof e=="string")t=e;else do{var a=E(e,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!n&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Fa(e,n,t){if(e){var a=e.getElementsByTagName(n),l=0,o=a.length;if(t)for(;l<o;l++)t(a[l],l);return a}return[]}function Te(){var e=document.scrollingElement;return e||document.documentElement}function ie(e,n,t,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var o,i,s,r,d,c,f;if(e!==window&&e.parentNode&&e!==Te()?(o=e.getBoundingClientRect(),i=o.top,s=o.left,r=o.bottom,d=o.right,c=o.height,f=o.width):(i=0,s=0,r=window.innerHeight,d=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(n||t)&&e!==window&&(l=l||e.parentNode,!Ye))do if(l&&l.getBoundingClientRect&&(E(l,"transform")!=="none"||t&&E(l,"position")!=="static")){var v=l.getBoundingClientRect();i-=v.top+parseInt(E(l,"border-top-width")),s-=v.left+parseInt(E(l,"border-left-width")),r=i+o.height,d=s+o.width;break}while(l=l.parentNode);if(a&&e!==window){var h=ct(l||e),p=h&&h.a,m=h&&h.d;h&&(i/=m,s/=p,f/=p,c/=m,r=i+c,d=s+f)}return{top:i,left:s,bottom:r,right:d,width:f,height:c}}}function Ba(e){var n=ie(e),t=parseInt(E(e,"padding-left")),a=parseInt(E(e,"padding-top")),l=parseInt(E(e,"padding-right")),o=parseInt(E(e,"padding-bottom"));return n.top+=a+parseInt(E(e,"border-top-width")),n.left+=t+parseInt(E(e,"border-left-width")),n.width=e.clientWidth-t-l,n.height=e.clientHeight-a-o,n.bottom=n.top+n.height,n.right=n.left+n.width,n}function Jn(e,n,t){for(var a=Le(e,!0),l=ie(e)[n];a;){var o=ie(a)[t],i=void 0;if(t==="top"||t==="left"?i=l>=o:i=l<=o,!i)return a;if(a===Te())break;a=Le(a,!1)}return!1}function dt(e,n,t,a){for(var l=0,o=0,i=e.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==O.ghost&&(a||i[o]!==O.dragged)&&Ee(i[o],t.draggable,e,!1)){if(l===n)return i[o];l++}o++}return null}function Rn(e,n){for(var t=e.lastElementChild;t&&(t===O.ghost||E(t,"display")==="none"||n&&!Gt(t,n));)t=t.previousElementSibling;return t||null}function Ce(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==O.clone&&(!n||Gt(e,n))&&t++;return t}function Kn(e){var n=0,t=0,a=Te();if(e)do{var l=ct(e),o=l.a,i=l.d;n+=e.scrollLeft*o,t+=e.scrollTop*i}while(e!==a&&(e=e.parentNode));return[n,t]}function ti(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===e[t][a])return Number(t)}return-1}function Le(e,n){if(!e||!e.getBoundingClientRect)return Te();var t=e,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=E(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Te();if(a||n)return t;a=!0}}while(t=t.parentNode);return Te()}function ni(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function cn(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var xt;function Ya(e,n){return function(){if(!xt){var t=arguments,a=this;t.length===1?e.call(a,t[0]):e.apply(a,t),xt=setTimeout(function(){xt=void 0},n)}}}function ai(){clearTimeout(xt),xt=void 0}function Ua(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function $a(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}var Ve="Sortable"+new Date().getTime();function li(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(E(a,"display")==="none"||a===O.ghost)){e.push({target:a,rect:ie(a)});var l=Ae({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=ct(a,!0);o&&(l.top-=o.f,l.left-=o.e)}a.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(ti(e,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(n),typeof t=="function"&&t();return}var l=!1,o=0;e.forEach(function(i){var s=0,r=i.target,d=r.fromRect,c=ie(r),f=r.prevFromRect,v=r.prevToRect,h=i.rect,p=ct(r,!0);p&&(c.top-=p.f,c.left-=p.e),r.toRect=c,r.thisAnimationDuration&&cn(f,c)&&!cn(d,c)&&(h.top-c.top)/(h.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(s=ii(h,f,v,a.options)),cn(c,d)||(r.prevFromRect=d,r.prevToRect=c,s||(s=a.options.animation),a.animate(r,h,c,s)),s&&(l=!0,o=Math.max(o,s),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},s),r.thisAnimationDuration=s)}),clearTimeout(n),l?n=setTimeout(function(){typeof t=="function"&&t()},o):typeof t=="function"&&t(),e=[]},animate:function(t,a,l,o){if(o){E(t,"transition",""),E(t,"transform","");var i=ct(this.el),s=i&&i.a,r=i&&i.d,d=(a.left-l.left)/(s||1),c=(a.top-l.top)/(r||1);t.animatingX=!!d,t.animatingY=!!c,E(t,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=oi(t),E(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),E(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}}function oi(e){return e.offsetWidth}function ii(e,n,t,a){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*a.animation}var at=[],dn={initializeByDefault:!0},Mt={mount:function(e){for(var n in dn)dn.hasOwnProperty(n)&&!(n in e)&&(e[n]=dn[n]);at.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),at.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var l=e+"Global";at.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][l]&&n[o.pluginName][l](Ae({sortable:n},t)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ae({sortable:n},t)))})},initializePlugins:function(e,n,t,a){at.forEach(function(i){var s=i.pluginName;if(!(!e.options[s]&&!i.initializeByDefault)){var r=new i(e,n,e.options);r.sortable=e,r.options=e.options,e[s]=r,Be(t,r.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var o=this.modifyOption(e,l,e.options[l]);typeof o<"u"&&(e.options[l]=o)}},getEventProperties:function(e,n){var t={};return at.forEach(function(a){typeof a.eventProperties=="function"&&Be(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return at.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(a=l.optionListeners[n].call(e[l.pluginName],t))}),a}};function ri(e){var n=e.sortable,t=e.rootEl,a=e.name,l=e.targetEl,o=e.cloneEl,i=e.toEl,s=e.fromEl,r=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(n=n||t&&t[Ve],!!n){var m,k=n.options,b="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Ye&&!At?m=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(a,!0,!0)),m.to=i||t,m.from=s||t,m.item=l||t,m.clone=o,m.oldIndex=r,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=v,m.pullMode=h?h.lastPutMode:void 0;var B=Ae(Ae({},p),Mt.getEventProperties(a,n));for(var V in B)m[V]=B[V];t&&t.dispatchEvent(m),k[b]&&k[b].call(n,m)}}var ui=["evt"],be=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,l=Qo(t,ui);Mt.pluginEvent.bind(O)(e,n,Ae({dragEl:g,parentEl:ne,ghostEl:Y,rootEl:ee,nextEl:Je,lastDownEl:$t,cloneEl:te,cloneHidden:$e,dragStarted:bt,putSortable:de,activeSortable:O.active,originalEvent:a,oldIndex:rt,oldDraggableIndex:Vt,newIndex:xe,newDraggableIndex:Ue,hideGhostForTarget:qa,unhideGhostForTarget:za,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(o){he({sortable:n,name:o,originalEvent:a})}},l))};function he(e){ri(Ae({putSortable:de,cloneEl:te,targetEl:g,rootEl:ee,oldIndex:rt,oldDraggableIndex:Vt,newIndex:xe,newDraggableIndex:Ue},e))}var g,ne,Y,ee,Je,$t,te,$e,rt,xe,Vt,Ue,Rt,de,ot=!1,Jt=!1,Kt=[],Xe,De,fn,vn,Qn,Zn,bt,lt,Ct,Dt=!1,Nt=!1,Lt,ve,mn=[],Sn=!1,Qt=[],on=typeof document<"u",Ft=Oa,ea=At||Ye?"cssFloat":"float",si=on&&!Ra&&!Oa&&"draggable"in document.createElement("div"),La=function(){if(on){if(Ye)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ha=function(e,n){var t=E(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=dt(e,0,n),o=dt(e,1,n),i=l&&E(l),s=o&&E(o),r=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ie(l).width,d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(o).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&i.float&&i.float!=="none"){var c=i.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===c)?"vertical":"horizontal"}return l&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||r>=a&&t[ea]==="none"||o&&t[ea]==="none"&&r+d>a)?"vertical":"horizontal"},ci=function(e,n,t){var a=t?e.left:e.top,l=t?e.right:e.bottom,o=t?e.width:e.height,i=t?n.left:n.top,s=t?n.right:n.bottom,r=t?n.width:n.height;return a===i||l===s||a+o/2===i+r/2},di=function(e,n){var t;return Kt.some(function(a){var l=a[Ve].options.emptyInsertThreshold;if(!(!l||Rn(a))){var o=ie(a),i=e>=o.left-l&&e<=o.right+l,s=n>=o.top-l&&n<=o.bottom+l;if(i&&s)return t=a}}),t},ja=function(e){function n(l,o){return function(i,s,r,d){var c=i.options.group.name&&s.options.group.name&&i.options.group.name===s.options.group.name;if(l==null&&(o||c))return!0;if(l==null||l===!1)return!1;if(o&&l==="clone")return l;if(typeof l=="function")return n(l(i,s,r,d),o)(i,s,r,d);var f=(o?i:s).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},a=e.group;(!a||Ut(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},qa=function(){!La&&Y&&E(Y,"display","none")},za=function(){!La&&Y&&E(Y,"display","")};on&&!Ra&&document.addEventListener("click",function(e){if(Jt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Jt=!1,!1},!0);var We=function(e){if(g){e=e.touches?e.touches[0]:e;var n=di(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[Ve]._onDragOver(t)}}},fi=function(e){g&&g.parentNode[Ve]._isOutsideThisEl(e.target)};function O(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Be({},n),e[Ve]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ha(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,i){o.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&!_t,emptyInsertThreshold:5};Mt.initializePlugins(this,e,t);for(var a in t)!(a in n)&&(n[a]=t[a]);ja(n);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=n.forceFallback?!1:si,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?G(e,"pointerdown",this._onTapStart):(G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Kt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Be(this,li())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,g):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,l=a.preventOnFilter,o=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(i||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,d=a.filter;if(ki(t),!g&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!r.isContentEditable&&!(!this.nativeDraggable&&_t&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Ee(s,a.draggable,t,!1),!(s&&s.animated)&&$t!==s)){if(rt=Ce(s),Vt=Ce(s,a.draggable),typeof d=="function"){if(d.call(this,e,s,this)){he({sortable:n,rootEl:r,name:"filter",targetEl:s,toEl:t,fromEl:t}),be("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Ee(r,c.trim(),t,!1),c)return he({sortable:n,rootEl:c,name:"filter",targetEl:s,fromEl:t,toEl:t}),be("filter",n,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ee(r,a.handle,t,!1)||this._prepareDragStart(e,i,s)}}},_prepareDragStart:function(e,n,t){var a=this,l=a.el,o=a.options,i=l.ownerDocument,s;if(t&&!g&&t.parentNode===l){var r=ie(t);if(ee=l,g=t,ne=g.parentNode,Je=g.nextSibling,$t=t,Rt=o.group,O.dragged=g,Xe={target:g,clientX:(n||e).clientX,clientY:(n||e).clientY},Qn=Xe.clientX-r.left,Zn=Xe.clientY-r.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,g.style["will-change"]="all",s=function(){if(be("delayEnded",a,{evt:e}),O.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Wn&&a.nativeDraggable&&(g.draggable=!0),a._triggerDragStart(e,n),he({sortable:a,name:"choose",originalEvent:e}),_e(g,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Fa(g,d.trim(),hn)}),G(i,"dragover",We),G(i,"mousemove",We),G(i,"touchmove",We),G(i,"mouseup",a._onDrop),G(i,"touchend",a._onDrop),G(i,"touchcancel",a._onDrop),Wn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),be("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(At||Ye))){if(O.eventCanceled){this._onDrop();return}G(i,"mouseup",a._disableDelayedDrag),G(i,"touchend",a._disableDelayedDrag),G(i,"touchcancel",a._disableDelayedDrag),G(i,"mousemove",a._delayedDragTouchMoveHandler),G(i,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&G(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(s,o.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&hn(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._disableDelayedDrag),X(e,"touchend",this._disableDelayedDrag),X(e,"touchcancel",this._disableDelayedDrag),X(e,"mousemove",this._delayedDragTouchMoveHandler),X(e,"touchmove",this._delayedDragTouchMoveHandler),X(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(g,"dragend",this),G(ee,"dragstart",this._onDragStart));try{document.selection?Ht(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ot=!1,ee&&g){be("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",fi);var t=this.options;!e&&_e(g,t.dragClass,!1),_e(g,t.ghostClass,!0),O.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,qa();for(var e=document.elementFromPoint(De.clientX,De.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==n);)n=e;if(g.parentNode[Ve]._isOutsideThisEl(e),n)do{if(n[Ve]){var t=void 0;if(t=n[Ve]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);za()}},_onTouchMove:function(e){if(Xe){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,l=e.touches?e.touches[0]:e,o=Y&&ct(Y,!0),i=Y&&o&&o.a,s=Y&&o&&o.d,r=Ft&&ve&&Kn(ve),d=(l.clientX-Xe.clientX+a.x)/(i||1)+(r?r[0]-mn[0]:0)/(i||1),c=(l.clientY-Xe.clientY+a.y)/(s||1)+(r?r[1]-mn[1]:0)/(s||1);if(!O.active&&!ot){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(Y){o?(o.e+=d-(fn||0),o.f+=c-(vn||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E(Y,"webkitTransform",f),E(Y,"mozTransform",f),E(Y,"msTransform",f),E(Y,"transform",f),fn=d,vn=c,De=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:ee,n=ie(g,!0,Ft,!0,e),t=this.options;if(Ft){for(ve=e;E(ve,"position")==="static"&&E(ve,"transform")==="none"&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=Te()),n.top+=ve.scrollTop,n.left+=ve.scrollLeft):ve=Te(),mn=Kn(ve)}Y=g.cloneNode(!0),_e(Y,t.ghostClass,!1),_e(Y,t.fallbackClass,!0),_e(Y,t.dragClass,!0),E(Y,"transition",""),E(Y,"transform",""),E(Y,"box-sizing","border-box"),E(Y,"margin",0),E(Y,"top",n.top),E(Y,"left",n.left),E(Y,"width",n.width),E(Y,"height",n.height),E(Y,"opacity","0.8"),E(Y,"position",Ft?"absolute":"fixed"),E(Y,"zIndex","100000"),E(Y,"pointerEvents","none"),O.ghost=Y,e.appendChild(Y),E(Y,"transform-origin",Qn/parseInt(Y.style.width)*100+"% "+Zn/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,l=t.options;if(be("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}be("setupClone",this),O.eventCanceled||(te=$a(g),te.removeAttribute("id"),te.draggable=!1,te.style["will-change"]="",this._hideClone(),_e(te,this.options.chosenClass,!1),O.clone=te),t.cloneId=Ht(function(){be("clone",t),!O.eventCanceled&&(t.options.removeCloneOnHide||ee.insertBefore(te,g),t._hideClone(),he({sortable:t,name:"clone"}))}),!n&&_e(g,l.dragClass,!0),n?(Jt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(X(document,"mouseup",t._onDrop),X(document,"touchend",t._onDrop),X(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(t,a,g)),G(document,"drop",t),E(g,"transform","translateZ(0)")),ot=!0,t._dragStartId=Ht(t._dragStarted.bind(t,n,e)),G(document,"selectstart",t),bt=!0,_t&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,l,o,i=this.options,s=i.group,r=O.active,d=Rt===s,c=i.sort,f=de||r,v,h=this,p=!1;if(Sn)return;function m(ae,J){be(ae,h,Ae({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:o,dragRect:a,targetRect:l,canSort:c,fromSortable:f,target:t,completed:b,onMove:function(ke,we){return Bt(ee,n,g,a,ke,ie(ke),e,we)},changed:B},J))}function k(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function b(ae){return m("dragOverCompleted",{insertion:ae}),ae&&(d?r._hideClone():r._showClone(h),h!==f&&(_e(g,de?de.options.ghostClass:r.options.ghostClass,!1),_e(g,i.ghostClass,!0)),de!==h&&h!==O.active?de=h:h===O.active&&de&&(de=null),f===h&&(h._ignoreWhileAnimating=t),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===g&&!g.animated||t===n&&!t.animated)&&(lt=null),!i.dragoverBubble&&!e.rootEl&&t!==document&&(g.parentNode[Ve]._isOutsideThisEl(e.target),!ae&&We(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function B(){xe=Ce(g),Ue=Ce(g,i.draggable),he({sortable:h,name:"change",toEl:n,newIndex:xe,newDraggableIndex:Ue,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Ee(t,i.draggable,n,!0),m("dragOver"),O.eventCanceled)return p;if(g.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||h._ignoreWhileAnimating===t)return b(!1);if(Jt=!1,r&&!i.disabled&&(d?c||(o=ne!==ee):de===this||(this.lastPutMode=Rt.checkPull(this,r,g,e))&&s.checkPut(this,r,g,e))){if(v=this._getDirection(e,t)==="vertical",a=ie(g),m("dragOverValid"),O.eventCanceled)return p;if(o)return ne=ee,k(),this._hideClone(),m("revert"),O.eventCanceled||(Je?ee.insertBefore(g,Je):ee.appendChild(g)),b(!0);var V=Rn(n,i.draggable);if(!V||pi(e,v,this)&&!V.animated){if(V===g)return b(!1);if(V&&n===e.target&&(t=V),t&&(l=ie(t)),Bt(ee,n,g,a,t,l,e,!!t)!==!1)return k(),V&&V.nextSibling?n.insertBefore(g,V.nextSibling):n.appendChild(g),ne=n,B(),b(!0)}else if(V&&hi(e,v,this)){var D=dt(n,0,i,!0);if(D===g)return b(!1);if(t=D,l=ie(t),Bt(ee,n,g,a,t,l,e,!1)!==!1)return k(),n.insertBefore(g,D),ne=n,B(),b(!0)}else if(t.parentNode===n){l=ie(t);var _=0,x,R=g.parentNode!==n,W=!ci(g.animated&&g.toRect||a,t.animated&&t.toRect||l,v),y=v?"top":"left",T=Jn(t,"top","top")||Jn(g,"top","top"),A=T?T.scrollTop:void 0;lt!==t&&(x=l[y],Dt=!1,Nt=!W&&i.invertSwap||R),_=gi(e,t,l,v,W?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,Nt,lt===t);var H;if(_!==0){var I=Ce(g);do I-=_,H=ne.children[I];while(H&&(E(H,"display")==="none"||H===Y))}if(_===0||H===t)return b(!1);lt=t,Ct=_;var C=t.nextElementSibling,S=!1;S=_===1;var N=Bt(ee,n,g,a,t,l,e,S);if(N!==!1)return(N===1||N===-1)&&(S=N===1),Sn=!0,setTimeout(mi,30),k(),S&&!C?n.appendChild(g):t.parentNode.insertBefore(g,S?C:t),T&&Ua(T,0,A-T.scrollTop),ne=g.parentNode,x!==void 0&&!Nt&&(Lt=Math.abs(x-ie(t)[y])),B(),b(!0)}if(n.contains(g))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",We),X(document,"mousemove",We),X(document,"touchmove",We)},_offUpEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._onDrop),X(e,"touchend",this._onDrop),X(e,"pointerup",this._onDrop),X(e,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(xe=Ce(g),Ue=Ce(g,t.draggable),be("drop",this,{evt:e}),ne=g&&g.parentNode,xe=Ce(g),Ue=Ce(g,t.draggable),O.eventCanceled){this._nulling();return}ot=!1,Nt=!1,Dt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_n(this.cloneId),_n(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_t&&E(document.body,"user-select",""),E(g,"transform",""),e&&(bt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(ee===ne||de&&de.lastPutMode!=="clone")&&te&&te.parentNode&&te.parentNode.removeChild(te),g&&(this.nativeDraggable&&X(g,"dragend",this),hn(g),g.style["will-change"]="",bt&&!ot&&_e(g,de?de.options.ghostClass:this.options.ghostClass,!1),_e(g,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),ee!==ne?(xe>=0&&(he({rootEl:ne,name:"add",toEl:ne,fromEl:ee,originalEvent:e}),he({sortable:this,name:"remove",toEl:ne,originalEvent:e}),he({rootEl:ne,name:"sort",toEl:ne,fromEl:ee,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),de&&de.save()):xe!==rt&&xe>=0&&(he({sortable:this,name:"update",toEl:ne,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),O.active&&((xe==null||xe===-1)&&(xe=rt,Ue=Vt),he({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){be("nulling",this),ee=g=ne=Y=Je=te=$t=$e=Xe=De=bt=xe=Ue=rt=Vt=lt=Ct=de=Rt=O.dragged=O.ghost=O.clone=O.active=null,Qt.forEach(function(e){e.checked=!0}),Qt.length=fn=vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":g&&(this._onDragOver(e),vi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,l=t.length,o=this.options;a<l;a++)n=t[a],Ee(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||bi(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(l,o){var i=a.children[o];Ee(i,this.options.draggable,a,!1)&&(t[l]=i)},this),n&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(a.removeChild(t[l]),a.appendChild(t[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ee(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=Mt.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&ja(t)},destroy:function(){be("destroy",this);var e=this.el;e[Ve]=null,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Kt.splice(Kt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(be("hideClone",this),O.eventCanceled)return;E(te,"display","none"),this.options.removeCloneOnHide&&te.parentNode&&te.parentNode.removeChild(te),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(be("showClone",this),O.eventCanceled)return;g.parentNode==ee&&!this.options.group.revertClone?ee.insertBefore(te,g):Je?ee.insertBefore(te,Je):ee.appendChild(te),this.options.group.revertClone&&this.animate(g,te),E(te,"display",""),$e=!1}}};function vi(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Bt(e,n,t,a,l,o,i,s){var r,d=e[Ve],c=d.options.onMove,f;return window.CustomEvent&&!Ye&&!At?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=n,r.from=e,r.dragged=t,r.draggedRect=a,r.related=l||n,r.relatedRect=o||ie(n),r.willInsertAfter=s,r.originalEvent=i,e.dispatchEvent(r),c&&(f=c.call(d,r,i)),f}function hn(e){e.draggable=!1}function mi(){Sn=!1}function hi(e,n,t){var a=ie(dt(t.el,0,t.options,!0)),l=Ba(t.el),o=10;return n?e.clientX<l.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-o||e.clientY<a.bottom&&e.clientX<a.left}function pi(e,n,t){var a=ie(Rn(t.el,t.options.draggable)),l=Ba(t.el),o=10;return n?e.clientX>l.right+o||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+o||e.clientX>a.right&&e.clientY>a.top}function gi(e,n,t,a,l,o,i,s){var r=a?e.clientY:e.clientX,d=a?t.height:t.width,c=a?t.top:t.left,f=a?t.bottom:t.right,v=!1;if(!i){if(s&&Lt<d*l){if(!Dt&&(Ct===1?r>c+d*o/2:r<f-d*o/2)&&(Dt=!0),Dt)v=!0;else if(Ct===1?r<c+Lt:r>f-Lt)return-Ct}else if(r>c+d*(1-l)/2&&r<f-d*(1-l)/2)return yi(n)}return v=v||i,v&&(r<c+d*o/2||r>f-d*o/2)?r>c+d/2?1:-1:0}function yi(e){return Ce(g)<Ce(e)?1:-1}function bi(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,a=0;t--;)a+=n.charCodeAt(t);return a.toString(36)}function ki(e){Qt.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var a=n[t];a.checked&&Qt.push(a)}}function Ht(e){return setTimeout(e,0)}function _n(e){return clearTimeout(e)}on&&G(document,"touchmove",function(e){(O.active||ot)&&e.cancelable&&e.preventDefault()});O.utils={on:G,off:X,css:E,find:Fa,is:function(e,n){return!!Ee(e,n,e,!1)},extend:ni,throttle:Ya,closest:Ee,toggleClass:_e,clone:$a,index:Ce,nextTick:Ht,cancelNextTick:_n,detectDirection:Ha,getChild:dt};O.get=function(e){return e[Ve]};O.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(O.utils=Ae(Ae({},O.utils),a.utils)),Mt.mount(a)})};O.create=function(e,n){return new O(e,n)};O.version=Zo;var oe=[],kt,xn,Vn=!1,pn,gn,Zt,wt;function wi(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):t.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),ta(),jt(),ai()},nulling:function(){Zt=xn=kt=Vn=wt=pn=gn=null,oe.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,l=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(l,o);if(Zt=n,t||this.options.forceAutoScrollFallback||At||Ye||_t){yn(n,this.options,i,t);var s=Le(i,!0);Vn&&(!wt||l!==pn||o!==gn)&&(wt&&ta(),wt=setInterval(function(){var r=Le(document.elementFromPoint(l,o),!0);r!==s&&(s=r,jt()),yn(n,a.options,r,t)},10),pn=l,gn=o)}else{if(!this.options.bubbleScroll||Le(i,!0)===Te()){jt();return}yn(n,this.options,Le(i,!1),!1)}}},Be(e,{pluginName:"scroll",initializeByDefault:!0})}function jt(){oe.forEach(function(e){clearInterval(e.pid)}),oe=[]}function ta(){clearInterval(wt)}var yn=Ya(function(e,n,t,a){if(n.scroll){var l=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=n.scrollSensitivity,s=n.scrollSpeed,r=Te(),d=!1,c;xn!==t&&(xn=t,jt(),kt=n.scroll,c=n.scrollFn,kt===!0&&(kt=Le(t,!0)));var f=0,v=kt;do{var h=v,p=ie(h),m=p.top,k=p.bottom,b=p.left,B=p.right,V=p.width,D=p.height,_=void 0,x=void 0,R=h.scrollWidth,W=h.scrollHeight,y=E(h),T=h.scrollLeft,A=h.scrollTop;h===r?(_=V<R&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),x=D<W&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):(_=V<R&&(y.overflowX==="auto"||y.overflowX==="scroll"),x=D<W&&(y.overflowY==="auto"||y.overflowY==="scroll"));var H=_&&(Math.abs(B-l)<=i&&T+V<R)-(Math.abs(b-l)<=i&&!!T),I=x&&(Math.abs(k-o)<=i&&A+D<W)-(Math.abs(m-o)<=i&&!!A);if(!oe[f])for(var C=0;C<=f;C++)oe[C]||(oe[C]={});(oe[f].vx!=H||oe[f].vy!=I||oe[f].el!==h)&&(oe[f].el=h,oe[f].vx=H,oe[f].vy=I,clearInterval(oe[f].pid),(H!=0||I!=0)&&(d=!0,oe[f].pid=setInterval(function(){a&&this.layer===0&&O.active._onTouchMove(Zt);var S=oe[this.layer].vy?oe[this.layer].vy*s:0,N=oe[this.layer].vx?oe[this.layer].vx*s:0;typeof c=="function"&&c.call(O.dragged.parentNode[Ve],N,S,e,Zt,oe[this.layer].el)!=="continue"||Ua(oe[this.layer].el,N,S)}.bind({layer:f}),24))),f++}while(n.bubbleScroll&&v!==r&&(v=Le(v,!1)));Vn=d}},30),Xa=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,l=e.activeSortable,o=e.dispatchSortableEvent,i=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var r=t||l;i();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);s(),r&&!r.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function Nn(){}Nn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=dt(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:Xa};Be(Nn,{pluginName:"revertOnSpill"});function Fn(){}Fn.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:Xa};Be(Fn,{pluginName:"removeOnSpill"});O.mount(new wi);O.mount(Fn,Nn);function Si(e){return e==null?e:JSON.parse(JSON.stringify(e))}function _i(e){Tn()&&Vl(e)}function xi(e){Tn()?It(e):Oe(e)}const na=Symbol("cloneElement");function Vi(...e){var n,t;const a=(n=Tn())==null?void 0:n.proxy,l=e[0];let[,o,i]=e;Array.isArray(F(o))||(i=o,o=null);let s=null;const{immediate:r=!0,clone:d=Si,customUpdate:c}=(t=F(i))!=null?t:{};function f(x){var R;x.item[na]=d(F((R=F(o))==null?void 0:R[x.oldIndex]))}function v(x){const R=x.item[na];Ho(R)||(sn(x.item),Lo(F(o),x.newDraggableIndex,R))}function h(x){const{from:R,item:W,oldIndex:y,oldDraggableIndex:T,pullMode:A,clone:H}=x;if(A==="clone"){zn(R,W,y),sn(H);return}$o(F(o),T)}function p(x){if(c){c(x);return}const{from:R,item:W,oldIndex:y,newIndex:T}=x;if(sn(W),zn(R,W,y),pa(o)){const A=[...F(o)];o.value=qn(A,y,T);return}qn(F(o),y,T)}const m={onUpdate:p,onStart:f,onAdd:v,onRemove:h};function k(x){const R=F(l);return x||(x=jo(R)?qo(R,a?.$el):R),x&&!Wo(x)&&(x=x.$el),x||Bo("Root element not found"),x}function b(){var x;const R=(x=F(i))!=null?x:{},W=Aa(R,["immediate","clone"]);return Xo(o===null?{}:m,W)}const B=x=>{x=k(x),s&&V.destroy(),s=new O(x,b())};ue(()=>i,()=>{s&&Go(b(),(x,R)=>{s?.option(x,R)})},{deep:!0});const V={option:(x,R)=>s?.option(x,R),destroy:()=>{s?.destroy(),s=null},save:()=>s?.save(),toArray:()=>s?.toArray(),closest:(...x)=>s?.closest(...x)},D=()=>V?.option("disabled",!0),_=()=>V?.option("disabled",!1);return xi(()=>{r&&B()}),_i(V.destroy),it({start:B,pause:D,resume:_},V)}const Cn=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Ci=["animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Cn.map(e=>`on${e.replace(/^\S/,n=>n.toUpperCase())}`)],Di=Sl({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Ci,emits:["update:modelValue",...Cn],setup(e,{slots:n,emit:t,expose:a,attrs:l}){const o=Cn.reduce((c,f)=>{const v=`on${f.replace(/^\S/,h=>h.toUpperCase())}`;return c[v]=h=>t(f,h),c},{}),i=M(()=>{const c=_l(e),f=Aa(c,["modelValue"]),v=Object.entries(f).reduce((h,[p,m])=>{const k=F(m);return k!==void 0&&(h[p]=k),h},{});return it(it({},o),Uo(it(it({},l),v)))}),s=M({get:()=>e.modelValue,set:c=>t("update:modelValue",c)}),r=U(),d=Ze(Vi(e.target||r,s,i));return a(d),()=>{if(n.default)return xl(e.tag||"div",{ref:r},n.default(d))}}}),Pi=["innerHTML"],Ei={__name:"EditableProcedureTimeline",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=Cl("markdownit"),t=In(),a=Dl(e,"modelValue");function l(r){return t.getDataObjectById(r.technique)===void 0?`(Label not found for technique ${r.technique})`:t.getDataObjectById(r.technique)?.label}const o=U();function i(r,d){a.value[d]=r,o.value=null}function s(r,d){a.value.splice(r,1),d.value=!1}return(r,d)=>($(),Z(F(Di),{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value=c),handle:".handle",animation:150,class:"list",ghostClass:"ghost"},{default:w(()=>[($(!0),ge(se,null,St(a.value,(c,f)=>($(),ge("div",{key:f+c.tactic+c.technique+c.description,"dot-color":"blue",size:"medium",width:"100%",class:"mb-3 pl-8 item"},[f===o.value?($(),Z(Ea,{key:0,editProcedure:c,editIndex:o.value,onCancel:d[0]||(d[0]=v=>o.value=null),onUpdate:i},null,8,["editProcedure","editIndex"])):($(),Z(Fe,{key:1,title:l(c),subtitle:F(t).getDataObjectById(c.tactic).name,variant:"outlined",style:{border:"solid 1px","border-color":"lightgray"}},{append:w(()=>[z("div",{style:st({cursor:o.value||a.value.length===1?"not-allowed":"grab"})},[u(He,{style:st({"pointer-events":o.value||a.value.length===1?"none":""}),class:"handle",color:o.value||a.value.length===1?"grey-lighten-1":"grey-darken-3"},{default:w(()=>[q(" mdi-arrow-up-down ")]),_:1},8,["style","color"])],4)]),default:w(()=>[c.description?($(),Z(Pt,{key:0,innerHTML:F(n).render(c.description)},null,8,["innerHTML"])):pe("",!0),u(et,null,{default:w(()=>[u(Ne),u(Q,{icon:"mdi-pencil",color:"blue",onClick:v=>o.value=f},null,8,["onClick"]),u(an,{width:"500"},{activator:w(({props:v})=>[u(Q,L(v,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:v})=>[u(Fe,null,{default:w(()=>[u(zt,{class:"text-wrap"},{default:w(()=>[q(Ie(`Delete "${l(c)}"?`),1)]),_:2},1024),u(Pt,null,{default:w(()=>[z("div",{innerHTML:c.description},null,8,Pi)]),_:2},1024),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:h=>v.value=!1},null,8,["onClick"]),u(Q,{text:"Delete",color:"red",onClick:h=>s(f,v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle"]))]))),128))]),_:1},8,["modelValue"]))}},Ii=ga(Ei,[["__scopeId","data-v-3535407d"]]),Wa={__name:"AddSource",props:["sources","editSource","editIndex"],emits:["submit","cancel","update"],setup(e,{emit:n}){const t=n,{sources:a,editSource:l,editIndex:o}=e,i=U(!1),s=Ze({title:"",url:""});It(()=>{l&&(s.title=l.title,s.url=l.url)});const r=[v=>{if(!v)return!0;if(!v.startsWith("http://")&&!v.startsWith("https://"))return"URL does not start with http(s)://";if(/\s/.test(v.trim()))return"URL should not contain spaces";try{return new URL(v),!0}catch{return"URL is not valid"}}],d=U(!1);function c(){!s.title&&!s.url?d.value=!0:i.value&&l?t("update",s,o):i.value&&t("submit",s)}function f(){return l?o+1:a.length+1}return(v,h)=>($(),Z(ln,{onSubmit:h[4]||(h[4]=tn(()=>{},["prevent"])),modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=p=>i.value=p)},{default:w(()=>[u(Fe,{variant:"outlined",title:`Source ${f()}`},{default:w(()=>[u(Ke,{modelValue:s.title,"onUpdate:modelValue":h[0]||(h[0]=p=>s.title=p),label:"Description",variant:"outlined",hint:"Brief description (optional)","prepend-inner-icon":"mdi-file-edit-outline",class:"pt-6 px-6 pb-3"},null,8,["modelValue"]),u(Ke,{modelValue:s.url,"onUpdate:modelValue":h[1]||(h[1]=p=>s.url=p),modelModifiers:{trim:!0},label:"URL",variant:"outlined",hint:"Link (optional)","prepend-inner-icon":"mdi-link",class:"px-6",rules:r},null,8,["modelValue"]),u(et,null,{default:w(()=>[u(Ne),u(Q,{onClick:h[2]||(h[2]=p=>v.$emit("cancel"))},{default:w(()=>[q("Cancel")]),_:1}),u(Q,{type:"submit",color:"green",onClick:h[3]||(h[3]=p=>c())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),d.value?($(),Z(Xt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(" Please complete at least one field ")]),_:1})):pe("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"]))}},Ti={key:0},Ai={key:1},Mi=["href"],Oi={__name:"SourceList",props:["sources"],emits:["updateSource","delete"],setup(e,{emit:n}){const t=n,a=U();function l(i,s){t("updateSource",i,s),a.value=null}function o(i,s){t("delete",i),a.value>i&&a.value--,s.value=!1}return(i,s)=>($(),Z(ba,null,{default:w(()=>[($(!0),ge(se,null,St(e.sources,(r,d)=>($(),ge("div",{key:d},[d===a.value?($(),Z(Wa,{key:0,editSource:r,editIndex:a.value,onCancel:s[0]||(s[0]=c=>a.value=null),onUpdate:l},null,8,["editSource","editIndex"])):($(),Z(qt,{key:1,value:d},{append:w(()=>[u(He,{icon:"mdi-pencil",color:"blue",class:"mr-5",onClick:c=>a.value=d},null,8,["onClick"]),u(an,{width:"500"},{activator:w(({props:c})=>[u(He,L(c,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:c})=>[u(Fe,null,{default:w(()=>[u(zt,{class:"text-wrap"},{default:w(()=>[q(" Delete "+Ie(r.title||r.url)+"? ",1)]),_:2},1024),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:f=>c.value=!1},null,8,["onClick"]),u(Q,{text:"Delete",color:"red",onClick:f=>o(d,c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:w(()=>[q(Ie(d+1)+". ",1),r.url?($(),ge("span",Ai,[z("a",{href:r.url,target:"_blank"},Ie(r.title||r.url),9,Mi),u(He,{icon:"mdi-open-in-new",size:"x-small",class:"ml-1"})])):($(),ge("span",Ti,Ie(r.title),1))]),_:2},1032,["value"]))]))),128))]),_:1}))}},Ga=ce({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),aa=fe()({name:"VDatePickerControls",props:Ga(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:t}=n;const a=M(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=M(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=M(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=M(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){t("click:prev")}function r(){t("click:next")}function d(){t("click:year")}function c(){t("click:month")}return ye(()=>u("div",{class:["v-date-picker-controls"]},[u(Q,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:c},null),u(Q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),u(Ne,{key:"mode-spacer"},null),u("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[u(Q,{disabled:o.value,icon:e.prevIcon,variant:"text",onClick:s},null),u(Q,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),Ri=ce({appendIcon:String,color:String,header:String,transition:String,onClick:El()},"VDatePickerHeader"),la=fe()({name:"VDatePickerHeader",props:Ri(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:t,slots:a}=n;const{backgroundColorClasses:l,backgroundColorStyles:o}=An(e,"color");function i(){t("click")}function s(){t("click:append")}return ye(()=>{const r=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return u("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value],style:o.value,onClick:i},[a.prepend&&u("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),r&&u(Pl,{key:"content",name:e.transition},{default:()=>[u("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),d&&u("div",{class:"v-date-picker-header__append"},[a.append?u(ft,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):u(Q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:s},null)])])}),{}}}),Ni=ce({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function Fi(e){const n=Tt(),t=me(e,"modelValue",[],v=>ut(v)),a=M(()=>e.displayValue?n.date(e.displayValue):t.value.length>0?n.date(t.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),l=me(e,"year",void 0,v=>{const h=v!=null?Number(v):n.getYear(a.value);return n.startOfYear(n.setYear(n.date(),h))},v=>n.getYear(v)),o=me(e,"month",void 0,v=>{const h=v!=null?Number(v):n.getMonth(a.value),p=n.setYear(n.startOfMonth(n.date()),n.getYear(l.value));return n.setMonth(p,h)},v=>n.getMonth(v)),i=M(()=>{const v=n.getWeekArray(o.value),h=v.flat(),p=6*7;if(h.length<p){const m=h[h.length-1];let k=[];for(let b=1;b<=p-h.length;b++)k.push(n.addDays(m,b)),b%7===0&&(v.push(k),k=[])}return v});function s(v,h){return v.filter(p=>e.weekdays.includes(n.toJsDate(p).getDay())).map((p,m)=>{const k=n.toISO(p),b=!n.isSameMonth(p,o.value),B=n.isSameDay(p,n.startOfMonth(o.value)),V=n.isSameDay(p,n.endOfMonth(o.value)),D=n.isSameDay(p,o.value);return{date:p,isoDate:k,formatted:n.format(p,"keyboardDate"),year:n.getYear(p),month:n.getMonth(p),isDisabled:f(p),isWeekStart:m%7===0,isWeekEnd:m%7===6,isToday:n.isSameDay(p,h),isAdjacent:b,isHidden:b&&!e.showAdjacentMonths,isStart:B,isSelected:t.value.some(_=>n.isSameDay(p,_)),isEnd:V,isSame:D,localized:n.format(p,"dayOfMonth")}})}const r=M(()=>{const v=n.startOfWeek(t.value),h=[];for(let k=0;k<=6;k++)h.push(n.addDays(v,k));const p=h,m=n.date();return s(p,m)}),d=M(()=>{const v=i.value.flat(),h=n.date();return s(v,h)}),c=M(()=>i.value.map(v=>v.length?Il(n,v[0]):null));function f(v){if(e.disabled)return!0;const h=n.date(v);return e.min&&n.isAfter(n.date(e.min),h)||e.max&&n.isAfter(h,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(p=>n.isSameDay(n.date(p),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:d,daysInWeek:r,genDays:s,model:t,weeksInMonth:i,weekNumbers:c}}const Ja=ce({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Ni()},"VDatePickerMonth"),oa=fe()({name:"VDatePickerMonth",props:Ja(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=U(),{daysInMonth:o,model:i,weekNumbers:s}=Fi(e),r=Tt(),d=Me(),c=Me(),f=M(()=>{const m=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=m});function v(m){const k=r.startOfDay(m);if(!d.value)d.value=k,i.value=[d.value];else if(c.value)d.value=m,c.value=void 0,i.value=[d.value];else{if(r.isSameDay(m,d.value)){d.value=void 0,i.value=[];return}else r.isBefore(m,d.value)?(c.value=d.value,d.value=k):c.value=k;const b=r.getDiff(c.value,d.value,"days"),B=[d.value];for(let V=1;V<b;V++){const D=r.addDays(d.value,V);B.push(D)}B.push(c.value),i.value=B}}function h(m){const k=i.value.findIndex(b=>r.isSameDay(b,m));if(k===-1)i.value=[...i.value,m];else{const b=[...i.value];b.splice(k,1),i.value=b}}function p(m){e.multiple==="range"?v(m):e.multiple?h(m):i.value=[m]}return()=>u("div",{class:"v-date-picker-month"},[e.showWeek&&u("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&u("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q(" ")]),s.value.map(m=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[m]))]),u("div",{ref:l,class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays().map(m=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[m])),o.value.map((m,k)=>{const b={props:{onClick:()=>p(m.date)},item:m,i:k};return f.value&&!m.isSelected&&(m.isDisabled=!0),u("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":m.isAdjacent,"v-date-picker-month__day--hide-adjacent":m.isHidden,"v-date-picker-month__day--selected":m.isSelected,"v-date-picker-month__day--week-end":m.isWeekEnd,"v-date-picker-month__day--week-start":m.isWeekStart}],"data-v-date":m.isDisabled?void 0:m.isoDate},[(e.showAdjacentMonths||!m.isAdjacent)&&u(ft,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(m.isSelected||m.isToday)&&!m.isDisabled?e.color:void 0,disabled:m.isDisabled,icon:!0,ripple:!1,text:m.localized,variant:m.isDisabled?m.isToday?"outlined":"text":m.isToday&&!m.isSelected?"outlined":"flat",onClick:()=>p(m.date)}}},{default:()=>[a.day?.(b)??u(Q,b.props,null)]})])})])])}}),Ka=ce({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),ia=fe()({name:"VDatePickerMonths",props:Ka(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),o=me(e,"modelValue"),i=M(()=>{let s=l.startOfYear(l.date());return ka(12).map(r=>{const d=l.format(s,"monthShort");return s=l.getNextMonth(s),{text:d,value:r}})});return Pn(()=>{o.value=o.value??l.getMonth(l.date())}),ye(()=>u("div",{class:"v-date-picker-months",style:{height:En(e.height)}},[u("div",{class:"v-date-picker-months__content"},[i.value.map((s,r)=>{const d={active:o.value===r,color:o.value===r?e.color:void 0,rounded:!0,text:s.text,variant:o.value===s.value?"flat":"text",onClick:()=>c(r)};function c(f){if(o.value===f){t("update:modelValue",o.value);return}o.value=f}return a.month?.({month:s,i:r,props:d})??u(Q,L({key:"month"},d),null)})])])),{}}}),Qa=ce({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ra=fe()({name:"VDatePickerYears",props:Qa(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),o=me(e,"modelValue"),i=M(()=>{const r=l.getYear(l.date());let d=r-100,c=r+52;e.min&&(d=l.getYear(l.date(e.min))),e.max&&(c=l.getYear(l.date(e.max)));let f=l.startOfYear(l.date());return f=l.setYear(f,d),ka(c-d+1,d).map(v=>{const h=l.format(f,"year");return f=l.setYear(f,l.getYear(f)+1),{text:h,value:v}})});Pn(()=>{o.value=o.value??l.getYear(l.date())});const s=U();return It(async()=>{await Oe(),s.value?.$el.scrollIntoView({block:"center"})}),ye(()=>u("div",{class:"v-date-picker-years",style:{height:En(e.height)}},[u("div",{class:"v-date-picker-years__content"},[i.value.map((r,d)=>{const c={ref:o.value===r.value?s:void 0,active:o.value===r.value,color:o.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:o.value===r.value?"flat":"text",onClick:()=>{if(o.value===r.value){t("update:modelValue",o.value);return}o.value=r.value}};return a.year?.({year:r,i:d,props:c})??u(Q,L({key:"month"},c),null)})])])),{}}}),Bi=Tl("v-picker-title"),Za=ce({color:String,...Al(),...ha(),...Ml(),...Ol(),...Rl(),...Nl(),...Fl(),...Bl(),...Yl()},"VSheet"),ua=fe()({name:"VSheet",props:Za(),setup(e,n){let{slots:t}=n;const{themeClasses:a}=Ul(e),{backgroundColorClasses:l,backgroundColorStyles:o}=An(wa(e,"color")),{borderClasses:i}=$l(e),{dimensionStyles:s}=Ll(e),{elevationClasses:r}=Hl(e),{locationStyles:d}=jl(e),{positionClasses:c}=ql(e),{roundedClasses:f}=zl(e);return ye(()=>u(e.tag,{class:["v-sheet",a.value,l.value,i.value,r.value,c.value,f.value,e.class],style:[o.value,s.value,d.value,e.style]},t)),{}}}),el=ce({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Za()},"VPicker"),sa=fe()({name:"VPicker",props:el(),setup(e,n){let{slots:t}=n;const{backgroundColorClasses:a,backgroundColorStyles:l}=An(wa(e,"color"));return ye(()=>{const o=ua.filterProps(e),i=!!(e.title||t.title);return u(ua,L(o,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&u("div",{key:"header",class:[a.value],style:[l.value]},[i&&u(Bi,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&u("div",{class:"v-picker__header"},[t.header()])]),u("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&u(ft,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[u("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),Yi=ce({header:{type:String,default:"$vuetify.datePicker.header"},...Ga(),...Ja(),...Qe(Ka(),["modelValue"]),...Qe(Qa(),["modelValue"]),...el({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ui=fe()({name:"VDatePicker",props:Yi(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),{t:o}=Dn(),i=me(e,"modelValue",void 0,y=>ut(y),y=>e.multiple?y:y[0]),s=me(e,"viewMode"),r=M(()=>{const y=l.date(i.value?.[0]);return y&&l.isValid(y)?y:l.date()}),d=U(Number(e.month??l.getMonth(l.startOfMonth(r.value)))),c=U(Number(e.year??l.getYear(l.startOfYear(l.setMonth(r.value,d.value))))),f=Me(!1),v=M(()=>e.multiple&&i.value.length>1?o("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&l.isValid(i.value[0])?l.format(i.value[0],"normalDateWithWeekday"):o(e.header)),h=M(()=>l.format(l.date(new Date(c.value,d.value,1)),"monthAndYear")),p=M(()=>`date-picker-header${f.value?"-reverse":""}-transition`),m=M(()=>{const y=l.date(e.min);return e.min&&l.isValid(y)?y:null}),k=M(()=>{const y=l.date(e.max);return e.max&&l.isValid(y)?y:null}),b=M(()=>{if(e.disabled)return!0;const y=[];if(s.value!=="month")y.push("prev","next");else{let T=l.date();if(T=l.setYear(T,c.value),T=l.setMonth(T,d.value),m.value){const A=l.addDays(l.startOfMonth(T),-1);l.isAfter(m.value,A)&&y.push("prev")}if(k.value){const A=l.addDays(l.endOfMonth(T),1);l.isAfter(A,k.value)&&y.push("next")}}return y});function B(){d.value<11?d.value++:(c.value++,d.value=0,W(c.value)),R(d.value)}function V(){d.value>0?d.value--:(c.value--,d.value=11,W(c.value)),R(d.value)}function D(){s.value="month"}function _(){s.value=s.value==="months"?"month":"months"}function x(){s.value=s.value==="year"?"month":"year"}function R(y){s.value==="months"&&_(),t("update:month",y)}function W(y){s.value==="year"&&x(),t("update:year",y)}return ue(i,(y,T)=>{const A=l.date(ut(y)[0]),H=l.date(ut(T)[0]);f.value=l.isBefore(A,H)}),ye(()=>{const y=sa.filterProps(e),T=aa.filterProps(e),A=la.filterProps(e),H=oa.filterProps(e),I=Qe(ia.filterProps(e),["modelValue"]),C=Qe(ra.filterProps(e),["modelValue"]),S={header:v.value,transition:p.value};return u(sa,L(y,{class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>a.title?.()??u("div",{class:"v-date-picker__title"},[o(e.title)]),header:()=>a.header?u(ft,{defaults:{VDatePickerHeader:{...S}}},{default:()=>[a.header?.(S)]}):u(la,L({key:"header"},A,S,{onClick:s.value!=="month"?D:void 0}),{...a,default:void 0}),default:()=>u(se,null,[u(aa,L(T,{disabled:b.value,text:h.value,"onClick:next":B,"onClick:prev":V,"onClick:month":_,"onClick:year":x}),null),u(Sa,{hideOnLeave:!0},{default:()=>[s.value==="months"?u(ia,L({key:"date-picker-months"},I,{modelValue:d.value,"onUpdate:modelValue":[N=>d.value=N,R],min:m.value,max:k.value}),null):s.value==="year"?u(ra,L({key:"date-picker-years"},C,{modelValue:c.value,"onUpdate:modelValue":[N=>c.value=N,W],min:m.value,max:k.value}),null):u(oa,L({key:"date-picker-month"},H,{modelValue:i.value,"onUpdate:modelValue":N=>i.value=N,month:d.value,"onUpdate:month":[N=>d.value=N,R],year:c.value,"onUpdate:year":[N=>c.value=N,W],min:m.value,max:k.value}),null)]})]),actions:a.actions})}),{}}}),$i=ce({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...Xl()},"VHover"),Yt=fe()({name:"VHover",props:$i(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{runOpenDelay:l,runCloseDelay:o}=Wl(e,i=>!e.disabled&&(a.value=i));return()=>t.default?.({isHovering:a.value,props:{onMouseenter:l,onMouseleave:o}})}}),Li=ce({...so({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ca=fe()({name:"VRadio",props:Li(),setup(e,n){let{slots:t}=n;return ye(()=>u(Da,L(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),Hi=ce({height:{type:[Number,String],default:"auto"},...nn(),...Qe(co(),["multiple"]),trueIcon:{type:Ln,default:"$radioOn"},falseIcon:{type:Ln,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),da=fe()({name:"VRadioGroup",inheritAttrs:!1,props:Hi(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=fa(),o=M(()=>e.id||`radio-group-${l}`),i=me(e,"modelValue");return ye(()=>{const[s,r]=en(t),d=je.filterProps(e),c=Da.filterProps(e),f=a.label?a.label({label:e.label,props:{for:o.value}}):e.label;return u(je,L({class:["v-radio-group",e.class],style:e.style},s,d,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:o.value}),{...a,default:v=>{let{id:h,messagesId:p,isDisabled:m,isReadonly:k}=v;return u(se,null,[f&&u(fo,{id:h.value},{default:()=>[f]}),u(vo,L(c,{id:h.value,"aria-describedby":p.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:m.value,readonly:k.value,"aria-labelledby":f?h.value:void 0,multiple:!1},r,{modelValue:i.value,"onUpdate:modelValue":b=>i.value=b}),a)])}})}),{}}}),ji=z("p",{class:"text-h6 mb-0 mt-6"},"Details",-1),qi=z("p",{class:"text-body-2 text-grey"},"All fields are required.",-1),zi={key:0},Xi={class:"d-flex"},Wi={key:0,class:"ml-6 text-caption pt-1"},Gi={key:3},Ji={class:"d-flex"},Ki={key:0,class:"ml-6 text-caption pt-1"},Qi=z("p",{class:"text-h6 mb-0 mt-6"},"Procedure",-1),Zi={class:"text-body-2 text-grey"},er=z("p",{class:"text-h6 mb-0 mt-12"},"References",-1),tr=z("p",{class:"text-body-2 text-grey mb-0"},"Optionally list sources for this case study.",-1),nr=z("p",{class:"text-h6 mb-0 mt-12"},"Download",-1),ar=z("p",{class:"text-body-2 text-grey"},[q(" Download the case study data file, specifying the filename here. Once downloaded, email the file to "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")],-1),lr=z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org",-1),or="Create a Case Study",vr={__name:"BuildCaseStudyView",setup(e){const n=In(),t=U([]);a();async function a(){try{const C=await(await fetch(Gl("/content/case-study-legend.yaml"))).text(),S=Jl.load(C).legend;["case_study_type","name","target","actor","reporter","incident_date_granularity","incident_date","summary"].forEach(ae=>{t.value.push(S[ae])})}catch(I){console.error("Error fetching YAML file:",I)}}const l=U();let o=Ze({procedure:[],references:[],"incident-date-granularity":"DATE"});const i=["name","target","actor","reporter","incident_date"],s=U(""),r=M(()=>!!(o["case-study-type"]||o["case-study-type"]===void 0&&!v.value)),d=U(),c=U(!1),f=M(()=>{if(d.value){const I={year:"numeric"};return o["incident-date-granularity"]==="MONTH"?(I.month="long",d.value.toLocaleDateString("en-US",I)):o["incident-date-granularity"]==="YEAR"?d.value.getFullYear().toString():d.value.toISOString().split("T")[0]}return""});ue(f,()=>{o["incident-date"]=new Date(d.value)}),ue(()=>o["case-study-type"],()=>{v.value&&x.value.validate()});const v=U(!1);function h(I){return typeof I=="string"&&I.trim()?!0:"Required"}function p(I){o.procedure.push(I),m.value=!0}const m=U(!1),k=U(null),b=U(!1);function B(I){o.references.push(I),b.value=!1}function V(I){o.references.splice(I,1)}function D(I,C){o.references[C]=I}const _=U(!1),x=U(null),R=U(!1);let W,y=Ze({});function T(){if(v.value=!0,o.procedure.length===0&&k.value.addProcedureStep(),l.value&&o.procedure.length>0){let I={study:o,meta:y};o["case-study-type"]==="exercise"&&o.reporter!==void 0&&delete I.study.reporter,I.meta=Kl(I,bn.$version),Ql(I,s.value),_.value&&A(o),R.value=!0,clearTimeout(W),W=setTimeout(()=>{R.value=!1},"3000")}}async function A(I){for(const C of I.procedure){let S=await n.getDataObjectById(C.technique);S===void 0&&(S={label:`Technique not found (${C.technique})`}),C.techniqueObject=S}mo(I),I.procedure.forEach(C=>{delete C.techniqueObject})}function H(I,C){m.value=!0,s.value=C,Object.keys(I.study).forEach(S=>{S==="incident-date"?d.value=new Date(I.study["incident-date"]):o[S]=I.study[S]}),y=I.meta}return(I,C)=>($(),ge(se,null,[u(Ge,{class:"align-start"},{default:w(()=>[u(ho,{pageTitle:or}),u(On,{class:"ml-2 mt-3"},{default:w(()=>[q(Ie(`v${F(bn).$version}`),1)]),_:1})]),_:1}),u(Ge,null,{default:w(()=>[u(_o,{onSubmit:H}),u(Ne),u(Ao)]),_:1}),ji,qi,u(ln,{onSubmit:C[13]||(C[13]=tn(()=>{},["prevent"])),modelValue:l.value,"onUpdate:modelValue":C[14]||(C[14]=S=>l.value=S),ref_key:"mainForm",ref:x},{default:w(()=>[($(!0),ge(se,null,St(t.value,S=>($(),ge("div",{key:S.name},[S.name==="Case Study Type"?($(),ge("div",zi,[u(Yt,null,{default:w(({isHovering:N,props:ae})=>[u(Fe,L(ae,{variant:"outlined",class:"mb-0",subtitle:"Select case study type",height:"120",style:[N&&r.value?{"border-color":"#424242"}:{"border-color":"#9E9E9E"},r.value?{}:{"border-color":"#b00020"}]}),{default:w(()=>[u(da,{modelValue:F(o)["case-study-type"],"onUpdate:modelValue":C[0]||(C[0]=J=>F(o)["case-study-type"]=J),"prepend-icon":S.icon,density:"compact",class:"pl-4 pt-3","hide-details":!0},{default:w(()=>[($(!0),ge(se,null,St(S.options,J=>($(),Z(Ge,{key:J.name},{default:w(()=>[u(Yt,null,{default:w(({isHovering:ke,props:we})=>[z("div",Xi,[u(ca,L(we,{label:J.name,value:J.name.toLowerCase()}),null,16,["label","value"]),ke?($(),ge("div",Wi,[u(He,null,{default:w(()=>[q("mdi-menu-right")]),_:1}),q(" "+Ie(J.description),1)])):pe("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon"])]),_:2},1040,["style"])]),_:2},1024),z("div",{style:st({visibility:r.value?"hidden":"visible",color:"#c13951"}),class:"ml-4 mt-1 mb-3 text-caption font-weight-medium"}," Required ",4)])):pe("",!0),i.includes(S.name.toLowerCase())?($(),Z(Ke,{key:1,modelValue:F(o)[S.name.toLowerCase()],"onUpdate:modelValue":N=>F(o)[S.name.toLowerCase()]=N,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:S.name==="Reporter"&&F(o)["case-study-type"]!=="incident"?[]:[h],disabled:S.name==="Reporter"&&F(o)["case-study-type"]!=="incident",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules","disabled"])):pe("",!0),S.name==="Summary"?($(),Z(Pa,{key:2,modelValue:F(o)[S.name.toLowerCase()],"onUpdate:modelValue":N=>F(o)[S.name.toLowerCase()]=N,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:[h]},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules"])):pe("",!0),S.name==="Incident Date Granularity"?($(),ge("div",Gi,[u(Yt,null,{default:w(({isHovering:N,props:ae})=>[u(Fe,L(ae,{variant:"outlined",class:"mb-7",subtitle:"Select granularity for the incident date",height:"150",style:[N?{"border-color":"#424242"}:{"border-color":"#9E9E9E"}]}),{default:w(()=>[u(da,{modelValue:F(o)["incident-date-granularity"],"onUpdate:modelValue":C[1]||(C[1]=J=>F(o)["incident-date-granularity"]=J),"prepend-icon":S.icon,density:"compact",class:"pl-4 pt-3","hide-details":!0},{default:w(()=>[($(!0),ge(se,null,St(S.options,J=>($(),Z(Ge,{key:J.name},{default:w(()=>[u(Yt,null,{default:w(({isHovering:ke,props:we})=>[z("div",Ji,[u(ca,L(we,{label:J.name,value:J.name.toUpperCase()}),null,16,["label","value"]),ke?($(),ge("div",Ki,[u(He,null,{default:w(()=>[q("mdi-menu-right")]),_:1}),q(" "+Ie(J.description),1)])):pe("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon"])]),_:2},1040,["style"])]),_:2},1024)])):pe("",!0),S.name==="Incident Date"?($(),Z(ya,{key:4,"close-on-content-click":!1,modelValue:c.value,"onUpdate:modelValue":C[5]||(C[5]=N=>c.value=N)},{activator:w(({props:N})=>[u(Ke,L(N,{modelValue:f.value,"onUpdate:modelValue":C[2]||(C[2]=ae=>f.value=ae),variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,class:"mb-3",readonly:"",rules:[h]}),null,16,["modelValue","label","prepend-inner-icon","hint","rules"])]),default:w(()=>[u(Ui,{modelValue:d.value,"onUpdate:modelValue":[C[3]||(C[3]=N=>d.value=N),C[4]||(C[4]=N=>c.value=!1)],max:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10)},null,8,["modelValue","max"])]),_:2},1032,["modelValue"])):pe("",!0)]))),128)),Qi,z("p",Zi,[q(" Construct a timeline of the incident, mapped to MITRE ATLAS™ techniques. "),z("span",{style:st(F(o).procedure.length===0&&v.value?"color: #FF5252":"")},"Add at least one step. ",4)]),F(o).procedure.length>0?($(),Z(Ii,{key:0,modelValue:F(o).procedure,"onUpdate:modelValue":C[6]||(C[6]=S=>F(o).procedure=S)},null,8,["modelValue"])):pe("",!0),m.value?pe("",!0):($(),Z(Ea,{key:1,ref_key:"procedureForm",ref:k,onSubmitProcedureStep:p,onUpdateShowAddNewStep:C[7]||(C[7]=S=>m.value=!0),existingProcedures:F(o).procedure},null,8,["existingProcedures"])),z("div",{style:st({visibility:F(o).procedure.length===0&&v.value&&!m.value?"visible":"hidden",color:"#c13951"}),class:"ml-4 mb-3 text-caption font-weight-medium"}," At least one procedure step is required. ",4),m.value?($(),Z(Q,{key:2,"prepend-icon":"mdi-plus",onClick:C[8]||(C[8]=S=>m.value=!1)},{default:w(()=>[q(" Add New Step ")]),_:1})):pe("",!0),er,tr,u(Oi,{sources:F(o).references,onDelete:V,onUpdateSource:D},null,8,["sources"]),b.value?($(),Z(Wa,{key:3,sources:F(o).references,onCancel:C[9]||(C[9]=S=>b.value=!1),onSubmit:B},null,8,["sources"])):($(),Z(Q,{key:4,"prepend-icon":"mdi-plus",onClick:C[10]||(C[10]=S=>b.value=!0)},{default:w(()=>[q(" Add New Source ")]),_:1})),nr,ar,u(Ge,null,{default:w(()=>[u(kn,null,{default:w(()=>[u(Ke,{modelValue:s.value,"onUpdate:modelValue":C[11]||(C[11]=S=>s.value=S),variant:"outlined",label:"Case Study Filename","prepend-inner-icon":"mdi-file-download",hint:"Filename of the case study. The .yaml extension will be auto-applied.",rules:[h],class:"mb-3",clearable:""},null,8,["modelValue","rules"])]),_:1}),u(go,{label:"Also download as PowerPoint",modelValue:_.value,"onUpdate:modelValue":C[12]||(C[12]=S=>_.value=S),class:"ml-6"},null,8,["modelValue"])]),_:1}),u(Ge,{class:"align-center"},{default:w(()=>[u(Q,{type:"submit",color:"blue","prepend-icon":"mdi-download",onClick:T},{default:w(()=>[q(" Download Case Study ")]),_:1}),v.value&&(l.value===!1||F(o).procedure.length===0)?($(),Z(Xt,{key:0,icon:"mdi-alert",color:"red-lighten-4",density:"compact",class:"ml-6"},{default:w(()=>[q(" Please address any errors above. ")]),_:1})):pe("",!0),u(Sa,{class:"pb-0"},{default:w(()=>[R.value?($(),Z(Xt,{key:0,icon:"mdi-check-circle-outline",color:"green-lighten-5",density:"compact",class:"ml-6 text-green"},{default:w(()=>[q(" Your case study has been downloaded! Email your yaml file to "),lr]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{vr as default};
