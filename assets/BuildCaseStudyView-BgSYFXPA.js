import{N as ue,b9 as Ke,S as fe,aB as me,ba as ca,f as A,Y as pe,bb as Zt,g as s,I as L,bc as Za,bd as el,be as tl,r as $,bf as da,aL as se,aI as Oe,bg as Fn,b6 as ft,bh as Pt,bi as nl,aS as st,aC as Cn,bj as Bn,F as de,bk as fa,O as va,D as Qe,o as U,c as Z,w as S,j as K,aY as en,d as z,v as Me,t as B,bl as bn,au as Ne,bm as ma,b as X,bn as al,bo as ll,bp as ol,bq as il,_ as ha,p as rl,k as sl,br as ul,aE as Ae,bs as cl,bt as dl,b1 as pa,G as ga,E as Ht,bu as fl,L as Ge,bv as vl,bw as ml,bx as Yn,by as hl,aJ as Dn,bz as Et,bA as pl,a0 as $n,a6 as gl,bB as bl,aO as Pn,aM as yl,u as En,m as ut,h as lt,i as yn,a as we,al as kl,bC as wl,bD as Sl,bE as In,bF as xl,z as _l,bG as Vl,q as _e,s as jt,a5 as Tn,bH as Cl,aZ as Dl,bI as It,bJ as Pl,aG as ba,bK as El,ax as Il,b7 as Tl,a7 as Al,bL as Ml,bM as Ol,a9 as Rl,Q as Nl,R as Fl,U as Bl,X as ya,bN as Yl,b8 as $l,ab as Ul,bO as Ll,bP as Hl,ac as jl,bQ as ka,bR as ql,bS as zl,a3 as Un,A as Xl,B as Wl,bT as Gl,b2 as Jl}from"./index-CQxo2aw0.js";import{c as tn,d as Kl,e as An,f as Le,b as kn,g as wa,h as Sa,i as xa,j as _a,k as Ql,l as Zl,m as eo,n as to,o as no,p as ao,u as lo,q as oo,a as Je,r as io,s as ro,t as Va,v as so,w as uo,x as co}from"./filter-Thy-FAR1.js";import{V as He,b as Dt,c as Ze,a as qt}from"./VCard-CLiOrSEm.js";import{V as Mn}from"./VChip-BfTELtMQ.js";import{V as zt}from"./VAlert-k8fuih-Z.js";import{m as fo}from"./powerpointFunctions-DNN2wmI4.js";import{_ as vo}from"./PageSectionTitle.vue_vue_type_script_setup_true_lang-ebGhgylR.js";const mo=ue({...tn(),...Ke(Kl(),["inline"])},"VCheckbox"),ho=fe()({name:"VCheckbox",inheritAttrs:!1,props:mo(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=me(e,"modelValue"),{isFocused:o,focus:i,blur:u}=An(e),r=ca(),d=A(()=>e.id||`checkbox-${r}`);return pe(()=>{const[c,f]=Zt(t),v=Le.filterProps(e),h=kn.filterProps(e);return s(Le,L({class:["v-checkbox",e.class]},c,v,{modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,id:d.value,focused:o.value,style:e.style}),{...a,default:p=>{let{id:m,messagesId:k,isDisabled:y,isReadonly:N,isValid:V}=p;return s(kn,L(h,{id:m.value,"aria-describedby":k.value,disabled:y.value,readonly:N.value},f,{error:V.value===!1,modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,onFocus:i,onBlur:u}),a)}})}),{}}}),po=ue({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Za({origin:"center center",scrollStrategy:"block",transition:{component:el},zIndex:2400})},"VDialog"),nn=fe()({name:"VDialog",props:po(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{scopeId:l}=tl(),o=$();function i(r){const d=r.relatedTarget,c=r.target;if(d!==c&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(c)&&!o.value.contentEl.contains(c)){const f=nl(o.value.contentEl);if(!f.length)return;const v=f[0],h=f[f.length-1];d===v?h.focus():v.focus()}}da&&se(()=>a.value&&e.retainFocus,r=>{r?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0}),se(a,async r=>{await Oe(),r?o.value.contentEl?.focus({preventScroll:!0}):o.value.activatorEl?.focus({preventScroll:!0})});const u=A(()=>L({"aria-haspopup":"dialog","aria-expanded":String(a.value)},e.activatorProps));return pe(()=>{const r=Fn.filterProps(e);return s(Fn,L({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},r,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,"aria-modal":"true",activatorProps:u.value,role:"dialog"},l),{activator:t.activator,default:function(){for(var d=arguments.length,c=new Array(d),f=0;f<d;f++)c[f]=arguments[f];return s(ft,{root:"VDialog"},{default:()=>[t.default?.(...c)]})}})}),Pt({},o)}}),go=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...tn({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>st(e).every(n=>n!=null&&typeof n=="object")},...wa({clearable:!0})},"VFileInput"),bo=fe()({name:"VFileInput",inheritAttrs:!1,props:go(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const{t:o}=Cn(),i=me(e,"modelValue"),{isFocused:u,focus:r,blur:d}=An(e),c=A(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=A(()=>(i.value??[]).reduce((b,I)=>{let{size:T=0}=I;return b+T},0)),v=A(()=>Bn(f.value,c.value)),h=A(()=>(i.value??[]).map(b=>{const{name:I="",size:T=0}=b;return e.showSize?`${I} (${Bn(T,c.value)})`:I})),p=A(()=>{const b=i.value?.length??0;return e.showSize?o(e.counterSizeString,b,v.value):o(e.counterString,b)}),m=$(),k=$(),y=$(),N=A(()=>u.value||e.active),V=A(()=>["plain","underlined"].includes(e.variant));function D(){y.value!==document.activeElement&&y.value?.focus(),u.value||r()}function w(b){y.value?.click()}function x(b){a("mousedown:control",b)}function R(b){y.value?.click(),a("click:control",b)}function W(b){b.stopPropagation(),D(),Oe(()=>{i.value=[],fa(e["onClick:clear"],b)})}return se(i,b=>{(!Array.isArray(b)||!b.length)&&y.value&&(y.value.value="")}),pe(()=>{const b=!!(l.counter||e.counter),I=!!(b||l.details),[T,H]=Zt(t),{modelValue:M,...C}=Le.filterProps(e),_=Sa(e);return s(Le,L({ref:m,modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":V.value},e.class],style:e.style,"onClick:prepend":w},T,C,{centerAffix:!V.value,focused:u.value}),{...l,default:F=>{let{id:ie,isDisabled:te,isDirty:Ve,isReadonly:Ce,isValid:et}=F;return s(xa,L({ref:k,"prepend-icon":e.prependIcon,onMousedown:x,onClick:R,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},_,{id:ie.value,active:N.value||Ve.value,dirty:Ve.value,disabled:te.value,focused:u.value,error:et.value===!1}),{...l,default:mt=>{let{props:{class:ht,...pt}}=mt;return s(de,null,[s("input",L({ref:y,type:"file",readonly:Ce.value,disabled:te.value,multiple:e.multiple,name:e.name,onClick:be=>{be.stopPropagation(),Ce.value&&be.preventDefault(),D()},onChange:be=>{if(!be.target)return;const tt=be.target;i.value=[...tt.files??[]]},onFocus:D,onBlur:d},pt,H),null),s("div",{class:ht},[!!i.value?.length&&(l.selection?l.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:v.value}):e.chips?h.value.map(be=>s(Mn,{key:be,size:"small",color:e.color},{default:()=>[be]})):h.value.join(", "))])])}})},details:I?F=>s(de,null,[l.details?.(F),b&&s(de,null,[s("span",null,null),s(_a,{active:!!i.value?.length,value:p.value},l.counter)])]):void 0})}),Pt({},m,k,y)}}),yo=ue({...va(),...Ql()},"VForm"),an=fe()({name:"VForm",props:yo(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:a}=n;const l=Zl(e),o=$();function i(r){r.preventDefault(),l.reset()}function u(r){const d=r,c=l.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),a("submit",d),d.defaultPrevented||c.then(f=>{let{valid:v}=f;v&&o.value?.submit()}),d.preventDefault()}return pe(()=>s("form",{ref:o,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:u},[t.default?.(l)])),Pt(l,o)}}),ko=X("b",null,"overwrite any existing progress",-1),wo={__name:"UploadFileDialog",emits:["submit"],setup(e,{emit:n}){let t="";const a=$();se(a,()=>{o=0,f.value=!1,r=[],m.value.resetValidation()});function l(N){return N.length===1||"Required"}let o=0;function i(N){o++;const V=N[0],D=[".yaml"];let w="";const x=V?.name.lastIndexOf(".");return x>=0&&(w=V.name.slice(x),o===1&&(t=V.name.substring(0,x))),D.includes(w)?(Object.defineProperty(V,"name",{writable:!0,value:al()+".yaml"}),!0):`Invalid file type: expected .yaml, got ${w}`}function u(N){const V=N[0],D=1e6,w=2,x=D*w,R=V.size;return R<=0?"Invalid file":R<=x?!0:`File too large, (${w} MB limit)`}let r=Qe([]),d=Qe({});const c=$();let f=$(!1),v=$(!1);async function h(N){const D=await N[0].text();try{r=[],f.value=!1,d=ll(D,{schema:ol});const w=il(d);for(let x=0;x<w.length;x++)r.push(w[x]);return w?(f.value=!0,""):!0}catch(w){return w.reason}}const p=n,m=$(null);async function k(){await m.value.validate(),c.value&&(p("submit",d,t),a.value=[],v.value=!1)}function y(N){a.value=[],N.value=!1}return(N,V)=>(U(),Z(nn,{width:"500",modelValue:B(v),"onUpdate:modelValue":V[4]||(V[4]=D=>ma(v)?v.value=D:v=D)},{activator:S(({props:D})=>[s(K,L(D,{text:"Load case study","prepend-icon":"mdi-upload",color:"blue",variant:"text"}),null,16)]),default:S(({isActive:D})=>[s(an,{onSubmit:V[2]||(V[2]=en(()=>{},["prevent"])),modelValue:c.value,"onUpdate:modelValue":V[3]||(V[3]=w=>c.value=w),ref_key:"form",ref:m},{default:S(()=>[s(He,{title:"Load Case Study"},{default:S(()=>[s(Dt,{class:"text-subtitle-2"},{default:S(()=>[z(" To view or edit an existing case study, upload a .yaml file created by this website. Loading a file will "),ko,z(" in the form. The current case study schema version is "+Me(`v${B(bn).$version}`)+" ",1),s(bo,{label:"Case study .yaml file",accept:".yaml",rules:[l,i,u,h],"error-messages":B(r),error:B(f),variant:"outlined",density:"compact",class:"mt-6",modelValue:a.value,"onUpdate:modelValue":V[0]||(V[0]=w=>a.value=w)},null,8,["rules","error-messages","error","modelValue"])]),_:1}),s(Ze,null,{default:S(()=>[s(Ne),s(K,{text:"Cancel",onClick:w=>y(D)},null,8,["onClick"]),s(K,{text:"Ok",type:"submit",onClick:V[1]||(V[1]=w=>k())})]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["modelValue"]))}},So={},vt=e=>(rl("data-v-2afa5aea"),e=e(),sl(),e),xo=vt(()=>X("ol",null,[X("li",null," The attack exploits one or more vulnerabilities that compromise the confidentiality, integrity, or availability of a ML system. "),X("li",null," The attack is against a production/commercial ML system. This can be on MLaaS or ML systems embedded in clients/at the edge. "),X("li",null," Ensure you have permission to share this information and/or publish this research. Please follow the proper channels before reporting a new attack and make sure you are practicing responsible disclosure. ")],-1)),_o=vt(()=>X("ol",null,[X("li",null,"Fill out the form."),X("li",null,"Download the generated case study .yaml file."),X("li",null,[z(" Email the case study file to "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),z(". ")])],-1)),Vo=vt(()=>X("p",null," After downloading the case study, a new button will appear to optionally download a PowerPoint .pptx version for perusal. ",-1)),Co=vt(()=>X("p",null,' To view or edit an existing case study, click the "Load Case Study" button and upload the .yaml file. Make any necessary adjustments, then re-download the file. ',-1)),Do=vt(()=>X("p",null,[z(" For more guidance, please watch this "),X("a",{target:"_blank",href:"https://www.youtube.com/watch?v=Np_ip14YJGg&list=PLkTApXQou_8J6-t2_7QTTVDLBQlKFXPOu&index=2"},"instructional video"),z(". ")],-1)),Po=vt(()=>X("p",null,[z(" Please contact "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),z(" with any questions. ")],-1));function Eo(e,n){return U(),Z(nn,{width:"500"},{activator:S(({props:t})=>[s(K,L(t,{text:"Instructions","prepend-icon":"mdi-information-outline",color:"grey-lighten-2"}),null,16)]),default:S(({isActive:t})=>[s(He,null,{default:S(()=>[s(qt,null,{default:S(()=>[z(" Case study considerations ")]),_:1}),s(Dt,{class:"text-subtitle-2 text-grey-darken-1"},{default:S(()=>[xo]),_:1}),s(qt,null,{default:S(()=>[z(" How to use this case study builder ")]),_:1}),s(Dt,{class:"text-subtitle-2 text-grey-darken-1"},{default:S(()=>[_o,Vo,Co,Do,Po]),_:1}),s(Ze,null,{default:S(()=>[s(Ne),s(K,{text:"Ok",onClick:a=>t.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}const Io=ha(So,[["render",Eo],["__scopeId","data-v-2afa5aea"]]);function To(e,n,t){if(n==null)return e;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?s(de,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,n)]),s("span",{class:"v-autocomplete__mask"},[e.substr(n,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(n+t)])]):e}const Ao=ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...eo({filterKeys:["title"]}),...to(),...Ke(no({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ul({transition:!1})},"VAutocomplete"),Ln=fe()({name:"VAutocomplete",props:Ao(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:t}=n;const{t:a}=Cn(),l=$(),o=Ae(!1),i=Ae(!0),u=Ae(!1),r=$(),d=$(),c=me(e,"menu"),f=A({get:()=>c.value,set:P=>{c.value&&!P&&r.value?.ΨopenChildren||(c.value=P)}}),v=Ae(-1),h=A(()=>l.value?.color),p=A(()=>f.value?e.closeText:e.openText),{items:m,transformIn:k,transformOut:y}=cl(e),{textColorClasses:N,textColorStyles:V}=dl(h),D=me(e,"search",""),w=me(e,"modelValue",[],P=>k(P===null?[null]:st(P)),P=>{const ae=y(P);return e.multiple?ae:ae[0]??null}),x=A(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),R=ao(),{filteredItems:W,getMatches:b}=lo(e,m,()=>i.value?"":D.value),I=A(()=>e.hideSelected?W.value.filter(P=>!w.value.some(ae=>ae.value===P.value)):W.value),T=A(()=>!!(e.chips||t.chip)),H=A(()=>T.value||!!t.selection),M=A(()=>w.value.map(P=>P.props.value)),C=A(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&D.value===I.value[0]?.title)&&I.value.length>0&&!i.value&&!u.value),_=A(()=>e.hideNoData&&!I.value.length||e.readonly||R?.isReadonly.value),F=$(),{onListScroll:ie,onListKeydown:te}=oo(F,l);function Ve(P){e.openOnClear&&(f.value=!0),D.value=""}function Ce(){_.value||(f.value=!0)}function et(P){_.value||(o.value&&(P.preventDefault(),P.stopPropagation()),f.value=!f.value)}function mt(P){if(e.readonly||R?.isReadonly.value)return;const ae=l.value.selectionStart,re=w.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(P.key))&&P.preventDefault(),["Enter","ArrowDown"].includes(P.key)&&(f.value=!0),["Escape"].includes(P.key)&&(f.value=!1),C.value&&["Enter","Tab"].includes(P.key)&&je(I.value[0]),P.key==="ArrowDown"&&C.value&&F.value?.focus("next"),!!e.multiple){if(["Backspace","Delete"].includes(P.key)){if(v.value<0){P.key==="Backspace"&&!D.value&&(v.value=re-1);return}const j=v.value,J=w.value[v.value];J&&!J.props.disabled&&je(J,!1),v.value=j>=re-1?re-2:j}if(P.key==="ArrowLeft"){if(v.value<0&&ae>0)return;const j=v.value>-1?v.value-1:re-1;w.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(D.value?.length,D.value?.length))}if(P.key==="ArrowRight"){if(v.value<0)return;const j=v.value+1;w.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(0,0))}}}function ht(P){if(Yn(l.value,":autofill")||Yn(l.value,":-webkit-autofill")){const ae=m.value.find(re=>re.title===P.target.value);ae&&je(ae)}}function pt(){o.value&&(i.value=!0,l.value?.focus())}function be(P){o.value=!0,setTimeout(()=>{u.value=!0})}function tt(P){u.value=!1}function on(P){(P==null||P===""&&!e.multiple)&&(w.value=[])}const rn=Ae(!1);function je(P){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!P.props.disabled)if(e.multiple){const re=w.value.findIndex(J=>e.valueComparator(J.value,P.value)),j=ae??!~re;if(~re){const J=j?[...w.value,P]:[...w.value];J.splice(re,1),w.value=J}else j&&(w.value=[...w.value,P]);e.clearOnSelect&&(D.value="")}else{const re=ae!==!1;w.value=re?[P]:[],D.value=re&&!H.value?P.title:"",Oe(()=>{f.value=!1,i.value=!0})}}return se(o,(P,ae)=>{P!==ae&&(P?(rn.value=!0,D.value=e.multiple||H.value?"":String(w.value.at(-1)?.props.title??""),i.value=!0,Oe(()=>rn.value=!1)):(!e.multiple&&D.value==null?w.value=[]:C.value&&!u.value&&!w.value.some(re=>{let{value:j}=re;return j===I.value[0].value})&&je(I.value[0]),f.value=!1,D.value="",v.value=-1))}),se(D,P=>{!o.value||rn.value||(P&&(f.value=!0),i.value=!P)}),se(f,()=>{if(!e.hideSelected&&f.value&&w.value.length){const P=I.value.findIndex(ae=>w.value.some(re=>ae.value===re.value));da&&window.requestAnimationFrame(()=>{P>=0&&d.value?.scrollToIndex(P)})}}),se(()=>e.items,P=>{!o.value||!P.length||f.value||(f.value=!0)}),pe(()=>{const P=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),ae=w.value.length>0,re=Je.filterProps(e);return s(Je,L({ref:l},re,{modelValue:D.value,"onUpdate:modelValue":[j=>D.value=j,on],focused:o.value,"onUpdate:focused":j=>o.value=j,validationValue:w.externalValue,counterValue:x.value,dirty:ae,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":f.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:ae?void 0:e.placeholder,"onClick:clear":Ve,"onMousedown:control":Ce,onKeydown:mt}),{...t,default:()=>s(de,null,[s(pa,L({ref:r,modelValue:f.value,"onUpdate:modelValue":j=>f.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:_.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:pt},e.menuProps),{default:()=>[P&&s(ga,L({ref:F,selected:M.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:te,onFocusin:be,onFocusout:tt,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>[t["prepend-item"]?.(),!I.value.length&&!e.hideNoData&&(t["no-data"]?.()??s(Ht,{title:a(e.noDataText)},null)),s(io,{ref:d,renderless:!0,items:I.value},{default:j=>{let{item:J,index:Pe,itemRef:Mt}=j;const gt=L(J.props,{ref:Mt,key:Pe,active:C.value&&Pe===0?!0:void 0,onClick:()=>je(J,null)});return t.item?.({item:J,index:Pe,props:gt})??s(Ht,L(gt,{role:"option"}),{prepend:bt=>{let{isSelected:qe}=bt;return s(de,null,[e.multiple&&!e.hideSelected?s(kn,{key:J.value,modelValue:qe,ripple:!1,tabindex:"-1"},null):void 0,J.props.prependAvatar&&s(fl,{image:J.props.prependAvatar},null),J.props.prependIcon&&s(Ge,{icon:J.props.prependIcon},null)])},title:()=>i.value?J.title:To(J.title,b(J)?.title,D.value?.length??0)})}}),t["append-item"]?.()]})]}),w.value.map((j,J)=>{function Pe(qe){qe.stopPropagation(),qe.preventDefault(),je(j,!1)}const Mt={"onClick:close":Pe,onMousedown(qe){qe.preventDefault(),qe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},gt=T.value?!!t.chip:!!t.selection,bt=gt?vl(T.value?t.chip({item:j,index:J,props:Mt}):t.selection({item:j,index:J})):void 0;if(!(gt&&!bt))return s("div",{key:j.value,class:["v-autocomplete__selection",J===v.value&&["v-autocomplete__selection--selected",N.value]],style:J===v.value?V.value:{}},[T.value?t.chip?s(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>[bt]}):s(Mn,L({key:"chip",closable:e.closableChips,size:"small",text:j.title,disabled:j.props.disabled},Mt),null):bt??s("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&J<w.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var j=arguments.length,J=new Array(j),Pe=0;Pe<j;Pe++)J[Pe]=arguments[Pe];return s(de,null,[t["append-inner"]?.(...J),e.menuIcon?s(Ge,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:et,onClick:ml,"aria-label":a(p.value),title:a(p.value)},null):void 0])}})}),Pt({isFocused:o,isPristine:i,menu:f,search:D,filteredItems:W,select:je},l)}}),Mo=ue({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...tn(),...wa()},"VTextarea"),Ca=fe()({name:"VTextarea",directives:{Intersect:hl},inheritAttrs:!1,props:Mo(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const o=me(e,"modelValue"),{isFocused:i,focus:u,blur:r}=An(e),d=A(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),c=A(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function f(T,H){!e.autofocus||!T||H[0].target?.focus?.()}const v=$(),h=$(),p=Ae(""),m=$(),k=A(()=>e.persistentPlaceholder||i.value||e.active);function y(){m.value!==document.activeElement&&m.value?.focus(),i.value||u()}function N(T){y(),a("click:control",T)}function V(T){a("mousedown:control",T)}function D(T){T.stopPropagation(),y(),Oe(()=>{o.value="",fa(e["onClick:clear"],T)})}function w(T){const H=T.target;if(o.value=H.value,e.modelModifiers?.trim){const M=[H.selectionStart,H.selectionEnd];Oe(()=>{H.selectionStart=M[0],H.selectionEnd=M[1]})}}const x=$(),R=$(+e.rows),W=A(()=>["plain","underlined"].includes(e.variant));Dn(()=>{e.autoGrow||(R.value=+e.rows)});function b(){e.autoGrow&&Oe(()=>{if(!x.value||!h.value)return;const T=getComputedStyle(x.value),H=getComputedStyle(h.value.$el),M=parseFloat(T.getPropertyValue("--v-field-padding-top"))+parseFloat(T.getPropertyValue("--v-input-padding-top"))+parseFloat(T.getPropertyValue("--v-field-padding-bottom")),C=x.value.scrollHeight,_=parseFloat(T.lineHeight),F=Math.max(parseFloat(e.rows)*_+M,parseFloat(H.getPropertyValue("--v-input-control-height"))),ie=parseFloat(e.maxRows)*_+M||1/0,te=yl(C??0,F,ie);R.value=Math.floor((te-M)/_),p.value=Pn(te)})}Et(b),se(o,b),se(()=>e.rows,b),se(()=>e.maxRows,b),se(()=>e.density,b);let I;return se(x,T=>{T?(I=new ResizeObserver(b),I.observe(x.value)):I?.disconnect()}),pl(()=>{I?.disconnect()}),pe(()=>{const T=!!(l.counter||e.counter||e.counterValue),H=!!(T||l.details),[M,C]=Zt(t),{modelValue:_,...F}=Le.filterProps(e),ie=Sa(e);return s(Le,L({ref:v,modelValue:o.value,"onUpdate:modelValue":te=>o.value=te,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":W.value},e.class],style:e.style},M,F,{centerAffix:R.value===1&&!W.value,focused:i.value}),{...l,default:te=>{let{id:Ve,isDisabled:Ce,isDirty:et,isReadonly:mt,isValid:ht}=te;return s(xa,L({ref:h,style:{"--v-textarea-control-height":p.value},onClick:N,onMousedown:V,"onClick:clear":D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ie,{id:Ve.value,active:k.value||et.value,centerAffix:R.value===1&&!W.value,dirty:et.value||e.dirty,disabled:Ce.value,focused:i.value,error:ht.value===!1}),{...l,default:pt=>{let{props:{class:be,...tt}}=pt;return s(de,null,[e.prefix&&s("span",{class:"v-text-field__prefix"},[e.prefix]),$n(s("textarea",L({ref:m,class:be,value:o.value,onInput:w,autofocus:e.autofocus,readonly:mt.value,disabled:Ce.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:y,onBlur:r},tt,C),null),[[gl("intersect"),{handler:f},null,{once:!0}]]),e.autoGrow&&$n(s("textarea",{class:[be,"v-textarea__sizer"],id:`${tt.id}-sizer`,"onUpdate:modelValue":on=>o.value=on,ref:x,readonly:!0,"aria-hidden":"true"},null),[[bl,o.value]]),e.suffix&&s("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:H?te=>s(de,null,[l.details?.(te),T&&s(de,null,[s("span",null,null),s(_a,{active:e.persistentCounter||i.value,value:d.value,max:c.value},l.counter)])]):void 0})}),Pt({},v,h,m)}}),Da={__name:"AddProcedure",props:["editProcedure","editIndex"],emits:["submitProcedureStep","cancel","updateShowAddNewStep","update"],setup(e,{expose:n,emit:t}){const{editProcedure:a,editIndex:l}=e;Et(()=>{a&&(c.tactic=a.tactic,c.technique=o.getDataObjectById(a.technique)===void 0?"":a.technique,c.description=a.description)});const o=En(),i=$(!1),u=$(null),r=A(()=>!!(!i.value||c.tactic&&c.technique)),d=[m=>m?!0:"Required"];let c=Qe({tactic:"",technique:"",description:""});const f=A(()=>o.getDataObjectsByType("tactics"));se(()=>c.tactic,(m,k)=>{c.technique&&m!==k&&k&&(c.technique="")});const v=A(()=>{const m=o.getDataObjectsByTypeKeyContainingValue("techniques","tactics",c.tactic);for(let k=0;k<m.length;k++)if(m[k].subtechniques)for(let y=0;y<m[k].subtechniques.length;y++){const N=m[k].subtechniques[y],V=k+1+y;m.splice(V,0,N)}return m}),h=t;n({addProcedureStep:p});function p(){if(i.value=!0,u.value.validate(),r.value&&a){const m=JSON.parse(JSON.stringify(c));h("update",m,l),i.value=!1}else if(r.value){const m=JSON.parse(JSON.stringify(c));h("submitProcedureStep",m),u.value.reset(),i.value=!1}}return(m,k)=>(U(),Z(an,{ref_key:"procedureForm",ref:u,onSubmit:k[5]||(k[5]=en(()=>{},["prevent"]))},{default:S(()=>[s(He,{title:"Add Procedure Step",variant:"outlined",style:ut({borderColor:r.value?"grey":"red"})},{default:S(()=>[s(lt,{class:"pa-6"},{default:S(()=>[s(yn,{cols:"12",lg:"6"},{default:S(()=>[s(Ln,{label:"Tactic",items:f.value,"item-title":"name","item-value":"id",modelValue:B(c).tactic,"onUpdate:modelValue":k[0]||(k[0]=y=>B(c).tactic=y),variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},null,8,["items","modelValue"])]),_:1}),s(yn,{cols:"12",lg:"6"},{default:S(()=>[s(Ln,{label:"Technique",items:v.value,"item-title":"name","item-value":"id",modelValue:B(c).technique,"onUpdate:modelValue":k[1]||(k[1]=y=>B(c).technique=y),disabled:!B(c).tactic,variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},{item:S(({props:y,item:N})=>[s(Ht,L(y,{"prepend-icon":N.raw.tactics?"":"mdi-subdirectory-arrow-right"}),null,16,["prepend-icon"])]),_:1},8,["items","modelValue","disabled"])]),_:1}),s(Ca,{label:"Description","prepend-inner-icon":"mdi-text",hint:"Describe how this technique was used in the case study",disabled:!B(c).tactic,variant:"outlined",modelValue:B(c).description,"onUpdate:modelValue":k[2]||(k[2]=y=>B(c).description=y),modelModifiers:{trim:!0},class:"mx-3"},null,8,["disabled","modelValue"])]),_:1}),s(Ze,null,{default:S(()=>[s(Ne),s(K,{onClick:k[3]||(k[3]=y=>m.$emit(e.editProcedure?"cancel":"updateShowAddNewStep"))},{default:S(()=>[z("Cancel")]),_:1}),s(K,{type:"submit",color:"green",onClick:k[4]||(k[4]=y=>p())},{default:S(()=>[z(" Save ")]),_:1})]),_:1}),i.value&&r.value===!1?(U(),Z(zt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:S(()=>[z(Me(B(c).tactic?"Please fill out Technique":"Please fill out Tactic and Technique"),1)]),_:1})):we("",!0)]),_:1},8,["style"])]),_:1},512))}};var Oo=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,Hn=(e,n,t)=>n in e?Oo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,it=(e,n)=>{for(var t in n||(n={}))Pa.call(n,t)&&Hn(e,t,n[t]);if(Xt)for(var t of Xt(n))Ea.call(n,t)&&Hn(e,t,n[t]);return e},Ia=(e,n)=>{var t={};for(var a in e)Pa.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&Xt)for(var a of Xt(e))n.indexOf(a)<0&&Ea.call(e,a)&&(t[a]=e[a]);return t};const Ta="[vue-draggable-plus]: ";function Ro(e){console.warn(Ta+e)}function No(e){console.error(Ta+e)}function jn(e,n,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(n,1)[0]),e}function Fo(e){return e.replace(/-(\w)/g,(n,t)=>t?t.toUpperCase():"")}function Bo(e){return Object.keys(e).reduce((n,t)=>(typeof e[t]<"u"&&(n[Fo(t)]=e[t]),n),{})}function Yo(e,n){if(Array.isArray(e))return e.splice(n,1)}function $o(e,n,t){if(Array.isArray(e))return e.splice(n,0,t)}function Uo(e){return typeof e>"u"}function Lo(e){return typeof e=="string"}function qn(e,n,t){const a=e.children[t];e.insertBefore(n,a)}function sn(e){e.parentNode&&e.parentNode.removeChild(e)}function Ho(e,n=document){var t;let a=null;return typeof n?.querySelector=="function"?a=(t=n?.querySelector)==null?void 0:t.call(n,e):a=document.querySelector(e),a||Ro(`Element not found: ${e}`),a}function jo(e,n,t=null){return function(...a){return e.apply(t,a),n.apply(t,a)}}function qo(e,n){const t=it({},e);return Object.keys(n).forEach(a=>{t[a]?t[a]=jo(e[a],n[a]):t[a]=n[a]}),t}function zo(e){return e instanceof HTMLElement}function Xo(e,n){Object.keys(e).forEach(t=>{n(t,e[t])})}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,a)}return t}function Te(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?zn(Object(t),!0).forEach(function(a){Wo(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Bt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bt=function(n){return typeof n}:Bt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bt(e)}function Wo(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Fe(){return Fe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fe.apply(this,arguments)}function Go(e,n){if(e==null)return{};var t={},a=Object.keys(e),l,o;for(o=0;o<a.length;o++)l=a[o],!(n.indexOf(l)>=0)&&(t[l]=e[l]);return t}function Jo(e,n){if(e==null)return{};var t=Go(e,n),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var Ko="1.15.1";function Re(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Be=Re(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tt=Re(/Edge/i),Xn=Re(/firefox/i),St=Re(/safari/i)&&!Re(/chrome/i)&&!Re(/android/i),Aa=Re(/iP(ad|od|hone)/i),Ma=Re(/chrome/i)&&Re(/android/i),Oa={capture:!1,passive:!1};function G(e,n,t){e.addEventListener(n,t,!Be&&Oa)}function q(e,n,t){e.removeEventListener(n,t,!Be&&Oa)}function Wt(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function Qo(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ee(e,n,t,a){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&Wt(e,n):Wt(e,n))||a&&e===t)return e;if(e===t)break}while(e=Qo(e))}return null}var Wn=/\s+/g;function ye(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var a=(" "+e.className+" ").replace(Wn," ").replace(" "+n+" "," ");e.className=(a+(t?" "+n:"")).replace(Wn," ")}}function E(e,n,t){var a=e&&e.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=t+(typeof t=="string"?"":"px")}}function ct(e,n){var t="";if(typeof e=="string")t=e;else do{var a=E(e,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!n&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Ra(e,n,t){if(e){var a=e.getElementsByTagName(n),l=0,o=a.length;if(t)for(;l<o;l++)t(a[l],l);return a}return[]}function Ie(){var e=document.scrollingElement;return e||document.documentElement}function oe(e,n,t,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var o,i,u,r,d,c,f;if(e!==window&&e.parentNode&&e!==Ie()?(o=e.getBoundingClientRect(),i=o.top,u=o.left,r=o.bottom,d=o.right,c=o.height,f=o.width):(i=0,u=0,r=window.innerHeight,d=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(n||t)&&e!==window&&(l=l||e.parentNode,!Be))do if(l&&l.getBoundingClientRect&&(E(l,"transform")!=="none"||t&&E(l,"position")!=="static")){var v=l.getBoundingClientRect();i-=v.top+parseInt(E(l,"border-top-width")),u-=v.left+parseInt(E(l,"border-left-width")),r=i+o.height,d=u+o.width;break}while(l=l.parentNode);if(a&&e!==window){var h=ct(l||e),p=h&&h.a,m=h&&h.d;h&&(i/=m,u/=p,f/=p,c/=m,r=i+c,d=u+f)}return{top:i,left:u,bottom:r,right:d,width:f,height:c}}}function Na(e){var n=oe(e),t=parseInt(E(e,"padding-left")),a=parseInt(E(e,"padding-top")),l=parseInt(E(e,"padding-right")),o=parseInt(E(e,"padding-bottom"));return n.top+=a+parseInt(E(e,"border-top-width")),n.left+=t+parseInt(E(e,"border-left-width")),n.width=e.clientWidth-t-l,n.height=e.clientHeight-a-o,n.bottom=n.top+n.height,n.right=n.left+n.width,n}function Gn(e,n,t){for(var a=Ue(e,!0),l=oe(e)[n];a;){var o=oe(a)[t],i=void 0;if(t==="top"||t==="left"?i=l>=o:i=l<=o,!i)return a;if(a===Ie())break;a=Ue(a,!1)}return!1}function dt(e,n,t,a){for(var l=0,o=0,i=e.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==O.ghost&&(a||i[o]!==O.dragged)&&Ee(i[o],t.draggable,e,!1)){if(l===n)return i[o];l++}o++}return null}function On(e,n){for(var t=e.lastElementChild;t&&(t===O.ghost||E(t,"display")==="none"||n&&!Wt(t,n));)t=t.previousElementSibling;return t||null}function xe(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==O.clone&&(!n||Wt(e,n))&&t++;return t}function Jn(e){var n=0,t=0,a=Ie();if(e)do{var l=ct(e),o=l.a,i=l.d;n+=e.scrollLeft*o,t+=e.scrollTop*i}while(e!==a&&(e=e.parentNode));return[n,t]}function Zo(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===e[t][a])return Number(t)}return-1}function Ue(e,n){if(!e||!e.getBoundingClientRect)return Ie();var t=e,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=E(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ie();if(a||n)return t;a=!0}}while(t=t.parentNode);return Ie()}function ei(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function un(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var xt;function Fa(e,n){return function(){if(!xt){var t=arguments,a=this;t.length===1?e.call(a,t[0]):e.apply(a,t),xt=setTimeout(function(){xt=void 0},n)}}}function ti(){clearTimeout(xt),xt=void 0}function Ba(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function Ya(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}var Se="Sortable"+new Date().getTime();function ni(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(E(a,"display")==="none"||a===O.ghost)){e.push({target:a,rect:oe(a)});var l=Te({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=ct(a,!0);o&&(l.top-=o.f,l.left-=o.e)}a.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Zo(e,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(n),typeof t=="function"&&t();return}var l=!1,o=0;e.forEach(function(i){var u=0,r=i.target,d=r.fromRect,c=oe(r),f=r.prevFromRect,v=r.prevToRect,h=i.rect,p=ct(r,!0);p&&(c.top-=p.f,c.left-=p.e),r.toRect=c,r.thisAnimationDuration&&un(f,c)&&!un(d,c)&&(h.top-c.top)/(h.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(u=li(h,f,v,a.options)),un(c,d)||(r.prevFromRect=d,r.prevToRect=c,u||(u=a.options.animation),a.animate(r,h,c,u)),u&&(l=!0,o=Math.max(o,u),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},u),r.thisAnimationDuration=u)}),clearTimeout(n),l?n=setTimeout(function(){typeof t=="function"&&t()},o):typeof t=="function"&&t(),e=[]},animate:function(t,a,l,o){if(o){E(t,"transition",""),E(t,"transform","");var i=ct(this.el),u=i&&i.a,r=i&&i.d,d=(a.left-l.left)/(u||1),c=(a.top-l.top)/(r||1);t.animatingX=!!d,t.animatingY=!!c,E(t,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=ai(t),E(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),E(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}}function ai(e){return e.offsetWidth}function li(e,n,t,a){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*a.animation}var nt=[],cn={initializeByDefault:!0},At={mount:function(e){for(var n in cn)cn.hasOwnProperty(n)&&!(n in e)&&(e[n]=cn[n]);nt.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),nt.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var l=e+"Global";nt.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][l]&&n[o.pluginName][l](Te({sortable:n},t)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Te({sortable:n},t)))})},initializePlugins:function(e,n,t,a){nt.forEach(function(i){var u=i.pluginName;if(!(!e.options[u]&&!i.initializeByDefault)){var r=new i(e,n,e.options);r.sortable=e,r.options=e.options,e[u]=r,Fe(t,r.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var o=this.modifyOption(e,l,e.options[l]);typeof o<"u"&&(e.options[l]=o)}},getEventProperties:function(e,n){var t={};return nt.forEach(function(a){typeof a.eventProperties=="function"&&Fe(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return nt.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(a=l.optionListeners[n].call(e[l.pluginName],t))}),a}};function oi(e){var n=e.sortable,t=e.rootEl,a=e.name,l=e.targetEl,o=e.cloneEl,i=e.toEl,u=e.fromEl,r=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(n=n||t&&t[Se],!!n){var m,k=n.options,y="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Be&&!Tt?m=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(a,!0,!0)),m.to=i||t,m.from=u||t,m.item=l||t,m.clone=o,m.oldIndex=r,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=v,m.pullMode=h?h.lastPutMode:void 0;var N=Te(Te({},p),At.getEventProperties(a,n));for(var V in N)m[V]=N[V];t&&t.dispatchEvent(m),k[y]&&k[y].call(n,m)}}var ii=["evt"],ge=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,l=Jo(t,ii);At.pluginEvent.bind(O)(e,n,Te({dragEl:g,parentEl:ne,ghostEl:Y,rootEl:Q,nextEl:We,lastDownEl:Yt,cloneEl:ee,cloneHidden:$e,dragStarted:yt,putSortable:ce,activeSortable:O.active,originalEvent:a,oldIndex:rt,oldDraggableIndex:_t,newIndex:ke,newDraggableIndex:Ye,hideGhostForTarget:Ha,unhideGhostForTarget:ja,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(o){he({sortable:n,name:o,originalEvent:a})}},l))};function he(e){oi(Te({putSortable:ce,cloneEl:ee,targetEl:g,rootEl:Q,oldIndex:rt,oldDraggableIndex:_t,newIndex:ke,newDraggableIndex:Ye},e))}var g,ne,Y,Q,We,Yt,ee,$e,rt,ke,_t,Ye,Ot,ce,ot=!1,Gt=!1,Jt=[],ze,De,dn,fn,Kn,Qn,yt,at,Vt,Ct=!1,Rt=!1,$t,ve,vn=[],wn=!1,Kt=[],ln=typeof document<"u",Nt=Aa,Zn=Tt||Be?"cssFloat":"float",ri=ln&&!Ma&&!Aa&&"draggable"in document.createElement("div"),$a=function(){if(ln){if(Be)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ua=function(e,n){var t=E(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=dt(e,0,n),o=dt(e,1,n),i=l&&E(l),u=o&&E(o),r=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+oe(l).width,d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+oe(o).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&i.float&&i.float!=="none"){var c=i.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return l&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||r>=a&&t[Zn]==="none"||o&&t[Zn]==="none"&&r+d>a)?"vertical":"horizontal"},si=function(e,n,t){var a=t?e.left:e.top,l=t?e.right:e.bottom,o=t?e.width:e.height,i=t?n.left:n.top,u=t?n.right:n.bottom,r=t?n.width:n.height;return a===i||l===u||a+o/2===i+r/2},ui=function(e,n){var t;return Jt.some(function(a){var l=a[Se].options.emptyInsertThreshold;if(!(!l||On(a))){var o=oe(a),i=e>=o.left-l&&e<=o.right+l,u=n>=o.top-l&&n<=o.bottom+l;if(i&&u)return t=a}}),t},La=function(e){function n(l,o){return function(i,u,r,d){var c=i.options.group.name&&u.options.group.name&&i.options.group.name===u.options.group.name;if(l==null&&(o||c))return!0;if(l==null||l===!1)return!1;if(o&&l==="clone")return l;if(typeof l=="function")return n(l(i,u,r,d),o)(i,u,r,d);var f=(o?i:u).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},a=e.group;(!a||Bt(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},Ha=function(){!$a&&Y&&E(Y,"display","none")},ja=function(){!$a&&Y&&E(Y,"display","")};ln&&!Ma&&document.addEventListener("click",function(e){if(Gt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Gt=!1,!1},!0);var Xe=function(e){if(g){e=e.touches?e.touches[0]:e;var n=ui(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[Se]._onDragOver(t)}}},ci=function(e){g&&g.parentNode[Se]._isOutsideThisEl(e.target)};function O(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Fe({},n),e[Se]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ua(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,i){o.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&!St,emptyInsertThreshold:5};At.initializePlugins(this,e,t);for(var a in t)!(a in n)&&(n[a]=t[a]);La(n);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=n.forceFallback?!1:ri,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?G(e,"pointerdown",this._onTapStart):(G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Jt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Fe(this,ni())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(at=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,g):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,l=a.preventOnFilter,o=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(i||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,d=a.filter;if(bi(t),!g&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!r.isContentEditable&&!(!this.nativeDraggable&&St&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Ee(u,a.draggable,t,!1),!(u&&u.animated)&&Yt!==u)){if(rt=xe(u),_t=xe(u,a.draggable),typeof d=="function"){if(d.call(this,e,u,this)){he({sortable:n,rootEl:r,name:"filter",targetEl:u,toEl:t,fromEl:t}),ge("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Ee(r,c.trim(),t,!1),c)return he({sortable:n,rootEl:c,name:"filter",targetEl:u,fromEl:t,toEl:t}),ge("filter",n,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ee(r,a.handle,t,!1)||this._prepareDragStart(e,i,u)}}},_prepareDragStart:function(e,n,t){var a=this,l=a.el,o=a.options,i=l.ownerDocument,u;if(t&&!g&&t.parentNode===l){var r=oe(t);if(Q=l,g=t,ne=g.parentNode,We=g.nextSibling,Yt=t,Ot=o.group,O.dragged=g,ze={target:g,clientX:(n||e).clientX,clientY:(n||e).clientY},Kn=ze.clientX-r.left,Qn=ze.clientY-r.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,g.style["will-change"]="all",u=function(){if(ge("delayEnded",a,{evt:e}),O.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Xn&&a.nativeDraggable&&(g.draggable=!0),a._triggerDragStart(e,n),he({sortable:a,name:"choose",originalEvent:e}),ye(g,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Ra(g,d.trim(),mn)}),G(i,"dragover",Xe),G(i,"mousemove",Xe),G(i,"touchmove",Xe),G(i,"mouseup",a._onDrop),G(i,"touchend",a._onDrop),G(i,"touchcancel",a._onDrop),Xn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),ge("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Tt||Be))){if(O.eventCanceled){this._onDrop();return}G(i,"mouseup",a._disableDelayedDrag),G(i,"touchend",a._disableDelayedDrag),G(i,"touchcancel",a._disableDelayedDrag),G(i,"mousemove",a._delayedDragTouchMoveHandler),G(i,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&G(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&mn(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._disableDelayedDrag),q(e,"touchend",this._disableDelayedDrag),q(e,"touchcancel",this._disableDelayedDrag),q(e,"mousemove",this._delayedDragTouchMoveHandler),q(e,"touchmove",this._delayedDragTouchMoveHandler),q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(g,"dragend",this),G(Q,"dragstart",this._onDragStart));try{document.selection?Ut(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ot=!1,Q&&g){ge("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",ci);var t=this.options;!e&&ye(g,t.dragClass,!1),ye(g,t.ghostClass,!0),O.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,Ha();for(var e=document.elementFromPoint(De.clientX,De.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==n);)n=e;if(g.parentNode[Se]._isOutsideThisEl(e),n)do{if(n[Se]){var t=void 0;if(t=n[Se]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);ja()}},_onTouchMove:function(e){if(ze){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,l=e.touches?e.touches[0]:e,o=Y&&ct(Y,!0),i=Y&&o&&o.a,u=Y&&o&&o.d,r=Nt&&ve&&Jn(ve),d=(l.clientX-ze.clientX+a.x)/(i||1)+(r?r[0]-vn[0]:0)/(i||1),c=(l.clientY-ze.clientY+a.y)/(u||1)+(r?r[1]-vn[1]:0)/(u||1);if(!O.active&&!ot){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(Y){o?(o.e+=d-(dn||0),o.f+=c-(fn||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E(Y,"webkitTransform",f),E(Y,"mozTransform",f),E(Y,"msTransform",f),E(Y,"transform",f),dn=d,fn=c,De=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:Q,n=oe(g,!0,Nt,!0,e),t=this.options;if(Nt){for(ve=e;E(ve,"position")==="static"&&E(ve,"transform")==="none"&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=Ie()),n.top+=ve.scrollTop,n.left+=ve.scrollLeft):ve=Ie(),vn=Jn(ve)}Y=g.cloneNode(!0),ye(Y,t.ghostClass,!1),ye(Y,t.fallbackClass,!0),ye(Y,t.dragClass,!0),E(Y,"transition",""),E(Y,"transform",""),E(Y,"box-sizing","border-box"),E(Y,"margin",0),E(Y,"top",n.top),E(Y,"left",n.left),E(Y,"width",n.width),E(Y,"height",n.height),E(Y,"opacity","0.8"),E(Y,"position",Nt?"absolute":"fixed"),E(Y,"zIndex","100000"),E(Y,"pointerEvents","none"),O.ghost=Y,e.appendChild(Y),E(Y,"transform-origin",Kn/parseInt(Y.style.width)*100+"% "+Qn/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,l=t.options;if(ge("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}ge("setupClone",this),O.eventCanceled||(ee=Ya(g),ee.removeAttribute("id"),ee.draggable=!1,ee.style["will-change"]="",this._hideClone(),ye(ee,this.options.chosenClass,!1),O.clone=ee),t.cloneId=Ut(function(){ge("clone",t),!O.eventCanceled&&(t.options.removeCloneOnHide||Q.insertBefore(ee,g),t._hideClone(),he({sortable:t,name:"clone"}))}),!n&&ye(g,l.dragClass,!0),n?(Gt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(q(document,"mouseup",t._onDrop),q(document,"touchend",t._onDrop),q(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(t,a,g)),G(document,"drop",t),E(g,"transform","translateZ(0)")),ot=!0,t._dragStartId=Ut(t._dragStarted.bind(t,n,e)),G(document,"selectstart",t),yt=!0,St&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,l,o,i=this.options,u=i.group,r=O.active,d=Ot===u,c=i.sort,f=ce||r,v,h=this,p=!1;if(wn)return;function m(ie,te){ge(ie,h,Te({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:o,dragRect:a,targetRect:l,canSort:c,fromSortable:f,target:t,completed:y,onMove:function(Ve,Ce){return Ft(Q,n,g,a,Ve,oe(Ve),e,Ce)},changed:N},te))}function k(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function y(ie){return m("dragOverCompleted",{insertion:ie}),ie&&(d?r._hideClone():r._showClone(h),h!==f&&(ye(g,ce?ce.options.ghostClass:r.options.ghostClass,!1),ye(g,i.ghostClass,!0)),ce!==h&&h!==O.active?ce=h:h===O.active&&ce&&(ce=null),f===h&&(h._ignoreWhileAnimating=t),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===g&&!g.animated||t===n&&!t.animated)&&(at=null),!i.dragoverBubble&&!e.rootEl&&t!==document&&(g.parentNode[Se]._isOutsideThisEl(e.target),!ie&&Xe(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function N(){ke=xe(g),Ye=xe(g,i.draggable),he({sortable:h,name:"change",toEl:n,newIndex:ke,newDraggableIndex:Ye,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Ee(t,i.draggable,n,!0),m("dragOver"),O.eventCanceled)return p;if(g.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||h._ignoreWhileAnimating===t)return y(!1);if(Gt=!1,r&&!i.disabled&&(d?c||(o=ne!==Q):ce===this||(this.lastPutMode=Ot.checkPull(this,r,g,e))&&u.checkPut(this,r,g,e))){if(v=this._getDirection(e,t)==="vertical",a=oe(g),m("dragOverValid"),O.eventCanceled)return p;if(o)return ne=Q,k(),this._hideClone(),m("revert"),O.eventCanceled||(We?Q.insertBefore(g,We):Q.appendChild(g)),y(!0);var V=On(n,i.draggable);if(!V||mi(e,v,this)&&!V.animated){if(V===g)return y(!1);if(V&&n===e.target&&(t=V),t&&(l=oe(t)),Ft(Q,n,g,a,t,l,e,!!t)!==!1)return k(),V&&V.nextSibling?n.insertBefore(g,V.nextSibling):n.appendChild(g),ne=n,N(),y(!0)}else if(V&&vi(e,v,this)){var D=dt(n,0,i,!0);if(D===g)return y(!1);if(t=D,l=oe(t),Ft(Q,n,g,a,t,l,e,!1)!==!1)return k(),n.insertBefore(g,D),ne=n,N(),y(!0)}else if(t.parentNode===n){l=oe(t);var w=0,x,R=g.parentNode!==n,W=!si(g.animated&&g.toRect||a,t.animated&&t.toRect||l,v),b=v?"top":"left",I=Gn(t,"top","top")||Gn(g,"top","top"),T=I?I.scrollTop:void 0;at!==t&&(x=l[b],Ct=!1,Rt=!W&&i.invertSwap||R),w=hi(e,t,l,v,W?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,Rt,at===t);var H;if(w!==0){var M=xe(g);do M-=w,H=ne.children[M];while(H&&(E(H,"display")==="none"||H===Y))}if(w===0||H===t)return y(!1);at=t,Vt=w;var C=t.nextElementSibling,_=!1;_=w===1;var F=Ft(Q,n,g,a,t,l,e,_);if(F!==!1)return(F===1||F===-1)&&(_=F===1),wn=!0,setTimeout(fi,30),k(),_&&!C?n.appendChild(g):t.parentNode.insertBefore(g,_?C:t),I&&Ba(I,0,T-I.scrollTop),ne=g.parentNode,x!==void 0&&!Rt&&($t=Math.abs(x-oe(t)[b])),N(),y(!0)}if(n.contains(g))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){q(document,"mousemove",this._onTouchMove),q(document,"touchmove",this._onTouchMove),q(document,"pointermove",this._onTouchMove),q(document,"dragover",Xe),q(document,"mousemove",Xe),q(document,"touchmove",Xe)},_offUpEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._onDrop),q(e,"touchend",this._onDrop),q(e,"pointerup",this._onDrop),q(e,"touchcancel",this._onDrop),q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(ke=xe(g),Ye=xe(g,t.draggable),ge("drop",this,{evt:e}),ne=g&&g.parentNode,ke=xe(g),Ye=xe(g,t.draggable),O.eventCanceled){this._nulling();return}ot=!1,Rt=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sn(this.cloneId),Sn(this._dragStartId),this.nativeDraggable&&(q(document,"drop",this),q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),St&&E(document.body,"user-select",""),E(g,"transform",""),e&&(yt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(Q===ne||ce&&ce.lastPutMode!=="clone")&&ee&&ee.parentNode&&ee.parentNode.removeChild(ee),g&&(this.nativeDraggable&&q(g,"dragend",this),mn(g),g.style["will-change"]="",yt&&!ot&&ye(g,ce?ce.options.ghostClass:this.options.ghostClass,!1),ye(g,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),Q!==ne?(ke>=0&&(he({rootEl:ne,name:"add",toEl:ne,fromEl:Q,originalEvent:e}),he({sortable:this,name:"remove",toEl:ne,originalEvent:e}),he({rootEl:ne,name:"sort",toEl:ne,fromEl:Q,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),ce&&ce.save()):ke!==rt&&ke>=0&&(he({sortable:this,name:"update",toEl:ne,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),O.active&&((ke==null||ke===-1)&&(ke=rt,Ye=_t),he({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ge("nulling",this),Q=g=ne=Y=We=ee=Yt=$e=ze=De=yt=ke=Ye=rt=_t=at=Vt=ce=Ot=O.dragged=O.ghost=O.clone=O.active=null,Kt.forEach(function(e){e.checked=!0}),Kt.length=dn=fn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":g&&(this._onDragOver(e),di(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,l=t.length,o=this.options;a<l;a++)n=t[a],Ee(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||gi(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(l,o){var i=a.children[o];Ee(i,this.options.draggable,a,!1)&&(t[l]=i)},this),n&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(a.removeChild(t[l]),a.appendChild(t[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ee(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=At.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&La(t)},destroy:function(){ge("destroy",this);var e=this.el;e[Se]=null,q(e,"mousedown",this._onTapStart),q(e,"touchstart",this._onTapStart),q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(q(e,"dragover",this),q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jt.splice(Jt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(ge("hideClone",this),O.eventCanceled)return;E(ee,"display","none"),this.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(ge("showClone",this),O.eventCanceled)return;g.parentNode==Q&&!this.options.group.revertClone?Q.insertBefore(ee,g):We?Q.insertBefore(ee,We):Q.appendChild(ee),this.options.group.revertClone&&this.animate(g,ee),E(ee,"display",""),$e=!1}}};function di(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ft(e,n,t,a,l,o,i,u){var r,d=e[Se],c=d.options.onMove,f;return window.CustomEvent&&!Be&&!Tt?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=n,r.from=e,r.dragged=t,r.draggedRect=a,r.related=l||n,r.relatedRect=o||oe(n),r.willInsertAfter=u,r.originalEvent=i,e.dispatchEvent(r),c&&(f=c.call(d,r,i)),f}function mn(e){e.draggable=!1}function fi(){wn=!1}function vi(e,n,t){var a=oe(dt(t.el,0,t.options,!0)),l=Na(t.el),o=10;return n?e.clientX<l.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-o||e.clientY<a.bottom&&e.clientX<a.left}function mi(e,n,t){var a=oe(On(t.el,t.options.draggable)),l=Na(t.el),o=10;return n?e.clientX>l.right+o||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+o||e.clientX>a.right&&e.clientY>a.top}function hi(e,n,t,a,l,o,i,u){var r=a?e.clientY:e.clientX,d=a?t.height:t.width,c=a?t.top:t.left,f=a?t.bottom:t.right,v=!1;if(!i){if(u&&$t<d*l){if(!Ct&&(Vt===1?r>c+d*o/2:r<f-d*o/2)&&(Ct=!0),Ct)v=!0;else if(Vt===1?r<c+$t:r>f-$t)return-Vt}else if(r>c+d*(1-l)/2&&r<f-d*(1-l)/2)return pi(n)}return v=v||i,v&&(r<c+d*o/2||r>f-d*o/2)?r>c+d/2?1:-1:0}function pi(e){return xe(g)<xe(e)?1:-1}function gi(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,a=0;t--;)a+=n.charCodeAt(t);return a.toString(36)}function bi(e){Kt.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var a=n[t];a.checked&&Kt.push(a)}}function Ut(e){return setTimeout(e,0)}function Sn(e){return clearTimeout(e)}ln&&G(document,"touchmove",function(e){(O.active||ot)&&e.cancelable&&e.preventDefault()});O.utils={on:G,off:q,css:E,find:Ra,is:function(e,n){return!!Ee(e,n,e,!1)},extend:ei,throttle:Fa,closest:Ee,toggleClass:ye,clone:Ya,index:xe,nextTick:Ut,cancelNextTick:Sn,detectDirection:Ua,getChild:dt};O.get=function(e){return e[Se]};O.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(O.utils=Te(Te({},O.utils),a.utils)),At.mount(a)})};O.create=function(e,n){return new O(e,n)};O.version=Ko;var le=[],kt,xn,_n=!1,hn,pn,Qt,wt;function yi(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):t.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):(q(document,"pointermove",this._handleFallbackAutoScroll),q(document,"touchmove",this._handleFallbackAutoScroll),q(document,"mousemove",this._handleFallbackAutoScroll)),ea(),Lt(),ti()},nulling:function(){Qt=xn=kt=_n=wt=hn=pn=null,le.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,l=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(l,o);if(Qt=n,t||this.options.forceAutoScrollFallback||Tt||Be||St){gn(n,this.options,i,t);var u=Ue(i,!0);_n&&(!wt||l!==hn||o!==pn)&&(wt&&ea(),wt=setInterval(function(){var r=Ue(document.elementFromPoint(l,o),!0);r!==u&&(u=r,Lt()),gn(n,a.options,r,t)},10),hn=l,pn=o)}else{if(!this.options.bubbleScroll||Ue(i,!0)===Ie()){Lt();return}gn(n,this.options,Ue(i,!1),!1)}}},Fe(e,{pluginName:"scroll",initializeByDefault:!0})}function Lt(){le.forEach(function(e){clearInterval(e.pid)}),le=[]}function ea(){clearInterval(wt)}var gn=Fa(function(e,n,t,a){if(n.scroll){var l=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=n.scrollSensitivity,u=n.scrollSpeed,r=Ie(),d=!1,c;xn!==t&&(xn=t,Lt(),kt=n.scroll,c=n.scrollFn,kt===!0&&(kt=Ue(t,!0)));var f=0,v=kt;do{var h=v,p=oe(h),m=p.top,k=p.bottom,y=p.left,N=p.right,V=p.width,D=p.height,w=void 0,x=void 0,R=h.scrollWidth,W=h.scrollHeight,b=E(h),I=h.scrollLeft,T=h.scrollTop;h===r?(w=V<R&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),x=D<W&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(w=V<R&&(b.overflowX==="auto"||b.overflowX==="scroll"),x=D<W&&(b.overflowY==="auto"||b.overflowY==="scroll"));var H=w&&(Math.abs(N-l)<=i&&I+V<R)-(Math.abs(y-l)<=i&&!!I),M=x&&(Math.abs(k-o)<=i&&T+D<W)-(Math.abs(m-o)<=i&&!!T);if(!le[f])for(var C=0;C<=f;C++)le[C]||(le[C]={});(le[f].vx!=H||le[f].vy!=M||le[f].el!==h)&&(le[f].el=h,le[f].vx=H,le[f].vy=M,clearInterval(le[f].pid),(H!=0||M!=0)&&(d=!0,le[f].pid=setInterval(function(){a&&this.layer===0&&O.active._onTouchMove(Qt);var _=le[this.layer].vy?le[this.layer].vy*u:0,F=le[this.layer].vx?le[this.layer].vx*u:0;typeof c=="function"&&c.call(O.dragged.parentNode[Se],F,_,e,Qt,le[this.layer].el)!=="continue"||Ba(le[this.layer].el,F,_)}.bind({layer:f}),24))),f++}while(n.bubbleScroll&&v!==r&&(v=Ue(v,!1)));_n=d}},30),qa=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,l=e.activeSortable,o=e.dispatchSortableEvent,i=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var r=t||l;i();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);u(),r&&!r.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function Rn(){}Rn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=dt(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:qa};Fe(Rn,{pluginName:"revertOnSpill"});function Nn(){}Nn.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:qa};Fe(Nn,{pluginName:"removeOnSpill"});O.mount(new yi);O.mount(Nn,Rn);function ki(e){return e==null?e:JSON.parse(JSON.stringify(e))}function wi(e){In()&&xl(e)}function Si(e){In()?Et(e):Oe(e)}const ta=Symbol("cloneElement");function xi(...e){var n,t;const a=(n=In())==null?void 0:n.proxy,l=e[0];let[,o,i]=e;Array.isArray(B(o))||(i=o,o=null);let u=null;const{immediate:r=!0,clone:d=ki,customUpdate:c}=(t=B(i))!=null?t:{};function f(x){var R;x.item[ta]=d(B((R=B(o))==null?void 0:R[x.oldIndex]))}function v(x){const R=x.item[ta];Uo(R)||(sn(x.item),$o(B(o),x.newDraggableIndex,R))}function h(x){const{from:R,item:W,oldIndex:b,oldDraggableIndex:I,pullMode:T,clone:H}=x;if(T==="clone"){qn(R,W,b),sn(H);return}Yo(B(o),I)}function p(x){if(c){c(x);return}const{from:R,item:W,oldIndex:b,newIndex:I}=x;if(sn(W),qn(R,W,b),ma(o)){const T=[...B(o)];o.value=jn(T,b,I);return}jn(B(o),b,I)}const m={onUpdate:p,onStart:f,onAdd:v,onRemove:h};function k(x){const R=B(l);return x||(x=Lo(R)?Ho(R,a?.$el):R),x&&!zo(x)&&(x=x.$el),x||No("Root element not found"),x}function y(){var x;const R=(x=B(i))!=null?x:{},W=Ia(R,["immediate","clone"]);return qo(o===null?{}:m,W)}const N=x=>{x=k(x),u&&V.destroy(),u=new O(x,y())};se(()=>i,()=>{u&&Xo(y(),(x,R)=>{u?.option(x,R)})},{deep:!0});const V={option:(x,R)=>u?.option(x,R),destroy:()=>{u?.destroy(),u=null},save:()=>u?.save(),toArray:()=>u?.toArray(),closest:(...x)=>u?.closest(...x)},D=()=>V?.option("disabled",!0),w=()=>V?.option("disabled",!1);return Si(()=>{r&&N()}),wi(V.destroy),it({start:N,pause:D,resume:w},V)}const Vn=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],_i=["animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Vn.map(e=>`on${e.replace(/^\S/,n=>n.toUpperCase())}`)],Vi=kl({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:_i,emits:["update:modelValue",...Vn],setup(e,{slots:n,emit:t,expose:a,attrs:l}){const o=Vn.reduce((c,f)=>{const v=`on${f.replace(/^\S/,h=>h.toUpperCase())}`;return c[v]=h=>t(f,h),c},{}),i=A(()=>{const c=wl(e),f=Ia(c,["modelValue"]),v=Object.entries(f).reduce((h,[p,m])=>{const k=B(m);return k!==void 0&&(h[p]=k),h},{});return it(it({},o),Bo(it(it({},l),v)))}),u=A({get:()=>e.modelValue,set:c=>t("update:modelValue",c)}),r=$(),d=Qe(xi(e.target||r,u,i));return a(d),()=>{if(n.default)return Sl(e.tag||"div",{ref:r},n.default(d))}}}),Ci=["innerHTML"],Di={__name:"EditableProcedureTimeline",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=_l("markdownit"),t=En(),a=Vl(e,"modelValue");function l(r){return t.getDataObjectById(r.technique)===void 0?`(Label not found for technique ${r.technique})`:t.getDataObjectById(r.technique)?.label}const o=$();function i(r,d){a.value[d]=r,o.value=null}function u(r,d){a.value.splice(r,1),d.value=!1}return(r,d)=>(U(),Z(B(Vi),{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value=c),handle:".handle",animation:150,class:"list",ghostClass:"ghost"},{default:S(()=>[(U(!0),_e(de,null,jt(a.value,(c,f)=>(U(),_e("div",{key:f+c.tactic+c.technique+c.description,"dot-color":"blue",size:"medium",width:"100%",class:"mb-3 pl-8 item"},[f===o.value?(U(),Z(Da,{key:0,editProcedure:c,editIndex:o.value,onCancel:d[0]||(d[0]=v=>o.value=null),onUpdate:i},null,8,["editProcedure","editIndex"])):(U(),Z(He,{key:1,title:l(c),subtitle:B(t).getDataObjectById(c.tactic).name,variant:"outlined",style:{border:"solid 1px","border-color":"lightgray"}},{append:S(()=>[X("div",{style:ut({cursor:o.value||a.value.length===1?"not-allowed":"grab"})},[s(Ge,{style:ut({"pointer-events":o.value||a.value.length===1?"none":""}),class:"handle",color:o.value||a.value.length===1?"grey-lighten-1":"grey-darken-3"},{default:S(()=>[z(" mdi-arrow-up-down ")]),_:1},8,["style","color"])],4)]),default:S(()=>[c.description?(U(),Z(Dt,{key:0,innerHTML:B(n).render(c.description)},null,8,["innerHTML"])):we("",!0),s(Ze,null,{default:S(()=>[s(Ne),s(K,{icon:"mdi-pencil",color:"blue",onClick:v=>o.value=f},null,8,["onClick"]),s(nn,{width:"500"},{activator:S(({props:v})=>[s(K,L(v,{icon:"mdi-delete",color:"red"}),null,16)]),default:S(({isActive:v})=>[s(He,null,{default:S(()=>[s(qt,{class:"text-wrap"},{default:S(()=>[z(Me(`Delete "${l(c)}"?`),1)]),_:2},1024),s(Dt,null,{default:S(()=>[X("div",{innerHTML:c.description},null,8,Ci)]),_:2},1024),s(Ze,null,{default:S(()=>[s(Ne),s(K,{text:"Cancel",onClick:h=>v.value=!1},null,8,["onClick"]),s(K,{text:"Delete",color:"red",onClick:h=>u(f,v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle"]))]))),128))]),_:1},8,["modelValue"]))}},Pi=ha(Di,[["__scopeId","data-v-3535407d"]]),za={__name:"AddSource",props:["sources","editSource","editIndex"],emits:["submit","cancel","update"],setup(e,{emit:n}){const t=n,{sources:a,editSource:l,editIndex:o}=e,i=$(!1),u=Qe({title:"",url:""});Et(()=>{l&&(u.title=l.title,u.url=l.url)});const r=[v=>{if(!v)return!0;if(!v.startsWith("http://")&&!v.startsWith("https://"))return"URL does not start with http(s)://";if(/\s/.test(v.trim()))return"URL should not contain spaces";try{return new URL(v),!0}catch{return"URL is not valid"}}],d=$(!1);function c(){!u.title&&!u.url?d.value=!0:i.value&&l?t("update",u,o):i.value&&t("submit",u)}function f(){return l?o+1:a.length+1}return(v,h)=>(U(),Z(an,{onSubmit:h[4]||(h[4]=en(()=>{},["prevent"])),modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=p=>i.value=p)},{default:S(()=>[s(He,{variant:"outlined",title:`Source ${f()}`},{default:S(()=>[s(Je,{modelValue:u.title,"onUpdate:modelValue":h[0]||(h[0]=p=>u.title=p),label:"Description",variant:"outlined",hint:"Brief description (optional)","prepend-inner-icon":"mdi-file-edit-outline",class:"pt-6 px-6 pb-3"},null,8,["modelValue"]),s(Je,{modelValue:u.url,"onUpdate:modelValue":h[1]||(h[1]=p=>u.url=p),modelModifiers:{trim:!0},label:"URL",variant:"outlined",hint:"Link (optional)","prepend-inner-icon":"mdi-link",class:"px-6",rules:r},null,8,["modelValue"]),s(Ze,null,{default:S(()=>[s(Ne),s(K,{onClick:h[2]||(h[2]=p=>v.$emit("cancel"))},{default:S(()=>[z("Cancel")]),_:1}),s(K,{type:"submit",color:"green",onClick:h[3]||(h[3]=p=>c())},{default:S(()=>[z(" Save ")]),_:1})]),_:1}),d.value?(U(),Z(zt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:S(()=>[z(" Please complete at least one field ")]),_:1})):we("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"]))}},Ei={key:0},Ii={key:1},Ti=["href"],Ai={__name:"SourceList",props:["sources"],emits:["updateSource","delete"],setup(e,{emit:n}){const t=n,a=$();function l(i,u){t("updateSource",i,u),a.value=null}function o(i,u){t("delete",i),a.value>i&&a.value--,u.value=!1}return(i,u)=>(U(),Z(ga,null,{default:S(()=>[(U(!0),_e(de,null,jt(e.sources,(r,d)=>(U(),_e("div",{key:d},[d===a.value?(U(),Z(za,{key:0,editSource:r,editIndex:a.value,onCancel:u[0]||(u[0]=c=>a.value=null),onUpdate:l},null,8,["editSource","editIndex"])):(U(),Z(Ht,{key:1,value:d},{append:S(()=>[s(Ge,{icon:"mdi-pencil",color:"blue",class:"mr-5",onClick:c=>a.value=d},null,8,["onClick"]),s(nn,{width:"500"},{activator:S(({props:c})=>[s(Ge,L(c,{icon:"mdi-delete",color:"red"}),null,16)]),default:S(({isActive:c})=>[s(He,null,{default:S(()=>[s(qt,{class:"text-wrap"},{default:S(()=>[z(" Delete "+Me(r.title||r.url)+"? ",1)]),_:2},1024),s(Ze,null,{default:S(()=>[s(Ne),s(K,{text:"Cancel",onClick:f=>c.value=!1},null,8,["onClick"]),s(K,{text:"Delete",color:"red",onClick:f=>o(d,c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:S(()=>[z(Me(d+1)+". ",1),r.url?(U(),_e("span",Ii,[X("a",{href:r.url,target:"_blank"},Me(r.title||r.url),9,Ti),s(Ge,{icon:"mdi-open-in-new",size:"x-small",class:"ml-1"})])):(U(),_e("span",Ei,Me(r.title),1))]),_:2},1032,["value"]))]))),128))]),_:1}))}},Xa=ue({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),na=fe()({name:"VDatePickerControls",props:Xa(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:t}=n;const a=A(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=A(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=A(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=A(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){t("click:prev")}function r(){t("click:next")}function d(){t("click:year")}function c(){t("click:month")}return pe(()=>s("div",{class:["v-date-picker-controls"]},[s(K,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:c},null),s(K,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),s(Ne,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(K,{disabled:o.value,icon:e.prevIcon,variant:"text",onClick:u},null),s(K,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),Mi=ue({appendIcon:String,color:String,header:String,transition:String,onClick:Dl()},"VDatePickerHeader"),aa=fe()({name:"VDatePickerHeader",props:Mi(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:t,slots:a}=n;const{backgroundColorClasses:l,backgroundColorStyles:o}=Tn(e,"color");function i(){t("click")}function u(){t("click:append")}return pe(()=>{const r=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value],style:o.value,onClick:i},[a.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),r&&s(Cl,{key:"content",name:e.transition},{default:()=>[s("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),d&&s("div",{class:"v-date-picker-header__append"},[a.append?s(ft,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):s(K,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Oi=ue({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function Ri(e){const n=It(),t=me(e,"modelValue",[],v=>st(v)),a=A(()=>e.displayValue?n.date(e.displayValue):t.value.length>0?n.date(t.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),l=me(e,"year",void 0,v=>{const h=v!=null?Number(v):n.getYear(a.value);return n.startOfYear(n.setYear(n.date(),h))},v=>n.getYear(v)),o=me(e,"month",void 0,v=>{const h=v!=null?Number(v):n.getMonth(a.value),p=n.setYear(n.startOfMonth(n.date()),n.getYear(l.value));return n.setMonth(p,h)},v=>n.getMonth(v)),i=A(()=>{const v=n.getWeekArray(o.value),h=v.flat(),p=6*7;if(h.length<p){const m=h[h.length-1];let k=[];for(let y=1;y<=p-h.length;y++)k.push(n.addDays(m,y)),y%7===0&&(v.push(k),k=[])}return v});function u(v,h){return v.filter(p=>e.weekdays.includes(n.toJsDate(p).getDay())).map((p,m)=>{const k=n.toISO(p),y=!n.isSameMonth(p,o.value),N=n.isSameDay(p,n.startOfMonth(o.value)),V=n.isSameDay(p,n.endOfMonth(o.value)),D=n.isSameDay(p,o.value);return{date:p,isoDate:k,formatted:n.format(p,"keyboardDate"),year:n.getYear(p),month:n.getMonth(p),isDisabled:f(p),isWeekStart:m%7===0,isWeekEnd:m%7===6,isToday:n.isSameDay(p,h),isAdjacent:y,isHidden:y&&!e.showAdjacentMonths,isStart:N,isSelected:t.value.some(w=>n.isSameDay(p,w)),isEnd:V,isSame:D,localized:n.format(p,"dayOfMonth")}})}const r=A(()=>{const v=n.startOfWeek(t.value),h=[];for(let k=0;k<=6;k++)h.push(n.addDays(v,k));const p=h,m=n.date();return u(p,m)}),d=A(()=>{const v=i.value.flat(),h=n.date();return u(v,h)}),c=A(()=>i.value.map(v=>v.length?Pl(n,v[0]):null));function f(v){if(e.disabled)return!0;const h=n.date(v);return e.min&&n.isAfter(n.date(e.min),h)||e.max&&n.isAfter(h,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(p=>n.isSameDay(n.date(p),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:d,daysInWeek:r,genDays:u,model:t,weeksInMonth:i,weekNumbers:c}}const Wa=ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Oi()},"VDatePickerMonth"),la=fe()({name:"VDatePickerMonth",props:Wa(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=$(),{daysInMonth:o,model:i,weekNumbers:u}=Ri(e),r=It(),d=Ae(),c=Ae(),f=A(()=>{const m=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=m});function v(m){const k=r.startOfDay(m);if(!d.value)d.value=k,i.value=[d.value];else if(c.value)d.value=m,c.value=void 0,i.value=[d.value];else{if(r.isSameDay(m,d.value)){d.value=void 0,i.value=[];return}else r.isBefore(m,d.value)?(c.value=d.value,d.value=k):c.value=k;const y=r.getDiff(c.value,d.value,"days"),N=[d.value];for(let V=1;V<y;V++){const D=r.addDays(d.value,V);N.push(D)}N.push(c.value),i.value=N}}function h(m){const k=i.value.findIndex(y=>r.isSameDay(y,m));if(k===-1)i.value=[...i.value,m];else{const y=[...i.value];y.splice(k,1),i.value=y}}function p(m){e.multiple==="range"?v(m):e.multiple?h(m):i.value=[m]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[z(" ")]),u.value.map(m=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[m]))]),s("div",{ref:l,class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays().map(m=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[m])),o.value.map((m,k)=>{const y={props:{onClick:()=>p(m.date)},item:m,i:k};return f.value&&!m.isSelected&&(m.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":m.isAdjacent,"v-date-picker-month__day--hide-adjacent":m.isHidden,"v-date-picker-month__day--selected":m.isSelected,"v-date-picker-month__day--week-end":m.isWeekEnd,"v-date-picker-month__day--week-start":m.isWeekStart}],"data-v-date":m.isDisabled?void 0:m.isoDate},[(e.showAdjacentMonths||!m.isAdjacent)&&s(ft,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(m.isSelected||m.isToday)&&!m.isDisabled?e.color:void 0,disabled:m.isDisabled,icon:!0,ripple:!1,text:m.localized,variant:m.isDisabled?m.isToday?"outlined":"text":m.isToday&&!m.isSelected?"outlined":"flat",onClick:()=>p(m.date)}}},{default:()=>[a.day?.(y)??s(K,y.props,null)]})])})])])}}),Ga=ue({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),oa=fe()({name:"VDatePickerMonths",props:Ga(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=It(),o=me(e,"modelValue"),i=A(()=>{let u=l.startOfYear(l.date());return ba(12).map(r=>{const d=l.format(u,"monthShort");return u=l.getNextMonth(u),{text:d,value:r}})});return Dn(()=>{o.value=o.value??l.getMonth(l.date())}),pe(()=>s("div",{class:"v-date-picker-months",style:{height:Pn(e.height)}},[s("div",{class:"v-date-picker-months__content"},[i.value.map((u,r)=>{const d={active:o.value===r,color:o.value===r?e.color:void 0,rounded:!0,text:u.text,variant:o.value===u.value?"flat":"text",onClick:()=>c(r)};function c(f){if(o.value===f){t("update:modelValue",o.value);return}o.value=f}return a.month?.({month:u,i:r,props:d})??s(K,L({key:"month"},d),null)})])])),{}}}),Ja=ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ia=fe()({name:"VDatePickerYears",props:Ja(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=It(),o=me(e,"modelValue"),i=A(()=>{const r=l.getYear(l.date());let d=r-100,c=r+52;e.min&&(d=l.getYear(l.date(e.min))),e.max&&(c=l.getYear(l.date(e.max)));let f=l.startOfYear(l.date());return f=l.setYear(f,d),ba(c-d+1,d).map(v=>{const h=l.format(f,"year");return f=l.setYear(f,l.getYear(f)+1),{text:h,value:v}})});Dn(()=>{o.value=o.value??l.getYear(l.date())});const u=$();return Et(async()=>{await Oe(),u.value?.$el.scrollIntoView({block:"center"})}),pe(()=>s("div",{class:"v-date-picker-years",style:{height:Pn(e.height)}},[s("div",{class:"v-date-picker-years__content"},[i.value.map((r,d)=>{const c={ref:o.value===r.value?u:void 0,active:o.value===r.value,color:o.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:o.value===r.value?"flat":"text",onClick:()=>{if(o.value===r.value){t("update:modelValue",o.value);return}o.value=r.value}};return a.year?.({year:r,i:d,props:c})??s(K,L({key:"month"},c),null)})])])),{}}}),Ni=El("v-picker-title"),Ka=ue({color:String,...Il(),...va(),...Tl(),...Al(),...Ml(),...Ol(),...Rl(),...Nl(),...Fl()},"VSheet"),ra=fe()({name:"VSheet",props:Ka(),setup(e,n){let{slots:t}=n;const{themeClasses:a}=Bl(e),{backgroundColorClasses:l,backgroundColorStyles:o}=Tn(ya(e,"color")),{borderClasses:i}=Yl(e),{dimensionStyles:u}=$l(e),{elevationClasses:r}=Ul(e),{locationStyles:d}=Ll(e),{positionClasses:c}=Hl(e),{roundedClasses:f}=jl(e);return pe(()=>s(e.tag,{class:["v-sheet",a.value,l.value,i.value,r.value,c.value,f.value,e.class],style:[o.value,u.value,d.value,e.style]},t)),{}}}),Qa=ue({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Ka()},"VPicker"),sa=fe()({name:"VPicker",props:Qa(),setup(e,n){let{slots:t}=n;const{backgroundColorClasses:a,backgroundColorStyles:l}=Tn(ya(e,"color"));return pe(()=>{const o=ra.filterProps(e),i=!!(e.title||t.title);return s(ra,L(o,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&s("div",{key:"header",class:[a.value],style:[l.value]},[i&&s(Ni,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&s("div",{class:"v-picker__header"},[t.header()])]),s("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&s(ft,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),Fi=ue({header:{type:String,default:"$vuetify.datePicker.header"},...Xa(),...Wa(),...Ke(Ga(),["modelValue"]),...Ke(Ja(),["modelValue"]),...Qa({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Bi=fe()({name:"VDatePicker",props:Fi(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=It(),{t:o}=Cn(),i=me(e,"modelValue",void 0,b=>st(b),b=>e.multiple?b:b[0]),u=me(e,"viewMode"),r=A(()=>{const b=l.date(i.value?.[0]);return b&&l.isValid(b)?b:l.date()}),d=$(Number(e.month??l.getMonth(l.startOfMonth(r.value)))),c=$(Number(e.year??l.getYear(l.startOfYear(l.setMonth(r.value,d.value))))),f=Ae(!1),v=A(()=>e.multiple&&i.value.length>1?o("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&l.isValid(i.value[0])?l.format(i.value[0],"normalDateWithWeekday"):o(e.header)),h=A(()=>l.format(l.date(new Date(c.value,d.value,1)),"monthAndYear")),p=A(()=>`date-picker-header${f.value?"-reverse":""}-transition`),m=A(()=>{const b=l.date(e.min);return e.min&&l.isValid(b)?b:null}),k=A(()=>{const b=l.date(e.max);return e.max&&l.isValid(b)?b:null}),y=A(()=>{if(e.disabled)return!0;const b=[];if(u.value!=="month")b.push("prev","next");else{let I=l.date();if(I=l.setYear(I,c.value),I=l.setMonth(I,d.value),m.value){const T=l.addDays(l.startOfMonth(I),-1);l.isAfter(m.value,T)&&b.push("prev")}if(k.value){const T=l.addDays(l.endOfMonth(I),1);l.isAfter(T,k.value)&&b.push("next")}}return b});function N(){d.value<11?d.value++:(c.value++,d.value=0,W(c.value)),R(d.value)}function V(){d.value>0?d.value--:(c.value--,d.value=11,W(c.value)),R(d.value)}function D(){u.value="month"}function w(){u.value=u.value==="months"?"month":"months"}function x(){u.value=u.value==="year"?"month":"year"}function R(b){u.value==="months"&&w(),t("update:month",b)}function W(b){u.value==="year"&&x(),t("update:year",b)}return se(i,(b,I)=>{const T=l.date(st(b)[0]),H=l.date(st(I)[0]);f.value=l.isBefore(T,H)}),pe(()=>{const b=sa.filterProps(e),I=na.filterProps(e),T=aa.filterProps(e),H=la.filterProps(e),M=Ke(oa.filterProps(e),["modelValue"]),C=Ke(ia.filterProps(e),["modelValue"]),_={header:v.value,transition:p.value};return s(sa,L(b,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>a.title?.()??s("div",{class:"v-date-picker__title"},[o(e.title)]),header:()=>a.header?s(ft,{defaults:{VDatePickerHeader:{..._}}},{default:()=>[a.header?.(_)]}):s(aa,L({key:"header"},T,_,{onClick:u.value!=="month"?D:void 0}),{...a,default:void 0}),default:()=>s(de,null,[s(na,L(I,{disabled:y.value,text:h.value,"onClick:next":N,"onClick:prev":V,"onClick:month":w,"onClick:year":x}),null),s(ka,{hideOnLeave:!0},{default:()=>[u.value==="months"?s(oa,L({key:"date-picker-months"},M,{modelValue:d.value,"onUpdate:modelValue":[F=>d.value=F,R],min:m.value,max:k.value}),null):u.value==="year"?s(ia,L({key:"date-picker-years"},C,{modelValue:c.value,"onUpdate:modelValue":[F=>c.value=F,W],min:m.value,max:k.value}),null):s(la,L({key:"date-picker-month"},H,{modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,month:d.value,"onUpdate:month":[F=>d.value=F,R],year:c.value,"onUpdate:year":[F=>c.value=F,W],min:m.value,max:k.value}),null)]})]),actions:a.actions})}),{}}}),Yi=ue({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...ql()},"VHover"),ua=fe()({name:"VHover",props:Yi(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{runOpenDelay:l,runCloseDelay:o}=zl(e,i=>!e.disabled&&(a.value=i));return()=>t.default?.({isHovering:a.value,props:{onMouseenter:l,onMouseleave:o}})}}),$i=ue({...ro({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ui=fe()({name:"VRadio",props:$i(),setup(e,n){let{slots:t}=n;return pe(()=>s(Va,L(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),Li=ue({height:{type:[Number,String],default:"auto"},...tn(),...Ke(so(),["multiple"]),trueIcon:{type:Un,default:"$radioOn"},falseIcon:{type:Un,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Hi=fe()({name:"VRadioGroup",inheritAttrs:!1,props:Li(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=ca(),o=A(()=>e.id||`radio-group-${l}`),i=me(e,"modelValue");return pe(()=>{const[u,r]=Zt(t),d=Le.filterProps(e),c=Va.filterProps(e),f=a.label?a.label({label:e.label,props:{for:o.value}}):e.label;return s(Le,L({class:["v-radio-group",e.class],style:e.style},u,d,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:o.value}),{...a,default:v=>{let{id:h,messagesId:p,isDisabled:m,isReadonly:k}=v;return s(de,null,[f&&s(uo,{id:h.value},{default:()=>[f]}),s(co,L(c,{id:h.value,"aria-describedby":p.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:m.value,readonly:k.value,"aria-labelledby":f?h.value:void 0,multiple:!1},r,{modelValue:i.value,"onUpdate:modelValue":y=>i.value=y}),a)])}})}),{}}}),ji=X("p",{class:"text-h6 mb-0 mt-6"},"Details",-1),qi=X("p",{class:"text-body-2 text-grey"},"All fields are required.",-1),zi={key:0},Xi={class:"d-flex"},Wi={key:0,class:"ml-6 text-caption pt-1"},Gi=X("p",{class:"text-h6 mb-0 mt-6"},"Procedure",-1),Ji={class:"text-body-2 text-grey"},Ki=X("p",{class:"text-h6 mb-0 mt-12"},"References",-1),Qi=X("p",{class:"text-body-2 text-grey mb-0"},"Optionally list sources for this case study.",-1),Zi=X("p",{class:"text-h6 mb-0 mt-12"},"Download",-1),er=X("p",{class:"text-body-2 text-grey"},[z(" Download the case study data file, specifying the filename here. Once downloaded, email the file to "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),z(". ")],-1),tr=X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org",-1),nr="Create a Case Study",cr={__name:"BuildCaseStudyView",setup(e){const n=En(),t=$([]);a();async function a(){try{const C=await(await fetch(Xl("/content/case-study-legend.yaml"))).text(),_=Wl.load(C).legend;["case_study_type","name","target","actor","reporter","incident_date","summary"].forEach(ie=>{t.value.push(_[ie])})}catch(M){console.error("Error fetching YAML file:",M)}}const l=$();let o=Qe({procedure:[],references:[]});const i=["name","target","actor","reporter","incident_date"],u=$(""),r=A(()=>!!(o["case-study-type"]||o["case-study-type"]===void 0&&!v.value)),d=$(),c=$(!1),f=A(()=>d.value?d.value.toISOString().split("T")[0]:"");se(f,()=>{o["incident-date"]=new Date(d.value)}),se(d,()=>{o["incident-date-granularity"]="DATE"}),se(()=>o["case-study-type"],()=>{v.value&&x.value.validate()});const v=$(!1);function h(M){return typeof M=="string"&&M.trim()?!0:"Required"}function p(M){o.procedure.push(M),m.value=!0}const m=$(!1),k=$(null),y=$(!1);function N(M){o.references.push(M),y.value=!1}function V(M){o.references.splice(M,1)}function D(M,C){o.references[C]=M}const w=$(!1),x=$(null),R=$(!1);let W,b=Qe({});function I(){if(v.value=!0,o.procedure.length===0&&k.value.addProcedureStep(),l.value&&o.procedure.length>0){let M={study:o,meta:b};o["case-study-type"]==="exercise"&&o.reporter!==void 0&&delete M.study.reporter,M.meta=Gl(M,bn.$version),Jl(M,u.value),w.value&&T(o),R.value=!0,clearTimeout(W),W=setTimeout(()=>{R.value=!1},"3000")}}async function T(M){for(const C of M.procedure){let _=await n.getDataObjectById(C.technique);_===void 0&&(_={label:`Technique not found (${C.technique})`}),C.techniqueObject=_}fo(M),M.procedure.forEach(C=>{delete C.techniqueObject})}function H(M,C){m.value=!0,u.value=C,Object.keys(M.study).forEach(_=>{_==="incident-date"?d.value=new Date(M.study["incident-date"]):o[_]=M.study[_]}),b=M.meta}return(M,C)=>(U(),_e(de,null,[s(lt,{class:"align-start"},{default:S(()=>[s(vo,{pageTitle:nr}),s(Mn,{class:"ml-2 mt-3"},{default:S(()=>[z(Me(`v${B(bn).$version}`),1)]),_:1})]),_:1}),s(lt,null,{default:S(()=>[s(wo,{onSubmit:H}),s(Ne),s(Io)]),_:1}),ji,qi,s(an,{onSubmit:C[12]||(C[12]=en(()=>{},["prevent"])),modelValue:l.value,"onUpdate:modelValue":C[13]||(C[13]=_=>l.value=_),ref_key:"mainForm",ref:x},{default:S(()=>[(U(!0),_e(de,null,jt(t.value,_=>(U(),_e("div",{key:_.name},[_.name==="Case Study Type"?(U(),_e("div",zi,[s(ua,null,{default:S(({isHovering:F,props:ie})=>[s(He,L(ie,{variant:"outlined",class:"mb-0",subtitle:"Select case study type",height:"120",style:[F&&r.value?{"border-color":"#424242"}:{"border-color":"#9E9E9E"},r.value?{}:{"border-color":"#b00020"}]}),{default:S(()=>[s(Hi,{modelValue:B(o)["case-study-type"],"onUpdate:modelValue":C[0]||(C[0]=te=>B(o)["case-study-type"]=te),"prepend-icon":_.icon,density:"compact",class:"pl-4 pt-3",rules:[h],"hide-details":!0},{default:S(()=>[(U(!0),_e(de,null,jt(_.options,te=>(U(),Z(lt,{key:te.name},{default:S(()=>[s(ua,null,{default:S(({isHovering:Ve,props:Ce})=>[X("div",Xi,[s(Ui,L(Ce,{label:te.name,value:te.name.toLowerCase()}),null,16,["label","value"]),Ve?(U(),_e("div",Wi,[s(Ge,null,{default:S(()=>[z("mdi-menu-right")]),_:1}),z(" "+Me(te.description),1)])):we("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon","rules"])]),_:2},1040,["style"])]),_:2},1024),X("div",{style:ut({visibility:r.value?"hidden":"visible",color:"#c13951"}),class:"ml-4 mt-1 mb-3 text-caption font-weight-medium"}," Required ",4)])):we("",!0),i.includes(_.name.toLowerCase())?(U(),Z(Je,{key:1,modelValue:B(o)[_.name.toLowerCase()],"onUpdate:modelValue":F=>B(o)[_.name.toLowerCase()]=F,variant:"outlined",label:_.name,"prepend-inner-icon":_.icon,hint:_.description,rules:_.name==="Reporter"&&B(o)["case-study-type"]!=="incident"?[]:[h],disabled:_.name==="Reporter"&&B(o)["case-study-type"]!=="incident",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules","disabled"])):we("",!0),_.name==="Summary"?(U(),Z(Ca,{key:2,modelValue:B(o)[_.name.toLowerCase()],"onUpdate:modelValue":F=>B(o)[_.name.toLowerCase()]=F,variant:"outlined",label:_.name,"prepend-inner-icon":_.icon,hint:_.description,rules:[h]},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules"])):we("",!0),_.name==="Incident Date"?(U(),Z(pa,{key:3,"close-on-content-click":!1,modelValue:c.value,"onUpdate:modelValue":C[4]||(C[4]=F=>c.value=F)},{activator:S(({props:F})=>[s(Je,L(F,{modelValue:f.value,"onUpdate:modelValue":C[1]||(C[1]=ie=>f.value=ie),variant:"outlined",label:_.name,"prepend-inner-icon":_.icon,hint:_.description,class:"mb-3",readonly:"",rules:[h]}),null,16,["modelValue","label","prepend-inner-icon","hint","rules"])]),default:S(()=>[s(Bi,{modelValue:d.value,"onUpdate:modelValue":[C[2]||(C[2]=F=>d.value=F),C[3]||(C[3]=F=>c.value=!1)],max:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10)},null,8,["modelValue","max"])]),_:2},1032,["modelValue"])):we("",!0)]))),128)),Gi,X("p",Ji,[z(" Construct a timeline of the incident, mapped to MITRE ATLAS™ techniques. "),X("span",{style:ut(B(o).procedure.length===0&&v.value?"color: #FF5252":"")},"Add at least one step. ",4)]),B(o).procedure.length>0?(U(),Z(Pi,{key:0,modelValue:B(o).procedure,"onUpdate:modelValue":C[5]||(C[5]=_=>B(o).procedure=_)},null,8,["modelValue"])):we("",!0),m.value?we("",!0):(U(),Z(Da,{key:1,ref_key:"procedureForm",ref:k,onSubmitProcedureStep:p,onUpdateShowAddNewStep:C[6]||(C[6]=_=>m.value=!0),existingProcedures:B(o).procedure},null,8,["existingProcedures"])),X("div",{style:ut({visibility:B(o).procedure.length===0&&v.value&&!m.value?"visible":"hidden",color:"#c13951"}),class:"ml-4 mb-3 text-caption font-weight-medium"}," At least one procedure step is required. ",4),m.value?(U(),Z(K,{key:2,"prepend-icon":"mdi-plus",onClick:C[7]||(C[7]=_=>m.value=!1)},{default:S(()=>[z(" Add New Step ")]),_:1})):we("",!0),Ki,Qi,s(Ai,{sources:B(o).references,onDelete:V,onUpdateSource:D},null,8,["sources"]),y.value?(U(),Z(za,{key:3,sources:B(o).references,onCancel:C[8]||(C[8]=_=>y.value=!1),onSubmit:N},null,8,["sources"])):(U(),Z(K,{key:4,"prepend-icon":"mdi-plus",onClick:C[9]||(C[9]=_=>y.value=!0)},{default:S(()=>[z(" Add New Source ")]),_:1})),Zi,er,s(lt,null,{default:S(()=>[s(yn,null,{default:S(()=>[s(Je,{modelValue:u.value,"onUpdate:modelValue":C[10]||(C[10]=_=>u.value=_),variant:"outlined",label:"Case Study Filename","prepend-inner-icon":"mdi-file-download",hint:"Filename of the case study. The .yaml extension will be auto-applied.",rules:[h],class:"mb-3",clearable:""},null,8,["modelValue","rules"])]),_:1}),s(ho,{label:"Also download as PowerPoint",modelValue:w.value,"onUpdate:modelValue":C[11]||(C[11]=_=>w.value=_),class:"ml-6"},null,8,["modelValue"])]),_:1}),s(lt,{class:"align-center"},{default:S(()=>[s(K,{type:"submit",color:"blue","prepend-icon":"mdi-download",onClick:I},{default:S(()=>[z(" Download Case Study ")]),_:1}),v.value&&(l.value===!1||B(o).procedure.length===0)?(U(),Z(zt,{key:0,icon:"mdi-alert",color:"red-lighten-4",density:"compact",class:"ml-6"},{default:S(()=>[z(" Please address any errors above. ")]),_:1})):we("",!0),s(ka,{class:"pb-0"},{default:S(()=>[R.value?(U(),Z(zt,{key:0,icon:"mdi-check-circle-outline",color:"green-lighten-5",density:"compact",class:"ml-6 text-green"},{default:S(()=>[z(" Your case study has been downloaded! Email your yaml file to "),tr]),_:1})):we("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{cr as default};
