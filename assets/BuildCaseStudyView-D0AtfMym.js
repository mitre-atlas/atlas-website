import{N as ue,b9 as Qe,S as ce,aB as fe,ba as fa,c as T,Y as pe,bb as Zt,b as s,I as L,bc as ml,bd as hl,be as pl,y as Y,bf as va,aL as se,aI as Oe,bg as Yn,b6 as He,bh as Pt,bi as gl,aS as ut,aC as en,bj as Ln,F as ve,bk as ma,O as Pn,D as Ze,o as U,a as Z,w,f as K,aY as tn,g as q,t as Me,m as B,bl as bn,au as Ne,bm as ha,e as X,bn as yl,bo as bl,bp as kl,bq as wl,_ as pa,p as Sl,i as _l,br as ga,a3 as kn,ay as xl,b7 as ya,a7 as ba,bs as ka,bt as wa,a9 as Sa,Q as _a,R as xa,aA as Vl,U as Va,bu as Cl,a_ as Dl,b8 as Ca,ab as Da,bv as Pa,bw as Ia,ac as Ea,bx as Ta,X as In,by as Pl,L as Ue,bz as Il,aE as Ae,bA as El,b1 as Aa,G as Ma,E as Ht,bB as Tl,bC as Al,bD as Ml,bE as Un,bF as Ol,aJ as En,bG as It,bH as Rl,a0 as Hn,a6 as Nl,bI as Fl,aO as Tn,aM as Bl,q as An,k as ct,V as ot,d as wn,x as we,al as $l,bJ as Yl,bK as Ll,bL as Mn,bM as Ul,C as Hl,bN as jl,l as xe,r as jt,a5 as On,bO as zl,aZ as ql,bP as Et,bQ as Xl,aG as Oa,ax as Wl,bR as Gl,bS as Ra,bT as Jl,bU as Kl,z as Ql,A as Zl,bV as eo,b2 as to}from"./index-C1sC5M5c.js";import{c as nn,d as no,e as Rn,f as je,b as Sn,g as Na,h as Fa,i as Ba,j as $a,k as ao,l as lo,m as oo,n as io,o as ro,p as so,u as uo,q as co,a as Ke,r as fo,s as vo,t as Ya,v as mo,w as ho,x as po}from"./filter-BUbwDi4z.js";import{V as ze,b as Dt,c as et,a as zt}from"./VCard-Bm-IPP_r.js";import{V as Nn}from"./VChip-CII92waj.js";import{m as go}from"./powerpointFunctions-Coag628a.js";import{_ as yo}from"./PageSectionTitle.vue_vue_type_script_setup_true_lang-DOfblOoM.js";const bo=ue({...nn(),...Qe(no(),["inline"])},"VCheckbox"),ko=ce()({name:"VCheckbox",inheritAttrs:!1,props:bo(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=fe(e,"modelValue"),{isFocused:o,focus:i,blur:u}=Rn(e),r=fa(),d=T(()=>e.id||`checkbox-${r}`);return pe(()=>{const[c,f]=Zt(t),v=je.filterProps(e),h=Sn.filterProps(e);return s(je,L({class:["v-checkbox",e.class]},c,v,{modelValue:l.value,"onUpdate:modelValue":g=>l.value=g,id:d.value,focused:o.value,style:e.style}),{...a,default:g=>{let{id:m,messagesId:b,isDisabled:p,isReadonly:P,isValid:D}=g;return s(Sn,L(h,{id:m.value,"aria-describedby":b.value,disabled:p.value,readonly:P.value},f,{error:D.value===!1,modelValue:l.value,"onUpdate:modelValue":x=>l.value=x,onFocus:i,onBlur:u}),a)}})}),{}}}),wo=ue({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ml({origin:"center center",scrollStrategy:"block",transition:{component:hl},zIndex:2400})},"VDialog"),an=ce()({name:"VDialog",props:wo(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=fe(e,"modelValue"),{scopeId:l}=pl(),o=Y();function i(r){const d=r.relatedTarget,c=r.target;if(d!==c&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(c)&&!o.value.contentEl.contains(c)){const f=gl(o.value.contentEl);if(!f.length)return;const v=f[0],h=f[f.length-1];d===v?h.focus():v.focus()}}va&&se(()=>a.value&&e.retainFocus,r=>{r?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0}),se(a,async r=>{await Oe(),r?o.value.contentEl?.focus({preventScroll:!0}):o.value.activatorEl?.focus({preventScroll:!0})});const u=T(()=>L({"aria-haspopup":"dialog","aria-expanded":String(a.value)},e.activatorProps));return pe(()=>{const r=Yn.filterProps(e);return s(Yn,L({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},r,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,"aria-modal":"true",activatorProps:u.value,role:"dialog"},l),{activator:t.activator,default:function(){for(var d=arguments.length,c=new Array(d),f=0;f<d;f++)c[f]=arguments[f];return s(He,{root:"VDialog"},{default:()=>[t.default?.(...c)]})}})}),Pt({},o)}}),So=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...nn({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ut(e).every(n=>n!=null&&typeof n=="object")},...Na({clearable:!0})},"VFileInput"),_o=ce()({name:"VFileInput",inheritAttrs:!1,props:So(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const{t:o}=en(),i=fe(e,"modelValue"),{isFocused:u,focus:r,blur:d}=Rn(e),c=T(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=T(()=>(i.value??[]).reduce((k,A)=>{let{size:M=0}=A;return k+M},0)),v=T(()=>Ln(f.value,c.value)),h=T(()=>(i.value??[]).map(k=>{const{name:A="",size:M=0}=k;return e.showSize?`${A} (${Ln(M,c.value)})`:A})),g=T(()=>{const k=i.value?.length??0;return e.showSize?o(e.counterSizeString,k,v.value):o(e.counterString,k)}),m=Y(),b=Y(),p=Y(),P=T(()=>u.value||e.active),D=T(()=>["plain","underlined"].includes(e.variant));function x(){p.value!==document.activeElement&&p.value?.focus(),u.value||r()}function _(k){p.value?.click()}function V(k){a("mousedown:control",k)}function N(k){p.value?.click(),a("click:control",k)}function W(k){k.stopPropagation(),x(),Oe(()=>{i.value=[],ma(e["onClick:clear"],k)})}return se(i,k=>{(!Array.isArray(k)||!k.length)&&p.value&&(p.value.value="")}),pe(()=>{const k=!!(l.counter||e.counter),A=!!(k||l.details),[M,H]=Zt(t),{modelValue:O,...C}=je.filterProps(e),S=Fa(e);return s(je,L({ref:m,modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":D.value},e.class],style:e.style,"onClick:prepend":_},M,C,{centerAffix:!D.value,focused:u.value}),{...l,default:F=>{let{id:ie,isDisabled:te,isDirty:Ve,isReadonly:Ce,isValid:tt}=F;return s(Ba,L({ref:b,"prepend-icon":e.prependIcon,onMousedown:V,onClick:N,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},S,{id:ie.value,active:P.value||Ve.value,dirty:Ve.value,disabled:te.value,focused:u.value,error:tt.value===!1}),{...l,default:mt=>{let{props:{class:ht,...pt}}=mt;return s(ve,null,[s("input",L({ref:p,type:"file",readonly:Ce.value,disabled:te.value,multiple:e.multiple,name:e.name,onClick:ye=>{ye.stopPropagation(),Ce.value&&ye.preventDefault(),x()},onChange:ye=>{if(!ye.target)return;const nt=ye.target;i.value=[...nt.files??[]]},onFocus:x,onBlur:d},pt,H),null),s("div",{class:ht},[!!i.value?.length&&(l.selection?l.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:v.value}):e.chips?h.value.map(ye=>s(Nn,{key:ye,size:"small",color:e.color},{default:()=>[ye]})):h.value.join(", "))])])}})},details:A?F=>s(ve,null,[l.details?.(F),k&&s(ve,null,[s("span",null,null),s($a,{active:!!i.value?.length,value:g.value},l.counter)])]):void 0})}),Pt({},m,b,p)}}),xo=ue({...Pn(),...ao()},"VForm"),ln=ce()({name:"VForm",props:xo(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:a}=n;const l=lo(e),o=Y();function i(r){r.preventDefault(),l.reset()}function u(r){const d=r,c=l.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),a("submit",d),d.defaultPrevented||c.then(f=>{let{valid:v}=f;v&&o.value?.submit()}),d.preventDefault()}return pe(()=>s("form",{ref:o,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:u},[t.default?.(l)])),Pt(l,o)}}),Vo=X("b",null,"overwrite any existing progress",-1),Co={__name:"UploadFileDialog",emits:["submit"],setup(e,{emit:n}){let t="";const a=Y();se(a,()=>{o=0,f.value=!1,r=[],m.value.resetValidation()});function l(p){return p.length===1||"Required"}let o=0;function i(p){o++;const P=p[0],D=[".yaml"];let x="";const _=P?.name.lastIndexOf(".");return _>=0&&(x=P.name.slice(_),o===1&&(t=P.name.substring(0,_))),D.includes(x)?(Object.defineProperty(P,"name",{writable:!0,value:yl()+".yaml"}),!0):`Invalid file type: expected .yaml, got ${x}`}function u(p){const P=p[0],D=1e6,x=2,_=D*x,V=P.size;return V<=0?"Invalid file":V<=_?!0:`File too large, (${x} MB limit)`}let r=Ze([]),d=Ze({});const c=Y();let f=Y(!1),v=Y(!1);async function h(p){const D=await p[0].text();try{r=[],f.value=!1,d=bl(D,{schema:kl});const x=wl(d);for(let _=0;_<x.length;_++)r.push(x[_]);return x?(f.value=!0,""):!0}catch(x){return x.reason}}const g=n,m=Y(null);async function b(){await m.value.validate(),c.value&&(g("submit",d,t),a.value=[],v.value=!1)}return(p,P)=>(U(),Z(an,{width:"500",modelValue:B(v),"onUpdate:modelValue":P[4]||(P[4]=D=>ha(v)?v.value=D:v=D)},{activator:w(({props:D})=>[s(K,L(D,{text:"Load case study","prepend-icon":"mdi-upload",color:"blue",variant:"text"}),null,16)]),default:w(({isActive:D})=>[s(ln,{onSubmit:P[2]||(P[2]=tn(()=>{},["prevent"])),modelValue:c.value,"onUpdate:modelValue":P[3]||(P[3]=x=>c.value=x),ref_key:"form",ref:m},{default:w(()=>[s(ze,{title:"Load Case Study"},{default:w(()=>[s(Dt,{class:"text-subtitle-2"},{default:w(()=>[q(" To view or edit an existing case study, upload a .yaml file created by this website. Loading a file will "),Vo,q(" in the form. The current case study schema version is "+Me(`v${B(bn).$version}`)+" ",1),s(_o,{label:"Case study .yaml file",accept:".yaml",rules:[l,i,u,h],"error-messages":B(r),error:B(f),variant:"outlined",density:"compact",class:"mt-6",modelValue:a.value,"onUpdate:modelValue":P[0]||(P[0]=x=>a.value=x)},null,8,["rules","error-messages","error","modelValue"])]),_:1}),s(et,null,{default:w(()=>[s(Ne),s(K,{text:"Cancel",onClick:x=>{a.value=[],D.value=!1}},null,8,["onClick"]),s(K,{text:"Ok",type:"submit",onClick:P[1]||(P[1]=x=>b())})]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["modelValue"]))}},Do={},vt=e=>(Sl("data-v-e6a978ba"),e=e(),_l(),e),Po=vt(()=>X("ol",null,[X("li",null," The attack exploits one or more vulnerabilities that compromise the confidentiality, integrity, or availability of a ML system. "),X("li",null," The attack is against a production/commercial ML system. This can be on MLaaS or ML systems embedded in clients/at the edge. "),X("li",null," Ensure you have permission to share this information and/or publish this research. Please follow the proper channels before reporting a new attack and make sure you are practicing responsible disclosure. ")],-1)),Io=vt(()=>X("ol",null,[X("li",null,"Fill out the form."),X("li",null,"Download the generated case study .yaml file."),X("li",null,[q(" Email the case study file to "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")])],-1)),Eo=vt(()=>X("p",null," After downloading the case study, a new button will appear to optionally download a PowerPoint .pptx version for perusal. ",-1)),To=vt(()=>X("p",null,' To view or edit an existing case study, click the "Load Case Study" button and upload the .yaml file. Make any necessary adjustments, then re-download the file. ',-1)),Ao=vt(()=>X("p",null,[q(" For more guidance, please watch this "),X("a",{target:"_blank",href:"https://www.youtube.com/watch?v=Np_ip14YJGg&list=PLkTApXQou_8J6-t2_7QTTVDLBQlKFXPOu&index=2"},"instructional video"),q(". ")],-1)),Mo=vt(()=>X("p",null,[q(" Please contact "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(" with any questions. ")],-1));function Oo(e,n){return U(),Z(an,{width:"500"},{activator:w(({props:t})=>[s(K,L(t,{text:"Instructions","prepend-icon":"mdi-information-outline",color:"grey-lighten-2"}),null,16)]),default:w(({isActive:t})=>[s(ze,null,{default:w(()=>[s(zt,null,{default:w(()=>[q(" Case study considerations ")]),_:1}),s(Dt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Po]),_:1}),s(zt,null,{default:w(()=>[q(" How to use this case study builder ")]),_:1}),s(Dt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Io,Eo,To,Ao,Mo]),_:1}),s(et,null,{default:w(()=>[s(Ne),s(K,{text:"Ok",onClick:a=>t.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}const Ro=pa(Do,[["render",Oo],["__scopeId","data-v-e6a978ba"]]),No=ga("v-alert-title"),Fo=["success","info","warning","error"],Bo=ue({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:kn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Fo.includes(e)},...Pn(),...xl(),...ya(),...ba(),...ka(),...wa(),...Sa(),..._a(),...xa(),...Vl({variant:"flat"})},"VAlert"),qt=ce()({name:"VAlert",props:Bo(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=fe(e,"modelValue"),o=T(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),i=T(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:u}=Va(e),{colorClasses:r,colorStyles:d,variantClasses:c}=Cl(i),{densityClasses:f}=Dl(e),{dimensionStyles:v}=Ca(e),{elevationClasses:h}=Da(e),{locationStyles:g}=Pa(e),{positionClasses:m}=Ia(e),{roundedClasses:b}=Ea(e),{textColorClasses:p,textColorStyles:P}=Ta(In(e,"borderColor")),{t:D}=en(),x=T(()=>({"aria-label":D(e.closeLabel),onClick(_){l.value=!1,t("click:close",_)}}));return()=>{const _=!!(a.prepend||o.value),V=!!(a.title||e.title),N=!!(a.close||e.closable);return l.value&&s(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},u.value,r.value,f.value,h.value,m.value,b.value,c.value,e.class],style:[d.value,v.value,g.value,e.style],role:"alert"},{default:()=>[Pl(!1,"v-alert"),e.border&&s("div",{key:"border",class:["v-alert__border",p.value],style:P.value},null),_&&s("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?s(He,{key:"prepend-defaults",disabled:!o.value,defaults:{VIcon:{density:e.density,icon:o.value,size:e.prominent?44:28}}},a.prepend):s(Ue,{key:"prepend-icon",density:e.density,icon:o.value,size:e.prominent?44:28},null)]),s("div",{class:"v-alert__content"},[V&&s(No,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&s("div",{key:"append",class:"v-alert__append"},[a.append()]),N&&s("div",{key:"close",class:"v-alert__close"},[a.close?s(He,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:x.value})]}):s(K,L({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},x.value),null)])]})}}});function $o(e,n,t){if(n==null)return e;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?s(ve,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,n)]),s("span",{class:"v-autocomplete__mask"},[e.substr(n,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(n+t)])]):e}const Yo=ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...oo({filterKeys:["title"]}),...io(),...Qe(ro({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Il({transition:!1})},"VAutocomplete"),jn=ce()({name:"VAutocomplete",props:Yo(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:t}=n;const{t:a}=en(),l=Y(),o=Ae(!1),i=Ae(!0),u=Ae(!1),r=Y(),d=Y(),c=fe(e,"menu"),f=T({get:()=>c.value,set:I=>{c.value&&!I&&r.value?.ΨopenChildren||(c.value=I)}}),v=Ae(-1),h=T(()=>l.value?.color),g=T(()=>f.value?e.closeText:e.openText),{items:m,transformIn:b,transformOut:p}=El(e),{textColorClasses:P,textColorStyles:D}=Ta(h),x=fe(e,"search",""),_=fe(e,"modelValue",[],I=>b(I===null?[null]:ut(I)),I=>{const ae=p(I);return e.multiple?ae:ae[0]??null}),V=T(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),N=so(),{filteredItems:W,getMatches:k}=uo(e,m,()=>i.value?"":x.value),A=T(()=>e.hideSelected?W.value.filter(I=>!_.value.some(ae=>ae.value===I.value)):W.value),M=T(()=>!!(e.chips||t.chip)),H=T(()=>M.value||!!t.selection),O=T(()=>_.value.map(I=>I.props.value)),C=T(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&x.value===A.value[0]?.title)&&A.value.length>0&&!i.value&&!u.value),S=T(()=>e.hideNoData&&!A.value.length||e.readonly||N?.isReadonly.value),F=Y(),{onListScroll:ie,onListKeydown:te}=co(F,l);function Ve(I){e.openOnClear&&(f.value=!0),x.value=""}function Ce(){S.value||(f.value=!0)}function tt(I){S.value||(o.value&&(I.preventDefault(),I.stopPropagation()),f.value=!f.value)}function mt(I){if(e.readonly||N?.isReadonly.value)return;const ae=l.value.selectionStart,re=_.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(I.key))&&I.preventDefault(),["Enter","ArrowDown"].includes(I.key)&&(f.value=!0),["Escape"].includes(I.key)&&(f.value=!1),C.value&&["Enter","Tab"].includes(I.key)&&qe(A.value[0]),I.key==="ArrowDown"&&C.value&&F.value?.focus("next"),!!e.multiple){if(["Backspace","Delete"].includes(I.key)){if(v.value<0){I.key==="Backspace"&&!x.value&&(v.value=re-1);return}const j=v.value,J=_.value[v.value];J&&!J.props.disabled&&qe(J,!1),v.value=j>=re-1?re-2:j}if(I.key==="ArrowLeft"){if(v.value<0&&ae>0)return;const j=v.value>-1?v.value-1:re-1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(x.value?.length,x.value?.length))}if(I.key==="ArrowRight"){if(v.value<0)return;const j=v.value+1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(0,0))}}}function ht(I){if(Un(l.value,":autofill")||Un(l.value,":-webkit-autofill")){const ae=m.value.find(re=>re.title===I.target.value);ae&&qe(ae)}}function pt(){o.value&&(i.value=!0,l.value?.focus())}function ye(I){o.value=!0,setTimeout(()=>{u.value=!0})}function nt(I){u.value=!1}function rn(I){(I==null||I===""&&!e.multiple)&&(_.value=[])}const sn=Ae(!1);function qe(I){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!I.props.disabled)if(e.multiple){const re=_.value.findIndex(J=>e.valueComparator(J.value,I.value)),j=ae??!~re;if(~re){const J=j?[..._.value,I]:[..._.value];J.splice(re,1),_.value=J}else j&&(_.value=[..._.value,I]);e.clearOnSelect&&(x.value="")}else{const re=ae!==!1;_.value=re?[I]:[],x.value=re&&!H.value?I.title:"",Oe(()=>{f.value=!1,i.value=!0})}}return se(o,(I,ae)=>{I!==ae&&(I?(sn.value=!0,x.value=e.multiple||H.value?"":String(_.value.at(-1)?.props.title??""),i.value=!0,Oe(()=>sn.value=!1)):(!e.multiple&&x.value==null?_.value=[]:C.value&&!u.value&&!_.value.some(re=>{let{value:j}=re;return j===A.value[0].value})&&qe(A.value[0]),f.value=!1,x.value="",v.value=-1))}),se(x,I=>{!o.value||sn.value||(I&&(f.value=!0),i.value=!I)}),se(f,()=>{if(!e.hideSelected&&f.value&&_.value.length){const I=A.value.findIndex(ae=>_.value.some(re=>ae.value===re.value));va&&window.requestAnimationFrame(()=>{I>=0&&d.value?.scrollToIndex(I)})}}),se(()=>e.items,I=>{!o.value||!I.length||f.value||(f.value=!0)}),pe(()=>{const I=!!(!e.hideNoData||A.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),ae=_.value.length>0,re=Ke.filterProps(e);return s(Ke,L({ref:l},re,{modelValue:x.value,"onUpdate:modelValue":[j=>x.value=j,rn],focused:o.value,"onUpdate:focused":j=>o.value=j,validationValue:_.externalValue,counterValue:V.value,dirty:ae,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":f.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:ae?void 0:e.placeholder,"onClick:clear":Ve,"onMousedown:control":Ce,onKeydown:mt}),{...t,default:()=>s(ve,null,[s(Aa,L({ref:r,modelValue:f.value,"onUpdate:modelValue":j=>f.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:S.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:pt},e.menuProps),{default:()=>[I&&s(Ma,L({ref:F,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:te,onFocusin:ye,onFocusout:nt,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>[t["prepend-item"]?.(),!A.value.length&&!e.hideNoData&&(t["no-data"]?.()??s(Ht,{title:a(e.noDataText)},null)),s(fo,{ref:d,renderless:!0,items:A.value},{default:j=>{let{item:J,index:Pe,itemRef:Mt}=j;const gt=L(J.props,{ref:Mt,key:Pe,active:C.value&&Pe===0?!0:void 0,onClick:()=>qe(J,null)});return t.item?.({item:J,index:Pe,props:gt})??s(Ht,L(gt,{role:"option"}),{prepend:yt=>{let{isSelected:Xe}=yt;return s(ve,null,[e.multiple&&!e.hideSelected?s(Sn,{key:J.value,modelValue:Xe,ripple:!1,tabindex:"-1"},null):void 0,J.props.prependAvatar&&s(Tl,{image:J.props.prependAvatar},null),J.props.prependIcon&&s(Ue,{icon:J.props.prependIcon},null)])},title:()=>i.value?J.title:$o(J.title,k(J)?.title,x.value?.length??0)})}}),t["append-item"]?.()]})]}),_.value.map((j,J)=>{function Pe(Xe){Xe.stopPropagation(),Xe.preventDefault(),qe(j,!1)}const Mt={"onClick:close":Pe,onMousedown(Xe){Xe.preventDefault(),Xe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},gt=M.value?!!t.chip:!!t.selection,yt=gt?Al(M.value?t.chip({item:j,index:J,props:Mt}):t.selection({item:j,index:J})):void 0;if(!(gt&&!yt))return s("div",{key:j.value,class:["v-autocomplete__selection",J===v.value&&["v-autocomplete__selection--selected",P.value]],style:J===v.value?D.value:{}},[M.value?t.chip?s(He,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>[yt]}):s(Nn,L({key:"chip",closable:e.closableChips,size:"small",text:j.title,disabled:j.props.disabled},Mt),null):yt??s("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&J<_.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){for(var j=arguments.length,J=new Array(j),Pe=0;Pe<j;Pe++)J[Pe]=arguments[Pe];return s(ve,null,[t["append-inner"]?.(...J),e.menuIcon?s(Ue,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:tt,onClick:Ml,"aria-label":a(g.value),title:a(g.value)},null):void 0])}})}),Pt({isFocused:o,isPristine:i,menu:f,search:x,filteredItems:W,select:qe},l)}}),Lo=ue({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...nn(),...Na()},"VTextarea"),La=ce()({name:"VTextarea",directives:{Intersect:Ol},inheritAttrs:!1,props:Lo(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const o=fe(e,"modelValue"),{isFocused:i,focus:u,blur:r}=Rn(e),d=T(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),c=T(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function f(M,H){!e.autofocus||!M||H[0].target?.focus?.()}const v=Y(),h=Y(),g=Ae(""),m=Y(),b=T(()=>e.persistentPlaceholder||i.value||e.active);function p(){m.value!==document.activeElement&&m.value?.focus(),i.value||u()}function P(M){p(),a("click:control",M)}function D(M){a("mousedown:control",M)}function x(M){M.stopPropagation(),p(),Oe(()=>{o.value="",ma(e["onClick:clear"],M)})}function _(M){const H=M.target;if(o.value=H.value,e.modelModifiers?.trim){const O=[H.selectionStart,H.selectionEnd];Oe(()=>{H.selectionStart=O[0],H.selectionEnd=O[1]})}}const V=Y(),N=Y(+e.rows),W=T(()=>["plain","underlined"].includes(e.variant));En(()=>{e.autoGrow||(N.value=+e.rows)});function k(){e.autoGrow&&Oe(()=>{if(!V.value||!h.value)return;const M=getComputedStyle(V.value),H=getComputedStyle(h.value.$el),O=parseFloat(M.getPropertyValue("--v-field-padding-top"))+parseFloat(M.getPropertyValue("--v-input-padding-top"))+parseFloat(M.getPropertyValue("--v-field-padding-bottom")),C=V.value.scrollHeight,S=parseFloat(M.lineHeight),F=Math.max(parseFloat(e.rows)*S+O,parseFloat(H.getPropertyValue("--v-input-control-height"))),ie=parseFloat(e.maxRows)*S+O||1/0,te=Bl(C??0,F,ie);N.value=Math.floor((te-O)/S),g.value=Tn(te)})}It(k),se(o,k),se(()=>e.rows,k),se(()=>e.maxRows,k),se(()=>e.density,k);let A;return se(V,M=>{M?(A=new ResizeObserver(k),A.observe(V.value)):A?.disconnect()}),Rl(()=>{A?.disconnect()}),pe(()=>{const M=!!(l.counter||e.counter||e.counterValue),H=!!(M||l.details),[O,C]=Zt(t),{modelValue:S,...F}=je.filterProps(e),ie=Fa(e);return s(je,L({ref:v,modelValue:o.value,"onUpdate:modelValue":te=>o.value=te,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":W.value},e.class],style:e.style},O,F,{centerAffix:N.value===1&&!W.value,focused:i.value}),{...l,default:te=>{let{id:Ve,isDisabled:Ce,isDirty:tt,isReadonly:mt,isValid:ht}=te;return s(Ba,L({ref:h,style:{"--v-textarea-control-height":g.value},onClick:P,onMousedown:D,"onClick:clear":x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ie,{id:Ve.value,active:b.value||tt.value,centerAffix:N.value===1&&!W.value,dirty:tt.value||e.dirty,disabled:Ce.value,focused:i.value,error:ht.value===!1}),{...l,default:pt=>{let{props:{class:ye,...nt}}=pt;return s(ve,null,[e.prefix&&s("span",{class:"v-text-field__prefix"},[e.prefix]),Hn(s("textarea",L({ref:m,class:ye,value:o.value,onInput:_,autofocus:e.autofocus,readonly:mt.value,disabled:Ce.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:p,onBlur:r},nt,C),null),[[Nl("intersect"),{handler:f},null,{once:!0}]]),e.autoGrow&&Hn(s("textarea",{class:[ye,"v-textarea__sizer"],id:`${nt.id}-sizer`,"onUpdate:modelValue":rn=>o.value=rn,ref:V,readonly:!0,"aria-hidden":"true"},null),[[Fl,o.value]]),e.suffix&&s("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:H?te=>s(ve,null,[l.details?.(te),M&&s(ve,null,[s("span",null,null),s($a,{active:e.persistentCounter||i.value,value:d.value,max:c.value},l.counter)])]):void 0})}),Pt({},v,h,m)}}),Ua={__name:"AddProcedure",props:["editProcedure","editIndex"],emits:["submitProcedureStep","cancel","updateShowAddNewStep","update"],setup(e,{expose:n,emit:t}){const{editProcedure:a,editIndex:l}=e;It(()=>{a&&(c.tactic=a.tactic,c.technique=o.getDataObjectById(a.technique)===void 0?"":a.technique,c.description=a.description)});const o=An(),i=Y(!1),u=Y(null),r=T(()=>!!(!i.value||c.tactic&&c.technique)),d=[m=>m?!0:"Required"];let c=Ze({tactic:"",technique:"",description:""});const f=T(()=>o.getDataObjectsByType("tactics"));se(()=>c.tactic,(m,b)=>{c.technique&&m!==b&&b&&(c.technique="")});const v=T(()=>{const m=o.getDataObjectsByTypeKeyContainingValue("techniques","tactics",c.tactic);for(let b=0;b<m.length;b++)if(m[b].subtechniques)for(let p=0;p<m[b].subtechniques.length;p++){const P=m[b].subtechniques[p],D=b+1+p;m.splice(D,0,P)}return m}),h=t;n({addProcedureStep:g});function g(){if(i.value=!0,u.value.validate(),r.value&&a){const m=JSON.parse(JSON.stringify(c));h("update",m,l),i.value=!1}else if(r.value){const m=JSON.parse(JSON.stringify(c));h("submitProcedureStep",m),u.value.reset(),i.value=!1}}return(m,b)=>(U(),Z(ln,{ref_key:"procedureForm",ref:u,onSubmit:b[5]||(b[5]=tn(()=>{},["prevent"]))},{default:w(()=>[s(ze,{title:"Add Procedure Step",variant:"outlined",style:ct({borderColor:r.value?"grey":"red"})},{default:w(()=>[s(ot,{class:"pa-6"},{default:w(()=>[s(wn,{cols:"12",lg:"6"},{default:w(()=>[s(jn,{label:"Tactic",items:f.value,"item-title":"name","item-value":"id",modelValue:B(c).tactic,"onUpdate:modelValue":b[0]||(b[0]=p=>B(c).tactic=p),variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},null,8,["items","modelValue"])]),_:1}),s(wn,{cols:"12",lg:"6"},{default:w(()=>[s(jn,{label:"Technique",items:v.value,"item-title":"name","item-value":"id",modelValue:B(c).technique,"onUpdate:modelValue":b[1]||(b[1]=p=>B(c).technique=p),disabled:!B(c).tactic,variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},{item:w(({props:p,item:P})=>[s(Ht,L(p,{"prepend-icon":P.raw.tactics?"":"mdi-subdirectory-arrow-right"}),null,16,["prepend-icon"])]),_:1},8,["items","modelValue","disabled"])]),_:1}),s(La,{label:"Description","prepend-inner-icon":"mdi-text",hint:"Describe how this technique was used in the case study",disabled:!B(c).tactic,variant:"outlined",modelValue:B(c).description,"onUpdate:modelValue":b[2]||(b[2]=p=>B(c).description=p),modelModifiers:{trim:!0},class:"mx-3"},null,8,["disabled","modelValue"])]),_:1}),s(et,null,{default:w(()=>[s(Ne),s(K,{onClick:b[3]||(b[3]=p=>m.$emit(e.editProcedure?"cancel":"updateShowAddNewStep"))},{default:w(()=>[q("Cancel")]),_:1}),s(K,{type:"submit",color:"green",onClick:b[4]||(b[4]=p=>g())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),i.value&&r.value===!1?(U(),Z(qt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(Me(B(c).tactic?"Please fill out Technique":"Please fill out Tactic and Technique"),1)]),_:1})):we("",!0)]),_:1},8,["style"])]),_:1},512))}};var Uo=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,ja=Object.prototype.propertyIsEnumerable,zn=(e,n,t)=>n in e?Uo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,rt=(e,n)=>{for(var t in n||(n={}))Ha.call(n,t)&&zn(e,t,n[t]);if(Xt)for(var t of Xt(n))ja.call(n,t)&&zn(e,t,n[t]);return e},za=(e,n)=>{var t={};for(var a in e)Ha.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&Xt)for(var a of Xt(e))n.indexOf(a)<0&&ja.call(e,a)&&(t[a]=e[a]);return t};const qa="[vue-draggable-plus]: ";function Ho(e){console.warn(qa+e)}function jo(e){console.error(qa+e)}function qn(e,n,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(n,1)[0]),e}function zo(e){return e.replace(/-(\w)/g,(n,t)=>t?t.toUpperCase():"")}function qo(e){return Object.keys(e).reduce((n,t)=>(typeof e[t]<"u"&&(n[zo(t)]=e[t]),n),{})}function Xo(e,n){if(Array.isArray(e))return e.splice(n,1)}function Wo(e,n,t){if(Array.isArray(e))return e.splice(n,0,t)}function Go(e){return typeof e>"u"}function Jo(e){return typeof e=="string"}function Xn(e,n,t){const a=e.children[t];e.insertBefore(n,a)}function un(e){e.parentNode&&e.parentNode.removeChild(e)}function Ko(e,n=document){var t;let a=null;return typeof n?.querySelector=="function"?a=(t=n?.querySelector)==null?void 0:t.call(n,e):a=document.querySelector(e),a||Ho(`Element not found: ${e}`),a}function Qo(e,n,t=null){return function(...a){return e.apply(t,a),n.apply(t,a)}}function Zo(e,n){const t=rt({},e);return Object.keys(n).forEach(a=>{t[a]?t[a]=Qo(e[a],n[a]):t[a]=n[a]}),t}function ei(e){return e instanceof HTMLElement}function ti(e,n){Object.keys(e).forEach(t=>{n(t,e[t])})}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Wn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,a)}return t}function Te(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Wn(Object(t),!0).forEach(function(a){ni(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Bt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bt=function(n){return typeof n}:Bt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bt(e)}function ni(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Fe(){return Fe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fe.apply(this,arguments)}function ai(e,n){if(e==null)return{};var t={},a=Object.keys(e),l,o;for(o=0;o<a.length;o++)l=a[o],!(n.indexOf(l)>=0)&&(t[l]=e[l]);return t}function li(e,n){if(e==null)return{};var t=ai(e,n),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var oi="1.15.1";function Re(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Be=Re(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tt=Re(/Edge/i),Gn=Re(/firefox/i),St=Re(/safari/i)&&!Re(/chrome/i)&&!Re(/android/i),Xa=Re(/iP(ad|od|hone)/i),Wa=Re(/chrome/i)&&Re(/android/i),Ga={capture:!1,passive:!1};function G(e,n,t){e.addEventListener(n,t,!Be&&Ga)}function z(e,n,t){e.removeEventListener(n,t,!Be&&Ga)}function Wt(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function ii(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ie(e,n,t,a){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&Wt(e,n):Wt(e,n))||a&&e===t)return e;if(e===t)break}while(e=ii(e))}return null}var Jn=/\s+/g;function be(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var a=(" "+e.className+" ").replace(Jn," ").replace(" "+n+" "," ");e.className=(a+(t?" "+n:"")).replace(Jn," ")}}function E(e,n,t){var a=e&&e.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=t+(typeof t=="string"?"":"px")}}function dt(e,n){var t="";if(typeof e=="string")t=e;else do{var a=E(e,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!n&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Ja(e,n,t){if(e){var a=e.getElementsByTagName(n),l=0,o=a.length;if(t)for(;l<o;l++)t(a[l],l);return a}return[]}function Ee(){var e=document.scrollingElement;return e||document.documentElement}function oe(e,n,t,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var o,i,u,r,d,c,f;if(e!==window&&e.parentNode&&e!==Ee()?(o=e.getBoundingClientRect(),i=o.top,u=o.left,r=o.bottom,d=o.right,c=o.height,f=o.width):(i=0,u=0,r=window.innerHeight,d=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(n||t)&&e!==window&&(l=l||e.parentNode,!Be))do if(l&&l.getBoundingClientRect&&(E(l,"transform")!=="none"||t&&E(l,"position")!=="static")){var v=l.getBoundingClientRect();i-=v.top+parseInt(E(l,"border-top-width")),u-=v.left+parseInt(E(l,"border-left-width")),r=i+o.height,d=u+o.width;break}while(l=l.parentNode);if(a&&e!==window){var h=dt(l||e),g=h&&h.a,m=h&&h.d;h&&(i/=m,u/=g,f/=g,c/=m,r=i+c,d=u+f)}return{top:i,left:u,bottom:r,right:d,width:f,height:c}}}function Ka(e){var n=oe(e),t=parseInt(E(e,"padding-left")),a=parseInt(E(e,"padding-top")),l=parseInt(E(e,"padding-right")),o=parseInt(E(e,"padding-bottom"));return n.top+=a+parseInt(E(e,"border-top-width")),n.left+=t+parseInt(E(e,"border-left-width")),n.width=e.clientWidth-t-l,n.height=e.clientHeight-a-o,n.bottom=n.top+n.height,n.right=n.left+n.width,n}function Kn(e,n,t){for(var a=Le(e,!0),l=oe(e)[n];a;){var o=oe(a)[t],i=void 0;if(t==="top"||t==="left"?i=l>=o:i=l<=o,!i)return a;if(a===Ee())break;a=Le(a,!1)}return!1}function ft(e,n,t,a){for(var l=0,o=0,i=e.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==R.ghost&&(a||i[o]!==R.dragged)&&Ie(i[o],t.draggable,e,!1)){if(l===n)return i[o];l++}o++}return null}function Fn(e,n){for(var t=e.lastElementChild;t&&(t===R.ghost||E(t,"display")==="none"||n&&!Wt(t,n));)t=t.previousElementSibling;return t||null}function _e(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==R.clone&&(!n||Wt(e,n))&&t++;return t}function Qn(e){var n=0,t=0,a=Ee();if(e)do{var l=dt(e),o=l.a,i=l.d;n+=e.scrollLeft*o,t+=e.scrollTop*i}while(e!==a&&(e=e.parentNode));return[n,t]}function ri(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===e[t][a])return Number(t)}return-1}function Le(e,n){if(!e||!e.getBoundingClientRect)return Ee();var t=e,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=E(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ee();if(a||n)return t;a=!0}}while(t=t.parentNode);return Ee()}function si(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function cn(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var _t;function Qa(e,n){return function(){if(!_t){var t=arguments,a=this;t.length===1?e.call(a,t[0]):e.apply(a,t),_t=setTimeout(function(){_t=void 0},n)}}}function ui(){clearTimeout(_t),_t=void 0}function Za(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function el(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}var Se="Sortable"+new Date().getTime();function ci(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(E(a,"display")==="none"||a===R.ghost)){e.push({target:a,rect:oe(a)});var l=Te({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=dt(a,!0);o&&(l.top-=o.f,l.left-=o.e)}a.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(ri(e,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(n),typeof t=="function"&&t();return}var l=!1,o=0;e.forEach(function(i){var u=0,r=i.target,d=r.fromRect,c=oe(r),f=r.prevFromRect,v=r.prevToRect,h=i.rect,g=dt(r,!0);g&&(c.top-=g.f,c.left-=g.e),r.toRect=c,r.thisAnimationDuration&&cn(f,c)&&!cn(d,c)&&(h.top-c.top)/(h.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(u=fi(h,f,v,a.options)),cn(c,d)||(r.prevFromRect=d,r.prevToRect=c,u||(u=a.options.animation),a.animate(r,h,c,u)),u&&(l=!0,o=Math.max(o,u),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},u),r.thisAnimationDuration=u)}),clearTimeout(n),l?n=setTimeout(function(){typeof t=="function"&&t()},o):typeof t=="function"&&t(),e=[]},animate:function(t,a,l,o){if(o){E(t,"transition",""),E(t,"transform","");var i=dt(this.el),u=i&&i.a,r=i&&i.d,d=(a.left-l.left)/(u||1),c=(a.top-l.top)/(r||1);t.animatingX=!!d,t.animatingY=!!c,E(t,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=di(t),E(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),E(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}}function di(e){return e.offsetWidth}function fi(e,n,t,a){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*a.animation}var at=[],dn={initializeByDefault:!0},At={mount:function(e){for(var n in dn)dn.hasOwnProperty(n)&&!(n in e)&&(e[n]=dn[n]);at.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),at.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var l=e+"Global";at.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][l]&&n[o.pluginName][l](Te({sortable:n},t)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Te({sortable:n},t)))})},initializePlugins:function(e,n,t,a){at.forEach(function(i){var u=i.pluginName;if(!(!e.options[u]&&!i.initializeByDefault)){var r=new i(e,n,e.options);r.sortable=e,r.options=e.options,e[u]=r,Fe(t,r.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var o=this.modifyOption(e,l,e.options[l]);typeof o<"u"&&(e.options[l]=o)}},getEventProperties:function(e,n){var t={};return at.forEach(function(a){typeof a.eventProperties=="function"&&Fe(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return at.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(a=l.optionListeners[n].call(e[l.pluginName],t))}),a}};function vi(e){var n=e.sortable,t=e.rootEl,a=e.name,l=e.targetEl,o=e.cloneEl,i=e.toEl,u=e.fromEl,r=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,g=e.extraEventProperties;if(n=n||t&&t[Se],!!n){var m,b=n.options,p="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Be&&!Tt?m=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(a,!0,!0)),m.to=i||t,m.from=u||t,m.item=l||t,m.clone=o,m.oldIndex=r,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=v,m.pullMode=h?h.lastPutMode:void 0;var P=Te(Te({},g),At.getEventProperties(a,n));for(var D in P)m[D]=P[D];t&&t.dispatchEvent(m),b[p]&&b[p].call(n,m)}}var mi=["evt"],ge=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,l=li(t,mi);At.pluginEvent.bind(R)(e,n,Te({dragEl:y,parentEl:ne,ghostEl:$,rootEl:Q,nextEl:Je,lastDownEl:$t,cloneEl:ee,cloneHidden:Ye,dragStarted:bt,putSortable:de,activeSortable:R.active,originalEvent:a,oldIndex:st,oldDraggableIndex:xt,newIndex:ke,newDraggableIndex:$e,hideGhostForTarget:ll,unhideGhostForTarget:ol,cloneNowHidden:function(){Ye=!0},cloneNowShown:function(){Ye=!1},dispatchSortableEvent:function(o){he({sortable:n,name:o,originalEvent:a})}},l))};function he(e){vi(Te({putSortable:de,cloneEl:ee,targetEl:y,rootEl:Q,oldIndex:st,oldDraggableIndex:xt,newIndex:ke,newDraggableIndex:$e},e))}var y,ne,$,Q,Je,$t,ee,Ye,st,ke,xt,$e,Ot,de,it=!1,Gt=!1,Jt=[],We,De,fn,vn,Zn,ea,bt,lt,Vt,Ct=!1,Rt=!1,Yt,me,mn=[],_n=!1,Kt=[],on=typeof document<"u",Nt=Xa,ta=Tt||Be?"cssFloat":"float",hi=on&&!Wa&&!Xa&&"draggable"in document.createElement("div"),tl=function(){if(on){if(Be)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),nl=function(e,n){var t=E(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=ft(e,0,n),o=ft(e,1,n),i=l&&E(l),u=o&&E(o),r=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+oe(l).width,d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+oe(o).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&i.float&&i.float!=="none"){var c=i.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return l&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||r>=a&&t[ta]==="none"||o&&t[ta]==="none"&&r+d>a)?"vertical":"horizontal"},pi=function(e,n,t){var a=t?e.left:e.top,l=t?e.right:e.bottom,o=t?e.width:e.height,i=t?n.left:n.top,u=t?n.right:n.bottom,r=t?n.width:n.height;return a===i||l===u||a+o/2===i+r/2},gi=function(e,n){var t;return Jt.some(function(a){var l=a[Se].options.emptyInsertThreshold;if(!(!l||Fn(a))){var o=oe(a),i=e>=o.left-l&&e<=o.right+l,u=n>=o.top-l&&n<=o.bottom+l;if(i&&u)return t=a}}),t},al=function(e){function n(l,o){return function(i,u,r,d){var c=i.options.group.name&&u.options.group.name&&i.options.group.name===u.options.group.name;if(l==null&&(o||c))return!0;if(l==null||l===!1)return!1;if(o&&l==="clone")return l;if(typeof l=="function")return n(l(i,u,r,d),o)(i,u,r,d);var f=(o?i:u).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},a=e.group;(!a||Bt(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},ll=function(){!tl&&$&&E($,"display","none")},ol=function(){!tl&&$&&E($,"display","")};on&&!Wa&&document.addEventListener("click",function(e){if(Gt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Gt=!1,!1},!0);var Ge=function(e){if(y){e=e.touches?e.touches[0]:e;var n=gi(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[Se]._onDragOver(t)}}},yi=function(e){y&&y.parentNode[Se]._isOutsideThisEl(e.target)};function R(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Fe({},n),e[Se]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nl(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,i){o.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:R.supportPointer!==!1&&"PointerEvent"in window&&!St,emptyInsertThreshold:5};At.initializePlugins(this,e,t);for(var a in t)!(a in n)&&(n[a]=t[a]);al(n);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=n.forceFallback?!1:hi,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?G(e,"pointerdown",this._onTapStart):(G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Jt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Fe(this,ci())}R.prototype={constructor:R,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,l=a.preventOnFilter,o=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(i||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,d=a.filter;if(Ci(t),!y&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!r.isContentEditable&&!(!this.nativeDraggable&&St&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Ie(u,a.draggable,t,!1),!(u&&u.animated)&&$t!==u)){if(st=_e(u),xt=_e(u,a.draggable),typeof d=="function"){if(d.call(this,e,u,this)){he({sortable:n,rootEl:r,name:"filter",targetEl:u,toEl:t,fromEl:t}),ge("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Ie(r,c.trim(),t,!1),c)return he({sortable:n,rootEl:c,name:"filter",targetEl:u,fromEl:t,toEl:t}),ge("filter",n,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ie(r,a.handle,t,!1)||this._prepareDragStart(e,i,u)}}},_prepareDragStart:function(e,n,t){var a=this,l=a.el,o=a.options,i=l.ownerDocument,u;if(t&&!y&&t.parentNode===l){var r=oe(t);if(Q=l,y=t,ne=y.parentNode,Je=y.nextSibling,$t=t,Ot=o.group,R.dragged=y,We={target:y,clientX:(n||e).clientX,clientY:(n||e).clientY},Zn=We.clientX-r.left,ea=We.clientY-r.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,y.style["will-change"]="all",u=function(){if(ge("delayEnded",a,{evt:e}),R.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Gn&&a.nativeDraggable&&(y.draggable=!0),a._triggerDragStart(e,n),he({sortable:a,name:"choose",originalEvent:e}),be(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Ja(y,d.trim(),hn)}),G(i,"dragover",Ge),G(i,"mousemove",Ge),G(i,"touchmove",Ge),G(i,"mouseup",a._onDrop),G(i,"touchend",a._onDrop),G(i,"touchcancel",a._onDrop),Gn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ge("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Tt||Be))){if(R.eventCanceled){this._onDrop();return}G(i,"mouseup",a._disableDelayedDrag),G(i,"touchend",a._disableDelayedDrag),G(i,"touchcancel",a._disableDelayedDrag),G(i,"mousemove",a._delayedDragTouchMoveHandler),G(i,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&G(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&hn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._disableDelayedDrag),z(e,"touchend",this._disableDelayedDrag),z(e,"touchcancel",this._disableDelayedDrag),z(e,"mousemove",this._delayedDragTouchMoveHandler),z(e,"touchmove",this._delayedDragTouchMoveHandler),z(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(y,"dragend",this),G(Q,"dragstart",this._onDragStart));try{document.selection?Lt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(it=!1,Q&&y){ge("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",yi);var t=this.options;!e&&be(y,t.dragClass,!1),be(y,t.ghostClass,!0),R.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,ll();for(var e=document.elementFromPoint(De.clientX,De.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==n);)n=e;if(y.parentNode[Se]._isOutsideThisEl(e),n)do{if(n[Se]){var t=void 0;if(t=n[Se]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);ol()}},_onTouchMove:function(e){if(We){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,l=e.touches?e.touches[0]:e,o=$&&dt($,!0),i=$&&o&&o.a,u=$&&o&&o.d,r=Nt&&me&&Qn(me),d=(l.clientX-We.clientX+a.x)/(i||1)+(r?r[0]-mn[0]:0)/(i||1),c=(l.clientY-We.clientY+a.y)/(u||1)+(r?r[1]-mn[1]:0)/(u||1);if(!R.active&&!it){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if($){o?(o.e+=d-(fn||0),o.f+=c-(vn||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E($,"webkitTransform",f),E($,"mozTransform",f),E($,"msTransform",f),E($,"transform",f),fn=d,vn=c,De=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$){var e=this.options.fallbackOnBody?document.body:Q,n=oe(y,!0,Nt,!0,e),t=this.options;if(Nt){for(me=e;E(me,"position")==="static"&&E(me,"transform")==="none"&&me!==document;)me=me.parentNode;me!==document.body&&me!==document.documentElement?(me===document&&(me=Ee()),n.top+=me.scrollTop,n.left+=me.scrollLeft):me=Ee(),mn=Qn(me)}$=y.cloneNode(!0),be($,t.ghostClass,!1),be($,t.fallbackClass,!0),be($,t.dragClass,!0),E($,"transition",""),E($,"transform",""),E($,"box-sizing","border-box"),E($,"margin",0),E($,"top",n.top),E($,"left",n.left),E($,"width",n.width),E($,"height",n.height),E($,"opacity","0.8"),E($,"position",Nt?"absolute":"fixed"),E($,"zIndex","100000"),E($,"pointerEvents","none"),R.ghost=$,e.appendChild($),E($,"transform-origin",Zn/parseInt($.style.width)*100+"% "+ea/parseInt($.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,l=t.options;if(ge("dragStart",this,{evt:e}),R.eventCanceled){this._onDrop();return}ge("setupClone",this),R.eventCanceled||(ee=el(y),ee.removeAttribute("id"),ee.draggable=!1,ee.style["will-change"]="",this._hideClone(),be(ee,this.options.chosenClass,!1),R.clone=ee),t.cloneId=Lt(function(){ge("clone",t),!R.eventCanceled&&(t.options.removeCloneOnHide||Q.insertBefore(ee,y),t._hideClone(),he({sortable:t,name:"clone"}))}),!n&&be(y,l.dragClass,!0),n?(Gt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(z(document,"mouseup",t._onDrop),z(document,"touchend",t._onDrop),z(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(t,a,y)),G(document,"drop",t),E(y,"transform","translateZ(0)")),it=!0,t._dragStartId=Lt(t._dragStarted.bind(t,n,e)),G(document,"selectstart",t),bt=!0,St&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,l,o,i=this.options,u=i.group,r=R.active,d=Ot===u,c=i.sort,f=de||r,v,h=this,g=!1;if(_n)return;function m(ie,te){ge(ie,h,Te({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:o,dragRect:a,targetRect:l,canSort:c,fromSortable:f,target:t,completed:p,onMove:function(Ve,Ce){return Ft(Q,n,y,a,Ve,oe(Ve),e,Ce)},changed:P},te))}function b(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function p(ie){return m("dragOverCompleted",{insertion:ie}),ie&&(d?r._hideClone():r._showClone(h),h!==f&&(be(y,de?de.options.ghostClass:r.options.ghostClass,!1),be(y,i.ghostClass,!0)),de!==h&&h!==R.active?de=h:h===R.active&&de&&(de=null),f===h&&(h._ignoreWhileAnimating=t),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===y&&!y.animated||t===n&&!t.animated)&&(lt=null),!i.dragoverBubble&&!e.rootEl&&t!==document&&(y.parentNode[Se]._isOutsideThisEl(e.target),!ie&&Ge(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function P(){ke=_e(y),$e=_e(y,i.draggable),he({sortable:h,name:"change",toEl:n,newIndex:ke,newDraggableIndex:$e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Ie(t,i.draggable,n,!0),m("dragOver"),R.eventCanceled)return g;if(y.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||h._ignoreWhileAnimating===t)return p(!1);if(Gt=!1,r&&!i.disabled&&(d?c||(o=ne!==Q):de===this||(this.lastPutMode=Ot.checkPull(this,r,y,e))&&u.checkPut(this,r,y,e))){if(v=this._getDirection(e,t)==="vertical",a=oe(y),m("dragOverValid"),R.eventCanceled)return g;if(o)return ne=Q,b(),this._hideClone(),m("revert"),R.eventCanceled||(Je?Q.insertBefore(y,Je):Q.appendChild(y)),p(!0);var D=Fn(n,i.draggable);if(!D||Si(e,v,this)&&!D.animated){if(D===y)return p(!1);if(D&&n===e.target&&(t=D),t&&(l=oe(t)),Ft(Q,n,y,a,t,l,e,!!t)!==!1)return b(),D&&D.nextSibling?n.insertBefore(y,D.nextSibling):n.appendChild(y),ne=n,P(),p(!0)}else if(D&&wi(e,v,this)){var x=ft(n,0,i,!0);if(x===y)return p(!1);if(t=x,l=oe(t),Ft(Q,n,y,a,t,l,e,!1)!==!1)return b(),n.insertBefore(y,x),ne=n,P(),p(!0)}else if(t.parentNode===n){l=oe(t);var _=0,V,N=y.parentNode!==n,W=!pi(y.animated&&y.toRect||a,t.animated&&t.toRect||l,v),k=v?"top":"left",A=Kn(t,"top","top")||Kn(y,"top","top"),M=A?A.scrollTop:void 0;lt!==t&&(V=l[k],Ct=!1,Rt=!W&&i.invertSwap||N),_=_i(e,t,l,v,W?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,Rt,lt===t);var H;if(_!==0){var O=_e(y);do O-=_,H=ne.children[O];while(H&&(E(H,"display")==="none"||H===$))}if(_===0||H===t)return p(!1);lt=t,Vt=_;var C=t.nextElementSibling,S=!1;S=_===1;var F=Ft(Q,n,y,a,t,l,e,S);if(F!==!1)return(F===1||F===-1)&&(S=F===1),_n=!0,setTimeout(ki,30),b(),S&&!C?n.appendChild(y):t.parentNode.insertBefore(y,S?C:t),A&&Za(A,0,M-A.scrollTop),ne=y.parentNode,V!==void 0&&!Rt&&(Yt=Math.abs(V-oe(t)[k])),P(),p(!0)}if(n.contains(y))return p(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",Ge),z(document,"mousemove",Ge),z(document,"touchmove",Ge)},_offUpEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._onDrop),z(e,"touchend",this._onDrop),z(e,"pointerup",this._onDrop),z(e,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(ke=_e(y),$e=_e(y,t.draggable),ge("drop",this,{evt:e}),ne=y&&y.parentNode,ke=_e(y),$e=_e(y,t.draggable),R.eventCanceled){this._nulling();return}it=!1,Rt=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xn(this.cloneId),xn(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),St&&E(document.body,"user-select",""),E(y,"transform",""),e&&(bt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(Q===ne||de&&de.lastPutMode!=="clone")&&ee&&ee.parentNode&&ee.parentNode.removeChild(ee),y&&(this.nativeDraggable&&z(y,"dragend",this),hn(y),y.style["will-change"]="",bt&&!it&&be(y,de?de.options.ghostClass:this.options.ghostClass,!1),be(y,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),Q!==ne?(ke>=0&&(he({rootEl:ne,name:"add",toEl:ne,fromEl:Q,originalEvent:e}),he({sortable:this,name:"remove",toEl:ne,originalEvent:e}),he({rootEl:ne,name:"sort",toEl:ne,fromEl:Q,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),de&&de.save()):ke!==st&&ke>=0&&(he({sortable:this,name:"update",toEl:ne,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),R.active&&((ke==null||ke===-1)&&(ke=st,$e=xt),he({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ge("nulling",this),Q=y=ne=$=Je=ee=$t=Ye=We=De=bt=ke=$e=st=xt=lt=Vt=de=Ot=R.dragged=R.ghost=R.clone=R.active=null,Kt.forEach(function(e){e.checked=!0}),Kt.length=fn=vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),bi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,l=t.length,o=this.options;a<l;a++)n=t[a],Ie(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Vi(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(l,o){var i=a.children[o];Ie(i,this.options.draggable,a,!1)&&(t[l]=i)},this),n&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(a.removeChild(t[l]),a.appendChild(t[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ie(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=At.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&al(t)},destroy:function(){ge("destroy",this);var e=this.el;e[Se]=null,z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart),z(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jt.splice(Jt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ye){if(ge("hideClone",this),R.eventCanceled)return;E(ee,"display","none"),this.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee),Ye=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ye){if(ge("showClone",this),R.eventCanceled)return;y.parentNode==Q&&!this.options.group.revertClone?Q.insertBefore(ee,y):Je?Q.insertBefore(ee,Je):Q.appendChild(ee),this.options.group.revertClone&&this.animate(y,ee),E(ee,"display",""),Ye=!1}}};function bi(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ft(e,n,t,a,l,o,i,u){var r,d=e[Se],c=d.options.onMove,f;return window.CustomEvent&&!Be&&!Tt?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=n,r.from=e,r.dragged=t,r.draggedRect=a,r.related=l||n,r.relatedRect=o||oe(n),r.willInsertAfter=u,r.originalEvent=i,e.dispatchEvent(r),c&&(f=c.call(d,r,i)),f}function hn(e){e.draggable=!1}function ki(){_n=!1}function wi(e,n,t){var a=oe(ft(t.el,0,t.options,!0)),l=Ka(t.el),o=10;return n?e.clientX<l.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-o||e.clientY<a.bottom&&e.clientX<a.left}function Si(e,n,t){var a=oe(Fn(t.el,t.options.draggable)),l=Ka(t.el),o=10;return n?e.clientX>l.right+o||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+o||e.clientX>a.right&&e.clientY>a.top}function _i(e,n,t,a,l,o,i,u){var r=a?e.clientY:e.clientX,d=a?t.height:t.width,c=a?t.top:t.left,f=a?t.bottom:t.right,v=!1;if(!i){if(u&&Yt<d*l){if(!Ct&&(Vt===1?r>c+d*o/2:r<f-d*o/2)&&(Ct=!0),Ct)v=!0;else if(Vt===1?r<c+Yt:r>f-Yt)return-Vt}else if(r>c+d*(1-l)/2&&r<f-d*(1-l)/2)return xi(n)}return v=v||i,v&&(r<c+d*o/2||r>f-d*o/2)?r>c+d/2?1:-1:0}function xi(e){return _e(y)<_e(e)?1:-1}function Vi(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,a=0;t--;)a+=n.charCodeAt(t);return a.toString(36)}function Ci(e){Kt.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var a=n[t];a.checked&&Kt.push(a)}}function Lt(e){return setTimeout(e,0)}function xn(e){return clearTimeout(e)}on&&G(document,"touchmove",function(e){(R.active||it)&&e.cancelable&&e.preventDefault()});R.utils={on:G,off:z,css:E,find:Ja,is:function(e,n){return!!Ie(e,n,e,!1)},extend:si,throttle:Qa,closest:Ie,toggleClass:be,clone:el,index:_e,nextTick:Lt,cancelNextTick:xn,detectDirection:nl,getChild:ft};R.get=function(e){return e[Se]};R.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(R.utils=Te(Te({},R.utils),a.utils)),At.mount(a)})};R.create=function(e,n){return new R(e,n)};R.version=oi;var le=[],kt,Vn,Cn=!1,pn,gn,Qt,wt;function Di(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):t.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),na(),Ut(),ui()},nulling:function(){Qt=Vn=kt=Cn=wt=pn=gn=null,le.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,l=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(l,o);if(Qt=n,t||this.options.forceAutoScrollFallback||Tt||Be||St){yn(n,this.options,i,t);var u=Le(i,!0);Cn&&(!wt||l!==pn||o!==gn)&&(wt&&na(),wt=setInterval(function(){var r=Le(document.elementFromPoint(l,o),!0);r!==u&&(u=r,Ut()),yn(n,a.options,r,t)},10),pn=l,gn=o)}else{if(!this.options.bubbleScroll||Le(i,!0)===Ee()){Ut();return}yn(n,this.options,Le(i,!1),!1)}}},Fe(e,{pluginName:"scroll",initializeByDefault:!0})}function Ut(){le.forEach(function(e){clearInterval(e.pid)}),le=[]}function na(){clearInterval(wt)}var yn=Qa(function(e,n,t,a){if(n.scroll){var l=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=n.scrollSensitivity,u=n.scrollSpeed,r=Ee(),d=!1,c;Vn!==t&&(Vn=t,Ut(),kt=n.scroll,c=n.scrollFn,kt===!0&&(kt=Le(t,!0)));var f=0,v=kt;do{var h=v,g=oe(h),m=g.top,b=g.bottom,p=g.left,P=g.right,D=g.width,x=g.height,_=void 0,V=void 0,N=h.scrollWidth,W=h.scrollHeight,k=E(h),A=h.scrollLeft,M=h.scrollTop;h===r?(_=D<N&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),V=x<W&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(_=D<N&&(k.overflowX==="auto"||k.overflowX==="scroll"),V=x<W&&(k.overflowY==="auto"||k.overflowY==="scroll"));var H=_&&(Math.abs(P-l)<=i&&A+D<N)-(Math.abs(p-l)<=i&&!!A),O=V&&(Math.abs(b-o)<=i&&M+x<W)-(Math.abs(m-o)<=i&&!!M);if(!le[f])for(var C=0;C<=f;C++)le[C]||(le[C]={});(le[f].vx!=H||le[f].vy!=O||le[f].el!==h)&&(le[f].el=h,le[f].vx=H,le[f].vy=O,clearInterval(le[f].pid),(H!=0||O!=0)&&(d=!0,le[f].pid=setInterval(function(){a&&this.layer===0&&R.active._onTouchMove(Qt);var S=le[this.layer].vy?le[this.layer].vy*u:0,F=le[this.layer].vx?le[this.layer].vx*u:0;typeof c=="function"&&c.call(R.dragged.parentNode[Se],F,S,e,Qt,le[this.layer].el)!=="continue"||Za(le[this.layer].el,F,S)}.bind({layer:f}),24))),f++}while(n.bubbleScroll&&v!==r&&(v=Le(v,!1)));Cn=d}},30),il=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,l=e.activeSortable,o=e.dispatchSortableEvent,i=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var r=t||l;i();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);u(),r&&!r.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function Bn(){}Bn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=ft(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:il};Fe(Bn,{pluginName:"revertOnSpill"});function $n(){}$n.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:il};Fe($n,{pluginName:"removeOnSpill"});R.mount(new Di);R.mount($n,Bn);function Pi(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Ii(e){Mn()&&Ul(e)}function Ei(e){Mn()?It(e):Oe(e)}const aa=Symbol("cloneElement");function Ti(...e){var n,t;const a=(n=Mn())==null?void 0:n.proxy,l=e[0];let[,o,i]=e;Array.isArray(B(o))||(i=o,o=null);let u=null;const{immediate:r=!0,clone:d=Pi,customUpdate:c}=(t=B(i))!=null?t:{};function f(V){var N;V.item[aa]=d(B((N=B(o))==null?void 0:N[V.oldIndex]))}function v(V){const N=V.item[aa];Go(N)||(un(V.item),Wo(B(o),V.newDraggableIndex,N))}function h(V){const{from:N,item:W,oldIndex:k,oldDraggableIndex:A,pullMode:M,clone:H}=V;if(M==="clone"){Xn(N,W,k),un(H);return}Xo(B(o),A)}function g(V){if(c){c(V);return}const{from:N,item:W,oldIndex:k,newIndex:A}=V;if(un(W),Xn(N,W,k),ha(o)){const M=[...B(o)];o.value=qn(M,k,A);return}qn(B(o),k,A)}const m={onUpdate:g,onStart:f,onAdd:v,onRemove:h};function b(V){const N=B(l);return V||(V=Jo(N)?Ko(N,a?.$el):N),V&&!ei(V)&&(V=V.$el),V||jo("Root element not found"),V}function p(){var V;const N=(V=B(i))!=null?V:{},W=za(N,["immediate","clone"]);return Zo(o===null?{}:m,W)}const P=V=>{V=b(V),u&&D.destroy(),u=new R(V,p())};se(()=>i,()=>{u&&ti(p(),(V,N)=>{u?.option(V,N)})},{deep:!0});const D={option:(V,N)=>u?.option(V,N),destroy:()=>{u?.destroy(),u=null},save:()=>u?.save(),toArray:()=>u?.toArray(),closest:(...V)=>u?.closest(...V)},x=()=>D?.option("disabled",!0),_=()=>D?.option("disabled",!1);return Ei(()=>{r&&P()}),Ii(D.destroy),rt({start:P,pause:x,resume:_},D)}const Dn=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Ai=["animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Dn.map(e=>`on${e.replace(/^\S/,n=>n.toUpperCase())}`)],Mi=$l({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Ai,emits:["update:modelValue",...Dn],setup(e,{slots:n,emit:t,expose:a,attrs:l}){const o=Dn.reduce((c,f)=>{const v=`on${f.replace(/^\S/,h=>h.toUpperCase())}`;return c[v]=h=>t(f,h),c},{}),i=T(()=>{const c=Yl(e),f=za(c,["modelValue"]),v=Object.entries(f).reduce((h,[g,m])=>{const b=B(m);return b!==void 0&&(h[g]=b),h},{});return rt(rt({},o),qo(rt(rt({},l),v)))}),u=T({get:()=>e.modelValue,set:c=>t("update:modelValue",c)}),r=Y(),d=Ze(Ti(e.target||r,u,i));return a(d),()=>{if(n.default)return Ll(e.tag||"div",{ref:r},n.default(d))}}}),Oi=["innerHTML"],Ri={__name:"EditableProcedureTimeline",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=Hl("markdownit"),t=An(),a=jl(e,"modelValue");function l(r){return t.getDataObjectById(r.technique)===void 0?`(Label not found for technique ${r.technique})`:t.getDataObjectById(r.technique)?.label}const o=Y();function i(r,d){a.value[d]=r,o.value=null}function u(r){a.value.splice(r,1)}return(r,d)=>(U(),Z(B(Mi),{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value=c),handle:".handle",animation:150,class:"list",ghostClass:"ghost"},{default:w(()=>[(U(!0),xe(ve,null,jt(a.value,(c,f)=>(U(),xe("div",{key:f+c.tactic+c.technique+c.description,"dot-color":"blue",size:"medium",width:"100%",class:"mb-3 pl-8 item"},[f===o.value?(U(),Z(Ua,{key:0,editProcedure:c,editIndex:o.value,onCancel:d[0]||(d[0]=v=>o.value=null),onUpdate:i},null,8,["editProcedure","editIndex"])):(U(),Z(ze,{key:1,title:l(c),subtitle:B(t).getDataObjectById(c.tactic).name,variant:"outlined",style:{border:"solid 1px","border-color":"lightgray"}},{append:w(()=>[X("div",{style:ct({cursor:o.value||a.value.length===1?"not-allowed":"grab"})},[s(Ue,{style:ct({"pointer-events":o.value||a.value.length===1?"none":""}),class:"handle",color:o.value||a.value.length===1?"grey-lighten-1":"grey-darken-3"},{default:w(()=>[q(" mdi-arrow-up-down ")]),_:1},8,["style","color"])],4)]),default:w(()=>[c.description?(U(),Z(Dt,{key:0,innerHTML:B(n).render(c.description)},null,8,["innerHTML"])):we("",!0),s(et,null,{default:w(()=>[s(Ne),s(K,{icon:"mdi-pencil",color:"blue",onClick:v=>o.value=f},null,8,["onClick"]),s(an,{width:"500"},{activator:w(({props:v})=>[s(K,L(v,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:v})=>[s(ze,null,{default:w(()=>[s(zt,{class:"text-wrap"},{default:w(()=>[q(Me(`Delete "${l(c)}"?`),1)]),_:2},1024),s(Dt,null,{default:w(()=>[X("div",{innerHTML:c.description},null,8,Oi)]),_:2},1024),s(et,null,{default:w(()=>[s(Ne),s(K,{text:"Cancel",onClick:h=>v.value=!1},null,8,["onClick"]),s(K,{text:"Delete",color:"red",onClick:h=>{v.value=!1,u(f)}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle"]))]))),128))]),_:1},8,["modelValue"]))}},Ni=pa(Ri,[["__scopeId","data-v-5db3b554"]]),rl={__name:"AddSource",props:["sources","editSource","editIndex"],emits:["submit","cancel","update"],setup(e,{emit:n}){const t=n,{sources:a,editSource:l,editIndex:o}=e,i=Y(!1),u=Ze({title:"",url:""});It(()=>{l&&(u.title=l.title,u.url=l.url)});const r=[v=>{if(!v)return!0;if(!v.startsWith("http://")&&!v.startsWith("https://"))return"URL does not start with http(s)://";if(/\s/.test(v.trim()))return"URL should not contain spaces";try{return new URL(v),!0}catch{return"URL is not valid"}}],d=Y(!1);function c(){!u.title&&!u.url?d.value=!0:i.value&&l?t("update",u,o):i.value&&t("submit",u)}function f(){return l?o+1:a.length+1}return(v,h)=>(U(),Z(ln,{onSubmit:h[4]||(h[4]=tn(()=>{},["prevent"])),modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=g=>i.value=g)},{default:w(()=>[s(ze,{variant:"outlined",title:`Source ${f()}`},{default:w(()=>[s(Ke,{modelValue:u.title,"onUpdate:modelValue":h[0]||(h[0]=g=>u.title=g),label:"Description",variant:"outlined",hint:"Brief description (optional)","prepend-inner-icon":"mdi-file-edit-outline",class:"pt-6 px-6 pb-3"},null,8,["modelValue"]),s(Ke,{modelValue:u.url,"onUpdate:modelValue":h[1]||(h[1]=g=>u.url=g),modelModifiers:{trim:!0},label:"URL",variant:"outlined",hint:"Link (optional)","prepend-inner-icon":"mdi-link",class:"px-6",rules:r},null,8,["modelValue"]),s(et,null,{default:w(()=>[s(Ne),s(K,{onClick:h[2]||(h[2]=g=>v.$emit("cancel"))},{default:w(()=>[q("Cancel")]),_:1}),s(K,{type:"submit",color:"green",onClick:h[3]||(h[3]=g=>c())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),d.value?(U(),Z(qt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(" Please complete at least one field ")]),_:1})):we("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"]))}},Fi={key:0},Bi={key:1},$i=["href"],Yi={__name:"SourceList",props:["sources"],emits:["updateSource","delete"],setup(e,{emit:n}){const t=n,a=Y();function l(i,u){t("updateSource",i,u),a.value=null}function o(i){t("delete",i),a.value>i&&a.value--}return(i,u)=>(U(),Z(Ma,null,{default:w(()=>[(U(!0),xe(ve,null,jt(e.sources,(r,d)=>(U(),xe("div",{key:d},[d===a.value?(U(),Z(rl,{key:0,editSource:r,editIndex:a.value,onCancel:u[0]||(u[0]=c=>a.value=null),onUpdate:l},null,8,["editSource","editIndex"])):(U(),Z(Ht,{key:1,value:d},{append:w(()=>[s(Ue,{icon:"mdi-pencil",color:"blue",class:"mr-5",onClick:c=>a.value=d},null,8,["onClick"]),s(an,{width:"500"},{activator:w(({props:c})=>[s(Ue,L(c,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:c})=>[s(ze,null,{default:w(()=>[s(zt,{class:"text-wrap"},{default:w(()=>[q(" Delete "+Me(r.title||r.url)+"? ",1)]),_:2},1024),s(et,null,{default:w(()=>[s(Ne),s(K,{text:"Cancel",onClick:f=>c.value=!1},null,8,["onClick"]),s(K,{text:"Delete",color:"red",onClick:f=>{c.value=!1,o(d)}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:w(()=>[q(Me(d+1)+". ",1),r.url?(U(),xe("span",Bi,[X("a",{href:r.url,target:"_blank"},Me(r.title||r.url),9,$i),s(Ue,{icon:"mdi-open-in-new",size:"x-small",class:"ml-1"})])):(U(),xe("span",Fi,Me(r.title),1))]),_:2},1032,["value"]))]))),128))]),_:1}))}},sl=ue({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),la=ce()({name:"VDatePickerControls",props:sl(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:t}=n;const a=T(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=T(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=T(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=T(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){t("click:prev")}function r(){t("click:next")}function d(){t("click:year")}function c(){t("click:month")}return pe(()=>s("div",{class:["v-date-picker-controls"]},[s(K,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:c},null),s(K,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),s(Ne,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(K,{disabled:o.value,icon:e.prevIcon,variant:"text",onClick:u},null),s(K,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),Li=ue({appendIcon:String,color:String,header:String,transition:String,onClick:ql()},"VDatePickerHeader"),oa=ce()({name:"VDatePickerHeader",props:Li(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:t,slots:a}=n;const{backgroundColorClasses:l,backgroundColorStyles:o}=On(e,"color");function i(){t("click")}function u(){t("click:append")}return pe(()=>{const r=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value],style:o.value,onClick:i},[a.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),r&&s(zl,{key:"content",name:e.transition},{default:()=>[s("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),d&&s("div",{class:"v-date-picker-header__append"},[a.append?s(He,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):s(K,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Ui=ue({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function Hi(e){const n=Et(),t=fe(e,"modelValue",[],v=>ut(v)),a=T(()=>e.displayValue?n.date(e.displayValue):t.value.length>0?n.date(t.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),l=fe(e,"year",void 0,v=>{const h=v!=null?Number(v):n.getYear(a.value);return n.startOfYear(n.setYear(n.date(),h))},v=>n.getYear(v)),o=fe(e,"month",void 0,v=>{const h=v!=null?Number(v):n.getMonth(a.value),g=n.setYear(n.startOfMonth(n.date()),n.getYear(l.value));return n.setMonth(g,h)},v=>n.getMonth(v)),i=T(()=>{const v=n.getWeekArray(o.value),h=v.flat(),g=6*7;if(h.length<g){const m=h[h.length-1];let b=[];for(let p=1;p<=g-h.length;p++)b.push(n.addDays(m,p)),p%7===0&&(v.push(b),b=[])}return v});function u(v,h){return v.filter(g=>e.weekdays.includes(n.toJsDate(g).getDay())).map((g,m)=>{const b=n.toISO(g),p=!n.isSameMonth(g,o.value),P=n.isSameDay(g,n.startOfMonth(o.value)),D=n.isSameDay(g,n.endOfMonth(o.value)),x=n.isSameDay(g,o.value);return{date:g,isoDate:b,formatted:n.format(g,"keyboardDate"),year:n.getYear(g),month:n.getMonth(g),isDisabled:f(g),isWeekStart:m%7===0,isWeekEnd:m%7===6,isToday:n.isSameDay(g,h),isAdjacent:p,isHidden:p&&!e.showAdjacentMonths,isStart:P,isSelected:t.value.some(_=>n.isSameDay(g,_)),isEnd:D,isSame:x,localized:n.format(g,"dayOfMonth")}})}const r=T(()=>{const v=n.startOfWeek(t.value),h=[];for(let b=0;b<=6;b++)h.push(n.addDays(v,b));const g=h,m=n.date();return u(g,m)}),d=T(()=>{const v=i.value.flat(),h=n.date();return u(v,h)}),c=T(()=>i.value.map(v=>v.length?Xl(n,v[0]):null));function f(v){if(e.disabled)return!0;const h=n.date(v);return e.min&&n.isAfter(n.date(e.min),h)||e.max&&n.isAfter(h,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(g=>n.isSameDay(n.date(g),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:d,daysInWeek:r,genDays:u,model:t,weeksInMonth:i,weekNumbers:c}}const ul=ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Ui()},"VDatePickerMonth"),ia=ce()({name:"VDatePickerMonth",props:ul(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Y(),{daysInMonth:o,model:i,weekNumbers:u}=Hi(e),r=Et(),d=Ae(),c=Ae(),f=T(()=>{const m=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=m});function v(m){const b=r.startOfDay(m);if(!d.value)d.value=b,i.value=[d.value];else if(c.value)d.value=m,c.value=void 0,i.value=[d.value];else{if(r.isSameDay(m,d.value)){d.value=void 0,i.value=[];return}else r.isBefore(m,d.value)?(c.value=d.value,d.value=b):c.value=b;const p=r.getDiff(c.value,d.value,"days"),P=[d.value];for(let D=1;D<p;D++){const x=r.addDays(d.value,D);P.push(x)}P.push(c.value),i.value=P}}function h(m){const b=i.value.findIndex(p=>r.isSameDay(p,m));if(b===-1)i.value=[...i.value,m];else{const p=[...i.value];p.splice(b,1),i.value=p}}function g(m){e.multiple==="range"?v(m):e.multiple?h(m):i.value=[m]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q(" ")]),u.value.map(m=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[m]))]),s("div",{ref:l,class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays().map(m=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[m])),o.value.map((m,b)=>{const p={props:{onClick:()=>g(m.date)},item:m,i:b};return f.value&&!m.isSelected&&(m.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":m.isAdjacent,"v-date-picker-month__day--hide-adjacent":m.isHidden,"v-date-picker-month__day--selected":m.isSelected,"v-date-picker-month__day--week-end":m.isWeekEnd,"v-date-picker-month__day--week-start":m.isWeekStart}],"data-v-date":m.isDisabled?void 0:m.isoDate},[(e.showAdjacentMonths||!m.isAdjacent)&&s(He,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(m.isSelected||m.isToday)&&!m.isDisabled?e.color:void 0,disabled:m.isDisabled,icon:!0,ripple:!1,text:m.localized,variant:m.isDisabled?m.isToday?"outlined":"text":m.isToday&&!m.isSelected?"outlined":"flat",onClick:()=>g(m.date)}}},{default:()=>[a.day?.(p)??s(K,p.props,null)]})])})])])}}),cl=ue({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),ra=ce()({name:"VDatePickerMonths",props:cl(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Et(),o=fe(e,"modelValue"),i=T(()=>{let u=l.startOfYear(l.date());return Oa(12).map(r=>{const d=l.format(u,"monthShort");return u=l.getNextMonth(u),{text:d,value:r}})});return En(()=>{o.value=o.value??l.getMonth(l.date())}),pe(()=>s("div",{class:"v-date-picker-months",style:{height:Tn(e.height)}},[s("div",{class:"v-date-picker-months__content"},[i.value.map((u,r)=>{const d={active:o.value===r,color:o.value===r?e.color:void 0,rounded:!0,text:u.text,variant:o.value===u.value?"flat":"text",onClick:()=>c(r)};function c(f){if(o.value===f){t("update:modelValue",o.value);return}o.value=f}return a.month?.({month:u,i:r,props:d})??s(K,L({key:"month"},d),null)})])])),{}}}),dl=ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),sa=ce()({name:"VDatePickerYears",props:dl(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Et(),o=fe(e,"modelValue"),i=T(()=>{const r=l.getYear(l.date());let d=r-100,c=r+52;e.min&&(d=l.getYear(l.date(e.min))),e.max&&(c=l.getYear(l.date(e.max)));let f=l.startOfYear(l.date());return f=l.setYear(f,d),Oa(c-d+1,d).map(v=>{const h=l.format(f,"year");return f=l.setYear(f,l.getYear(f)+1),{text:h,value:v}})});En(()=>{o.value=o.value??l.getYear(l.date())});const u=Y();return It(async()=>{await Oe(),u.value?.$el.scrollIntoView({block:"center"})}),pe(()=>s("div",{class:"v-date-picker-years",style:{height:Tn(e.height)}},[s("div",{class:"v-date-picker-years__content"},[i.value.map((r,d)=>{const c={ref:o.value===r.value?u:void 0,active:o.value===r.value,color:o.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:o.value===r.value?"flat":"text",onClick:()=>{if(o.value===r.value){t("update:modelValue",o.value);return}o.value=r.value}};return a.year?.({year:r,i:d,props:c})??s(K,L({key:"month"},c),null)})])])),{}}}),ji=ga("v-picker-title"),fl=ue({color:String,...Wl(),...Pn(),...ya(),...ba(),...ka(),...wa(),...Sa(),..._a(),...xa()},"VSheet"),ua=ce()({name:"VSheet",props:fl(),setup(e,n){let{slots:t}=n;const{themeClasses:a}=Va(e),{backgroundColorClasses:l,backgroundColorStyles:o}=On(In(e,"color")),{borderClasses:i}=Gl(e),{dimensionStyles:u}=Ca(e),{elevationClasses:r}=Da(e),{locationStyles:d}=Pa(e),{positionClasses:c}=Ia(e),{roundedClasses:f}=Ea(e);return pe(()=>s(e.tag,{class:["v-sheet",a.value,l.value,i.value,r.value,c.value,f.value,e.class],style:[o.value,u.value,d.value,e.style]},t)),{}}}),vl=ue({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...fl()},"VPicker"),ca=ce()({name:"VPicker",props:vl(),setup(e,n){let{slots:t}=n;const{backgroundColorClasses:a,backgroundColorStyles:l}=On(In(e,"color"));return pe(()=>{const o=ua.filterProps(e),i=!!(e.title||t.title);return s(ua,L(o,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&s("div",{key:"header",class:[a.value],style:[l.value]},[i&&s(ji,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&s("div",{class:"v-picker__header"},[t.header()])]),s("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&s(He,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),zi=ue({header:{type:String,default:"$vuetify.datePicker.header"},...sl(),...ul(),...Qe(cl(),["modelValue"]),...Qe(dl(),["modelValue"]),...vl({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),qi=ce()({name:"VDatePicker",props:zi(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Et(),{t:o}=en(),i=fe(e,"modelValue",void 0,k=>ut(k),k=>e.multiple?k:k[0]),u=fe(e,"viewMode"),r=T(()=>{const k=l.date(i.value?.[0]);return k&&l.isValid(k)?k:l.date()}),d=Y(Number(e.month??l.getMonth(l.startOfMonth(r.value)))),c=Y(Number(e.year??l.getYear(l.startOfYear(l.setMonth(r.value,d.value))))),f=Ae(!1),v=T(()=>e.multiple&&i.value.length>1?o("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&l.isValid(i.value[0])?l.format(i.value[0],"normalDateWithWeekday"):o(e.header)),h=T(()=>l.format(l.date(new Date(c.value,d.value,1)),"monthAndYear")),g=T(()=>`date-picker-header${f.value?"-reverse":""}-transition`),m=T(()=>{const k=l.date(e.min);return e.min&&l.isValid(k)?k:null}),b=T(()=>{const k=l.date(e.max);return e.max&&l.isValid(k)?k:null}),p=T(()=>{if(e.disabled)return!0;const k=[];if(u.value!=="month")k.push("prev","next");else{let A=l.date();if(A=l.setYear(A,c.value),A=l.setMonth(A,d.value),m.value){const M=l.addDays(l.startOfMonth(A),-1);l.isAfter(m.value,M)&&k.push("prev")}if(b.value){const M=l.addDays(l.endOfMonth(A),1);l.isAfter(M,b.value)&&k.push("next")}}return k});function P(){d.value<11?d.value++:(c.value++,d.value=0,W(c.value)),N(d.value)}function D(){d.value>0?d.value--:(c.value--,d.value=11,W(c.value)),N(d.value)}function x(){u.value="month"}function _(){u.value=u.value==="months"?"month":"months"}function V(){u.value=u.value==="year"?"month":"year"}function N(k){u.value==="months"&&_(),t("update:month",k)}function W(k){u.value==="year"&&V(),t("update:year",k)}return se(i,(k,A)=>{const M=l.date(ut(k)[0]),H=l.date(ut(A)[0]);f.value=l.isBefore(M,H)}),pe(()=>{const k=ca.filterProps(e),A=la.filterProps(e),M=oa.filterProps(e),H=ia.filterProps(e),O=Qe(ra.filterProps(e),["modelValue"]),C=Qe(sa.filterProps(e),["modelValue"]),S={header:v.value,transition:g.value};return s(ca,L(k,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>a.title?.()??s("div",{class:"v-date-picker__title"},[o(e.title)]),header:()=>a.header?s(He,{defaults:{VDatePickerHeader:{...S}}},{default:()=>[a.header?.(S)]}):s(oa,L({key:"header"},M,S,{onClick:u.value!=="month"?x:void 0}),{...a,default:void 0}),default:()=>s(ve,null,[s(la,L(A,{disabled:p.value,text:h.value,"onClick:next":P,"onClick:prev":D,"onClick:month":_,"onClick:year":V}),null),s(Ra,{hideOnLeave:!0},{default:()=>[u.value==="months"?s(ra,L({key:"date-picker-months"},O,{modelValue:d.value,"onUpdate:modelValue":[F=>d.value=F,N],min:m.value,max:b.value}),null):u.value==="year"?s(sa,L({key:"date-picker-years"},C,{modelValue:c.value,"onUpdate:modelValue":[F=>c.value=F,W],min:m.value,max:b.value}),null):s(ia,L({key:"date-picker-month"},H,{modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,month:d.value,"onUpdate:month":[F=>d.value=F,N],year:c.value,"onUpdate:year":[F=>c.value=F,W],min:m.value,max:b.value}),null)]})]),actions:a.actions})}),{}}}),Xi=ue({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...Jl()},"VHover"),da=ce()({name:"VHover",props:Xi(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=fe(e,"modelValue"),{runOpenDelay:l,runCloseDelay:o}=Kl(e,i=>!e.disabled&&(a.value=i));return()=>t.default?.({isHovering:a.value,props:{onMouseenter:l,onMouseleave:o}})}}),Wi=ue({...vo({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Gi=ce()({name:"VRadio",props:Wi(),setup(e,n){let{slots:t}=n;return pe(()=>s(Ya,L(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),Ji=ue({height:{type:[Number,String],default:"auto"},...nn(),...Qe(mo(),["multiple"]),trueIcon:{type:kn,default:"$radioOn"},falseIcon:{type:kn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ki=ce()({name:"VRadioGroup",inheritAttrs:!1,props:Ji(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=fa(),o=T(()=>e.id||`radio-group-${l}`),i=fe(e,"modelValue");return pe(()=>{const[u,r]=Zt(t),d=je.filterProps(e),c=Ya.filterProps(e),f=a.label?a.label({label:e.label,props:{for:o.value}}):e.label;return s(je,L({class:["v-radio-group",e.class],style:e.style},u,d,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:o.value}),{...a,default:v=>{let{id:h,messagesId:g,isDisabled:m,isReadonly:b}=v;return s(ve,null,[f&&s(ho,{id:h.value},{default:()=>[f]}),s(po,L(c,{id:h.value,"aria-describedby":g.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:m.value,readonly:b.value,"aria-labelledby":f?h.value:void 0,multiple:!1},r,{modelValue:i.value,"onUpdate:modelValue":p=>i.value=p}),a)])}})}),{}}}),Qi=X("p",{class:"text-h6 mb-0 mt-6"}," Details ",-1),Zi=X("p",{class:"text-body-2 text-grey"}," All fields are required. ",-1),er={key:0},tr={class:"d-flex"},nr={key:0,class:"ml-6 text-caption pt-1"},ar=X("p",{class:"text-h6 mb-0 mt-6"}," Procedure ",-1),lr={class:"text-body-2 text-grey"},or=X("p",{class:"text-h6 mb-0 mt-12"}," References ",-1),ir=X("p",{class:"text-body-2 text-grey mb-0"}," Optionally list sources for this case study. ",-1),rr=X("p",{class:"text-h6 mb-0 mt-12"}," Download ",-1),sr=X("p",{class:"text-body-2 text-grey"},[q(" Download the case study data file, specifying the filename here. Once downloaded, email the file to "),X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")],-1),ur=X("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org",-1),cr="Create a Case Study",gr={__name:"BuildCaseStudyView",setup(e){const n=An(),t=Y([]);a();async function a(){try{const C=await(await fetch(Ql("/content/case-study-legend.yaml"))).text(),S=Zl.load(C).legend;["case_study_type","name","target","actor","reporter","incident_date","summary"].forEach(ie=>{t.value.push(S[ie])})}catch(O){console.error("Error fetching YAML file:",O)}}const l=Y();let o=Ze({procedure:[],references:[]});const i=["name","target","actor","reporter","incident_date"],u=Y(""),r=T(()=>!!(o["case-study-type"]||o["case-study-type"]===void 0&&!v.value)),d=Y(),c=Y(!1),f=T(()=>d.value?d.value.toISOString().split("T")[0]:"");se(f,()=>{o["incident-date"]=new Date(d.value)}),se(d,()=>{o["incident-date-granularity"]="DATE"}),se(()=>o["case-study-type"],()=>{v.value&&V.value.validate()});const v=Y(!1);function h(O){return typeof O=="string"&&O.trim()?!0:"Required"}function g(O){o.procedure.push(O),m.value=!0}const m=Y(!1),b=Y(null),p=Y(!1);function P(O){o.references.push(O),p.value=!1}function D(O){o.references.splice(O,1)}function x(O,C){o.references[C]=O}const _=Y(!1),V=Y(null),N=Y(!1);let W,k=Ze({});function A(){if(v.value=!0,o.procedure.length===0&&b.value.addProcedureStep(),l.value&&o.procedure.length>0){let O={study:o,meta:k};o["case-study-type"]==="exercise"&&o.reporter!==void 0&&delete O.study.reporter,O.meta=eo(O,bn.$version),to(O,u.value),_.value&&M(o),N.value=!0,clearTimeout(W),W=setTimeout(()=>{N.value=!1},"3000")}}async function M(O){for(const C of O.procedure){let S=await n.getDataObjectById(C.technique);S===void 0&&(S={label:`Technique not found (${C.technique})`}),C.techniqueObject=S}go(O),O.procedure.forEach(C=>{delete C.techniqueObject})}function H(O,C){m.value=!0,u.value=C,Object.keys(O.study).forEach(S=>{S==="incident-date"?d.value=new Date(O.study["incident-date"]):o[S]=O.study[S]}),k=O.meta}return(O,C)=>(U(),xe(ve,null,[s(ot,{class:"align-start"},{default:w(()=>[s(yo,{pageTitle:cr}),s(Nn,{class:"ml-2 mt-3"},{default:w(()=>[q(Me(`v${B(bn).$version}`),1)]),_:1})]),_:1}),s(ot,null,{default:w(()=>[s(Co,{onSubmit:H}),s(Ne),s(Ro)]),_:1}),Qi,Zi,s(ln,{onSubmit:C[12]||(C[12]=tn(()=>{},["prevent"])),modelValue:l.value,"onUpdate:modelValue":C[13]||(C[13]=S=>l.value=S),ref_key:"mainForm",ref:V},{default:w(()=>[(U(!0),xe(ve,null,jt(t.value,S=>(U(),xe("div",{key:S.name},[S.name==="Case Study Type"?(U(),xe("div",er,[s(da,null,{default:w(({isHovering:F,props:ie})=>[s(ze,L(ie,{variant:"outlined",class:"mb-0",subtitle:"Select case study type",height:"120",style:[F&&r.value?{"border-color":"#424242"}:{"border-color":"#9E9E9E"},r.value?{}:{"border-color":"#b00020"}]}),{default:w(()=>[s(Ki,{modelValue:B(o)["case-study-type"],"onUpdate:modelValue":C[0]||(C[0]=te=>B(o)["case-study-type"]=te),"prepend-icon":S.icon,density:"compact",class:"pl-4 pt-3",rules:[h],"hide-details":!0},{default:w(()=>[(U(!0),xe(ve,null,jt(S.options,te=>(U(),Z(ot,{key:te.name},{default:w(()=>[s(da,null,{default:w(({isHovering:Ve,props:Ce})=>[X("div",tr,[s(Gi,L(Ce,{label:te.name,value:te.name.toLowerCase()}),null,16,["label","value"]),Ve?(U(),xe("div",nr,[s(Ue,null,{default:w(()=>[q("mdi-menu-right")]),_:1}),q(" "+Me(te.description),1)])):we("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon","rules"])]),_:2},1040,["style"])]),_:2},1024),X("div",{style:ct({visibility:r.value?"hidden":"visible",color:"#c13951"}),class:"ml-4 mt-1 mb-3 text-caption font-weight-medium"}," Required ",4)])):we("",!0),i.includes(S.name.toLowerCase())?(U(),Z(Ke,{key:1,modelValue:B(o)[S.name.toLowerCase()],"onUpdate:modelValue":F=>B(o)[S.name.toLowerCase()]=F,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:S.name==="Reporter"&&B(o)["case-study-type"]!=="incident"?[]:[h],disabled:S.name==="Reporter"&&B(o)["case-study-type"]!=="incident",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules","disabled"])):we("",!0),S.name==="Summary"?(U(),Z(La,{key:2,modelValue:B(o)[S.name.toLowerCase()],"onUpdate:modelValue":F=>B(o)[S.name.toLowerCase()]=F,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:[h]},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules"])):we("",!0),S.name==="Incident Date"?(U(),Z(Aa,{key:3,"close-on-content-click":!1,modelValue:c.value,"onUpdate:modelValue":C[4]||(C[4]=F=>c.value=F)},{activator:w(({props:F})=>[s(Ke,L(F,{modelValue:f.value,"onUpdate:modelValue":C[1]||(C[1]=ie=>f.value=ie),variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,class:"mb-3",readonly:"",rules:[h]}),null,16,["modelValue","label","prepend-inner-icon","hint","rules"])]),default:w(()=>[s(qi,{modelValue:d.value,"onUpdate:modelValue":[C[2]||(C[2]=F=>d.value=F),C[3]||(C[3]=F=>c.value=!1)],max:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10)},null,8,["modelValue","max"])]),_:2},1032,["modelValue"])):we("",!0)]))),128)),ar,X("p",lr,[q(" Construct a timeline of the incident, mapped to MITRE ATLAS™ techniques. "),X("span",{style:ct(B(o).procedure.length===0&&v.value?"color: #FF5252":"")},"Add at least one step. ",4)]),B(o).procedure.length>0?(U(),Z(Ni,{key:0,modelValue:B(o).procedure,"onUpdate:modelValue":C[5]||(C[5]=S=>B(o).procedure=S)},null,8,["modelValue"])):we("",!0),m.value?we("",!0):(U(),Z(Ua,{key:1,ref_key:"procedureForm",ref:b,onSubmitProcedureStep:g,onUpdateShowAddNewStep:C[6]||(C[6]=S=>m.value=!0),existingProcedures:B(o).procedure},null,8,["existingProcedures"])),X("div",{style:ct({visibility:B(o).procedure.length===0&&v.value&&!m.value?"visible":"hidden",color:"#c13951"}),class:"ml-4 mb-3 text-caption font-weight-medium"}," At least one procedure step is required. ",4),m.value?(U(),Z(K,{key:2,"prepend-icon":"mdi-plus",onClick:C[7]||(C[7]=S=>m.value=!1)},{default:w(()=>[q(" Add New Step ")]),_:1})):we("",!0),or,ir,s(Yi,{sources:B(o).references,onDelete:D,onUpdateSource:x},null,8,["sources"]),p.value?(U(),Z(rl,{key:3,sources:B(o).references,onCancel:C[8]||(C[8]=S=>p.value=!1),onSubmit:P},null,8,["sources"])):(U(),Z(K,{key:4,"prepend-icon":"mdi-plus",onClick:C[9]||(C[9]=S=>p.value=!0)},{default:w(()=>[q(" Add New Source ")]),_:1})),rr,sr,s(ot,null,{default:w(()=>[s(wn,null,{default:w(()=>[s(Ke,{modelValue:u.value,"onUpdate:modelValue":C[10]||(C[10]=S=>u.value=S),variant:"outlined",label:"Case Study Filename","prepend-inner-icon":"mdi-file-download",hint:"Filename of the case study. The .yaml extension will be auto-applied.",rules:[h],class:"mb-3",clearable:""},null,8,["modelValue","rules"])]),_:1}),s(ko,{label:"Also download as PowerPoint",modelValue:_.value,"onUpdate:modelValue":C[11]||(C[11]=S=>_.value=S),class:"ml-6"},null,8,["modelValue"])]),_:1}),s(ot,{class:"align-center"},{default:w(()=>[s(K,{type:"submit",color:"blue","prepend-icon":"mdi-download",onClick:A},{default:w(()=>[q(" Download Case Study ")]),_:1}),v.value&&(l.value===!1||B(o).procedure.length===0)?(U(),Z(qt,{key:0,icon:"mdi-alert",color:"red-lighten-4",density:"compact",class:"ml-6"},{default:w(()=>[q(" Please address any errors above. ")]),_:1})):we("",!0),s(Ra,{class:"pb-0"},{default:w(()=>[N.value?(U(),Z(qt,{key:0,icon:"mdi-check-circle-outline",color:"green-lighten-5",density:"compact",class:"ml-6 text-green"},{default:w(()=>[q(" Your case study has been downloaded! Email your yaml file to "),ur]),_:1})):we("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{gr as default};
