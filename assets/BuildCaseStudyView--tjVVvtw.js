import{N as fe,O as ce,ax as me,b9 as fa,f as M,T as ye,ba as en,g as u,J as L,bb as Qe,bc as tl,r as U,bd as va,aL as ue,be as Bn,bf as Et,bg as nl,bh as al,aI as Oe,b6 as ft,bi as ll,ay as Dn,bj as Yn,aR as ut,F as se,bk as ma,Y as ha,D as Ze,c as Z,o as $,w,aY as tn,d as q,b as z,v as Ie,t as F,bl as bn,au as Ne,j as Q,bm as pa,bn as ol,bo as rl,bp as il,bq as ul,_ as ga,p as sl,k as cl,aA as Me,br as dl,bs as fl,bt as vl,bu as Un,L as He,bv as ml,b2 as ya,G as ba,E as qt,bw as hl,bx as pl,by as gl,aJ as Pn,bz as It,bA as yl,aO as En,aM as bl,a1 as $n,a6 as kl,bB as wl,u as In,m as st,a as pe,h as Ge,i as kn,al as Sl,bC as _l,bD as xl,bE as Tn,bF as Vl,z as Cl,bG as Dl,q as ge,s as St,a5 as An,bH as Pl,aZ as El,bI as Tt,bJ as Il,aC as ka,bK as Tl,Q as Al,S as wa,bL as Ml,b7 as Ol,a8 as Rl,bM as Nl,bN as Fl,a9 as Bl,U as Yl,W as Ul,aa as $l,bO as Ll,bP as Hl,ac as jl,b8 as ql,aG as zl,bQ as Sa,bR as Wl,bS as Xl,a3 as Ln,A as Gl,B as Jl,bT as Kl,b1 as Ql}from"./index-UwoAzBM5.js";import{c as Mn,d as je,b as wn,e as nn,f as Zl,g as _a,h as xa,i as Va,j as Ca,k as eo,l as to,n as no,u as ao,o as lo,a as Ke,p as oo,m as ro,q as io,r as uo,s as Da,t as so,v as co,w as fo,x as vo}from"./filter-C_LfkRD1.js";import{V as Fe,b as Pt,c as et,a as zt}from"./VCard-BJ14amSA.js";import{V as On}from"./VChip-B-d2t4vb.js";import{V as Wt}from"./VAlert-CVOr7_W6.js";import{m as mo}from"./powerpointFunctions-DrHSSCBh.js";import{_ as ho}from"./PageSectionTitle.vue_vue_type_script_setup_true_lang-CffjYsZU.js";const po=ce({...nn(),...Qe(Zl(),["inline"])},"VCheckbox"),go=fe()({name:"VCheckbox",inheritAttrs:!1,props:po(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=me(e,"modelValue"),{isFocused:o,focus:r,blur:s}=Mn(e),i=fa(),d=M(()=>e.id||`checkbox-${i}`);return ye(()=>{const[c,f]=en(t),v=je.filterProps(e),h=wn.filterProps(e);return u(je,L({class:["v-checkbox",e.class]},c,v,{modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,id:d.value,focused:o.value,style:e.style}),{...a,default:p=>{let{id:m,messagesId:k,isDisabled:g,isReadonly:B,isValid:V}=p;return u(wn,L(h,{id:m.value,"aria-describedby":k.value,disabled:g.value,readonly:B.value},f,{error:V.value===!1,modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,onFocus:r,onBlur:s}),a)}})}),{}}}),yo=ce({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...nl({origin:"center center",scrollStrategy:"block",transition:{component:al},zIndex:2400})},"VDialog"),an=fe()({name:"VDialog",props:yo(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{scopeId:l}=tl(),o=U();function r(i){const d=i.relatedTarget,c=i.target;if(d!==c&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(c)&&!o.value.contentEl.contains(c)){const f=ll(o.value.contentEl);if(!f.length)return;const v=f[0],h=f[f.length-1];d===v?h.focus():v.focus()}}va&&ue(()=>a.value&&e.retainFocus,i=>{i?document.addEventListener("focusin",r):document.removeEventListener("focusin",r)},{immediate:!0}),ue(a,async i=>{await Oe(),i?o.value.contentEl?.focus({preventScroll:!0}):o.value.activatorEl?.focus({preventScroll:!0})});const s=M(()=>L({"aria-haspopup":"dialog","aria-expanded":String(a.value)},e.activatorProps));return ye(()=>{const i=Bn.filterProps(e);return u(Bn,L({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},i,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,"aria-modal":"true",activatorProps:s.value,role:"dialog"},l),{activator:t.activator,default:function(){for(var d=arguments.length,c=new Array(d),f=0;f<d;f++)c[f]=arguments[f];return u(ft,{root:"VDialog"},{default:()=>[t.default?.(...c)]})}})}),Et({},o)}}),bo=ce({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...nn({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ut(e).every(n=>n!=null&&typeof n=="object")},...xa({clearable:!0})},"VFileInput"),ko=fe()({name:"VFileInput",inheritAttrs:!1,props:bo(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const{t:o}=Dn(),r=me(e,"modelValue"),{isFocused:s,focus:i,blur:d}=Mn(e),c=M(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=M(()=>(r.value??[]).reduce((b,I)=>{let{size:A=0}=I;return b+A},0)),v=M(()=>Yn(f.value,c.value)),h=M(()=>(r.value??[]).map(b=>{const{name:I="",size:A=0}=b;return e.showSize?`${I} (${Yn(A,c.value)})`:I})),p=M(()=>{const b=r.value?.length??0;return e.showSize?o(e.counterSizeString,b,v.value):o(e.counterString,b)}),m=U(),k=U(),g=U(),B=M(()=>s.value||e.active),V=M(()=>["plain","underlined"].includes(e.variant));function D(){g.value!==document.activeElement&&g.value?.focus(),s.value||i()}function _(b){g.value?.click()}function x(b){a("mousedown:control",b)}function O(b){g.value?.click(),a("click:control",b)}function G(b){b.stopPropagation(),D(),Oe(()=>{r.value=[],ma(e["onClick:clear"],b)})}return ue(r,b=>{(!Array.isArray(b)||!b.length)&&g.value&&(g.value.value="")}),ye(()=>{const b=!!(l.counter||e.counter),I=!!(b||l.details),[A,H]=en(t),{modelValue:T,...C}=je.filterProps(e),S=_a(e);return u(je,L({ref:m,modelValue:r.value,"onUpdate:modelValue":N=>r.value=N,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":V.value},e.class],style:e.style,"onClick:prepend":_},A,C,{centerAffix:!V.value,focused:s.value}),{...l,default:N=>{let{id:ae,isDisabled:J,isDirty:ke,isReadonly:we,isValid:tt}=N;return u(Ca,L({ref:k,"prepend-icon":e.prependIcon,onMousedown:x,onClick:O,"onClick:clear":G,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},S,{id:ae.value,active:B.value||ke.value,dirty:ke.value,disabled:J.value,focused:s.value,error:tt.value===!1}),{...l,default:mt=>{let{props:{class:ht,...pt}}=mt;return u(se,null,[u("input",L({ref:g,type:"file",readonly:we.value,disabled:J.value,multiple:e.multiple,name:e.name,onClick:Se=>{Se.stopPropagation(),we.value&&Se.preventDefault(),D()},onChange:Se=>{if(!Se.target)return;const nt=Se.target;r.value=[...nt.files??[]]},onFocus:D,onBlur:d},pt,H),null),u("div",{class:ht},[!!r.value?.length&&(l.selection?l.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:v.value}):e.chips?h.value.map(Se=>u(On,{key:Se,size:"small",color:e.color},{default:()=>[Se]})):h.value.join(", "))])])}})},details:I?N=>u(se,null,[l.details?.(N),b&&u(se,null,[u("span",null,null),u(Va,{active:!!r.value?.length,value:p.value},l.counter)])]):void 0})}),Et({},m,k,g)}}),wo=ce({...ha(),...to()},"VForm"),ln=fe()({name:"VForm",props:wo(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:a}=n;const l=eo(e),o=U();function r(i){i.preventDefault(),l.reset()}function s(i){const d=i,c=l.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),a("submit",d),d.defaultPrevented||c.then(f=>{let{valid:v}=f;v&&o.value?.submit()}),d.preventDefault()}return ye(()=>u("form",{ref:o,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:r,onSubmit:s},[t.default?.(l)])),Et(l,o)}}),So=z("b",null,"overwrite any existing progress",-1),_o={__name:"UploadFileDialog",emits:["submit"],setup(e,{emit:n}){let t="";const a=U();ue(a,()=>{o=0,f.value=!1,i=[],m.value.resetValidation()});function l(B){return B.length===1||"Required"}let o=0;function r(B){o++;const V=B[0],D=[".yaml"];let _="";const x=V?.name.lastIndexOf(".");return x>=0&&(_=V.name.slice(x),o===1&&(t=V.name.substring(0,x))),D.includes(_)?(Object.defineProperty(V,"name",{writable:!0,value:ol()+".yaml"}),!0):`Invalid file type: expected .yaml, got ${_}`}function s(B){const V=B[0],D=1e6,_=2,x=D*_,O=V.size;return O<=0?"Invalid file":O<=x?!0:`File too large, (${_} MB limit)`}let i=Ze([]),d=Ze({});const c=U();let f=U(!1),v=U(!1);async function h(B){const D=await B[0].text();try{i=[],f.value=!1,d=rl(D,{schema:il});const _=ul(d);for(let x=0;x<_.length;x++)i.push(_[x]);return _?(f.value=!0,""):!0}catch(_){return _.reason}}const p=n,m=U(null);async function k(){await m.value.validate(),c.value&&(p("submit",d,t),a.value=[],v.value=!1)}function g(B){a.value=[],B.value=!1}return(B,V)=>($(),Z(an,{width:"500",modelValue:F(v),"onUpdate:modelValue":V[4]||(V[4]=D=>pa(v)?v.value=D:v=D)},{activator:w(({props:D})=>[u(Q,L(D,{text:"Load case study","prepend-icon":"mdi-upload",color:"blue",variant:"text"}),null,16)]),default:w(({isActive:D})=>[u(ln,{onSubmit:V[2]||(V[2]=tn(()=>{},["prevent"])),modelValue:c.value,"onUpdate:modelValue":V[3]||(V[3]=_=>c.value=_),ref_key:"form",ref:m},{default:w(()=>[u(Fe,{title:"Load Case Study"},{default:w(()=>[u(Pt,{class:"text-subtitle-2"},{default:w(()=>[q(" To view or edit an existing case study, upload a .yaml file created by this website. Loading a file will "),So,q(" in the form. The current case study schema version is "+Ie(`v${F(bn).$version}`)+" ",1),u(ko,{label:"Case study .yaml file",accept:".yaml",rules:[l,r,s,h],"error-messages":F(i),error:F(f),variant:"outlined",density:"compact",class:"mt-6",modelValue:a.value,"onUpdate:modelValue":V[0]||(V[0]=_=>a.value=_)},null,8,["rules","error-messages","error","modelValue"])]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:_=>g(D)},null,8,["onClick"]),u(Q,{text:"Ok",type:"submit",onClick:V[1]||(V[1]=_=>k())})]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["modelValue"]))}},xo={},vt=e=>(sl("data-v-2afa5aea"),e=e(),cl(),e),Vo=vt(()=>z("ol",null,[z("li",null," The attack exploits one or more vulnerabilities that compromise the confidentiality, integrity, or availability of a ML system. "),z("li",null," The attack is against a production/commercial ML system. This can be on MLaaS or ML systems embedded in clients/at the edge. "),z("li",null," Ensure you have permission to share this information and/or publish this research. Please follow the proper channels before reporting a new attack and make sure you are practicing responsible disclosure. ")],-1)),Co=vt(()=>z("ol",null,[z("li",null,"Fill out the form."),z("li",null,"Download the generated case study .yaml file."),z("li",null,[q(" Email the case study file to "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")])],-1)),Do=vt(()=>z("p",null," After downloading the case study, a new button will appear to optionally download a PowerPoint .pptx version for perusal. ",-1)),Po=vt(()=>z("p",null,' To view or edit an existing case study, click the "Load Case Study" button and upload the .yaml file. Make any necessary adjustments, then re-download the file. ',-1)),Eo=vt(()=>z("p",null,[q(" For more guidance, please watch this "),z("a",{target:"_blank",href:"https://www.youtube.com/watch?v=Np_ip14YJGg&list=PLkTApXQou_8J6-t2_7QTTVDLBQlKFXPOu&index=2"},"instructional video"),q(". ")],-1)),Io=vt(()=>z("p",null,[q(" Please contact "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(" with any questions. ")],-1));function To(e,n){return $(),Z(an,{width:"500"},{activator:w(({props:t})=>[u(Q,L(t,{text:"Instructions","prepend-icon":"mdi-information-outline",color:"grey-lighten-2"}),null,16)]),default:w(({isActive:t})=>[u(Fe,null,{default:w(()=>[u(zt,null,{default:w(()=>[q(" Case study considerations ")]),_:1}),u(Pt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Vo]),_:1}),u(zt,null,{default:w(()=>[q(" How to use this case study builder ")]),_:1}),u(Pt,{class:"text-subtitle-2 text-grey-darken-1"},{default:w(()=>[Co,Do,Po,Eo,Io]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Ok",onClick:a=>t.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}const Ao=ga(xo,[["render",To],["__scopeId","data-v-2afa5aea"]]);function Mo(e,n,t){if(n==null)return e;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?u(se,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,n)]),u("span",{class:"v-autocomplete__mask"},[e.substr(n,t)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(n+t)])]):e}const Oo=ce({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...ro({filterKeys:["title"]}),...oo(),...Qe(io({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...vl({transition:!1})},"VAutocomplete"),Hn=fe()({name:"VAutocomplete",props:Oo(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:t}=n;const{t:a}=Dn(),l=U(),o=Me(!1),r=Me(!0),s=Me(!1),i=U(),d=U(),c=me(e,"menu"),f=M({get:()=>c.value,set:P=>{c.value&&!P&&i.value?.ΨopenChildren||(c.value=P)}}),v=Me(-1),h=M(()=>l.value?.color),p=M(()=>f.value?e.closeText:e.openText),{items:m,transformIn:k,transformOut:g}=dl(e),{textColorClasses:B,textColorStyles:V}=fl(h),D=me(e,"search",""),_=me(e,"modelValue",[],P=>k(P===null?[null]:ut(P)),P=>{const le=g(P);return e.multiple?le:le[0]??null}),x=M(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),O=no(),{filteredItems:G,getMatches:b}=ao(e,m,()=>r.value?"":D.value),I=M(()=>e.hideSelected?G.value.filter(P=>!_.value.some(le=>le.value===P.value)):G.value),A=M(()=>!!(e.chips||t.chip)),H=M(()=>A.value||!!t.selection),T=M(()=>_.value.map(P=>P.props.value)),C=M(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&D.value===I.value[0]?.title)&&I.value.length>0&&!r.value&&!s.value),S=M(()=>e.hideNoData&&!I.value.length||e.readonly||O?.isReadonly.value),N=U(),{onListScroll:ae,onListKeydown:J}=lo(N,l);function ke(P){e.openOnClear&&(f.value=!0),D.value=""}function we(){S.value||(f.value=!0)}function tt(P){S.value||(o.value&&(P.preventDefault(),P.stopPropagation()),f.value=!f.value)}function mt(P){if(e.readonly||O?.isReadonly.value)return;const le=l.value.selectionStart,ie=_.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(P.key))&&P.preventDefault(),["Enter","ArrowDown"].includes(P.key)&&(f.value=!0),["Escape"].includes(P.key)&&(f.value=!1),C.value&&["Enter","Tab"].includes(P.key)&&qe(I.value[0]),P.key==="ArrowDown"&&C.value&&N.value?.focus("next"),!!e.multiple){if(["Backspace","Delete"].includes(P.key)){if(v.value<0){P.key==="Backspace"&&!D.value&&(v.value=ie-1);return}const j=v.value,K=_.value[v.value];K&&!K.props.disabled&&qe(K,!1),v.value=j>=ie-1?ie-2:j}if(P.key==="ArrowLeft"){if(v.value<0&&le>0)return;const j=v.value>-1?v.value-1:ie-1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(D.value?.length,D.value?.length))}if(P.key==="ArrowRight"){if(v.value<0)return;const j=v.value+1;_.value[j]?v.value=j:(v.value=-1,l.value.setSelectionRange(0,0))}}}function ht(P){if(Un(l.value,":autofill")||Un(l.value,":-webkit-autofill")){const le=m.value.find(ie=>ie.title===P.target.value);le&&qe(le)}}function pt(){o.value&&(r.value=!0,l.value?.focus())}function Se(P){o.value=!0,setTimeout(()=>{s.value=!0})}function nt(P){s.value=!1}function rn(P){(P==null||P===""&&!e.multiple)&&(_.value=[])}const un=Me(!1);function qe(P){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!P.props.disabled)if(e.multiple){const ie=_.value.findIndex(K=>e.valueComparator(K.value,P.value)),j=le??!~ie;if(~ie){const K=j?[..._.value,P]:[..._.value];K.splice(ie,1),_.value=K}else j&&(_.value=[..._.value,P]);e.clearOnSelect&&(D.value="")}else{const ie=le!==!1;_.value=ie?[P]:[],D.value=ie&&!H.value?P.title:"",Oe(()=>{f.value=!1,r.value=!0})}}return ue(o,(P,le)=>{P!==le&&(P?(un.value=!0,D.value=e.multiple||H.value?"":String(_.value.at(-1)?.props.title??""),r.value=!0,Oe(()=>un.value=!1)):(!e.multiple&&D.value==null?_.value=[]:C.value&&!s.value&&!_.value.some(ie=>{let{value:j}=ie;return j===I.value[0].value})&&qe(I.value[0]),f.value=!1,D.value="",v.value=-1))}),ue(D,P=>{!o.value||un.value||(P&&(f.value=!0),r.value=!P)}),ue(f,()=>{if(!e.hideSelected&&f.value&&_.value.length){const P=I.value.findIndex(le=>_.value.some(ie=>le.value===ie.value));va&&window.requestAnimationFrame(()=>{P>=0&&d.value?.scrollToIndex(P)})}}),ue(()=>e.items,P=>{!o.value||!P.length||f.value||(f.value=!0)}),ye(()=>{const P=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),le=_.value.length>0,ie=Ke.filterProps(e);return u(Ke,L({ref:l},ie,{modelValue:D.value,"onUpdate:modelValue":[j=>D.value=j,rn],focused:o.value,"onUpdate:focused":j=>o.value=j,validationValue:_.externalValue,counterValue:x.value,dirty:le,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":f.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:le?void 0:e.placeholder,"onClick:clear":ke,"onMousedown:control":we,onKeydown:mt}),{...t,default:()=>u(se,null,[u(ya,L({ref:i,modelValue:f.value,"onUpdate:modelValue":j=>f.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:S.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:pt},e.menuProps),{default:()=>[P&&u(ba,L({ref:N,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:J,onFocusin:Se,onFocusout:nt,onScrollPassive:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>[t["prepend-item"]?.(),!I.value.length&&!e.hideNoData&&(t["no-data"]?.()??u(qt,{title:a(e.noDataText)},null)),u(uo,{ref:d,renderless:!0,items:I.value},{default:j=>{let{item:K,index:Pe,itemRef:Ot}=j;const gt=L(K.props,{ref:Ot,key:Pe,active:C.value&&Pe===0?!0:void 0,onClick:()=>qe(K,null)});return t.item?.({item:K,index:Pe,props:gt})??u(qt,L(gt,{role:"option"}),{prepend:yt=>{let{isSelected:ze}=yt;return u(se,null,[e.multiple&&!e.hideSelected?u(wn,{key:K.value,modelValue:ze,ripple:!1,tabindex:"-1"},null):void 0,K.props.prependAvatar&&u(hl,{image:K.props.prependAvatar},null),K.props.prependIcon&&u(He,{icon:K.props.prependIcon},null)])},title:()=>r.value?K.title:Mo(K.title,b(K)?.title,D.value?.length??0)})}}),t["append-item"]?.()]})]}),_.value.map((j,K)=>{function Pe(ze){ze.stopPropagation(),ze.preventDefault(),qe(j,!1)}const Ot={"onClick:close":Pe,onMousedown(ze){ze.preventDefault(),ze.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},gt=A.value?!!t.chip:!!t.selection,yt=gt?pl(A.value?t.chip({item:j,index:K,props:Ot}):t.selection({item:j,index:K})):void 0;if(!(gt&&!yt))return u("div",{key:j.value,class:["v-autocomplete__selection",K===v.value&&["v-autocomplete__selection--selected",B.value]],style:K===v.value?V.value:{}},[A.value?t.chip?u(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>[yt]}):u(On,L({key:"chip",closable:e.closableChips,size:"small",text:j.title,disabled:j.props.disabled},Ot),null):yt??u("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&K<_.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){for(var j=arguments.length,K=new Array(j),Pe=0;Pe<j;Pe++)K[Pe]=arguments[Pe];return u(se,null,[t["append-inner"]?.(...K),e.menuIcon?u(He,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:tt,onClick:ml,"aria-label":a(p.value),title:a(p.value)},null):void 0])}})}),Et({isFocused:o,isPristine:r,menu:f,search:D,filteredItems:G,select:qe},l)}}),Ro=ce({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...nn(),...xa()},"VTextarea"),Pa=fe()({name:"VTextarea",directives:{Intersect:gl},inheritAttrs:!1,props:Ro(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:t,emit:a,slots:l}=n;const o=me(e,"modelValue"),{isFocused:r,focus:s,blur:i}=Mn(e),d=M(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),c=M(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function f(A,H){!e.autofocus||!A||H[0].target?.focus?.()}const v=U(),h=U(),p=Me(""),m=U(),k=M(()=>e.persistentPlaceholder||r.value||e.active);function g(){m.value!==document.activeElement&&m.value?.focus(),r.value||s()}function B(A){g(),a("click:control",A)}function V(A){a("mousedown:control",A)}function D(A){A.stopPropagation(),g(),Oe(()=>{o.value="",ma(e["onClick:clear"],A)})}function _(A){const H=A.target;if(o.value=H.value,e.modelModifiers?.trim){const T=[H.selectionStart,H.selectionEnd];Oe(()=>{H.selectionStart=T[0],H.selectionEnd=T[1]})}}const x=U(),O=U(+e.rows),G=M(()=>["plain","underlined"].includes(e.variant));Pn(()=>{e.autoGrow||(O.value=+e.rows)});function b(){e.autoGrow&&Oe(()=>{if(!x.value||!h.value)return;const A=getComputedStyle(x.value),H=getComputedStyle(h.value.$el),T=parseFloat(A.getPropertyValue("--v-field-padding-top"))+parseFloat(A.getPropertyValue("--v-input-padding-top"))+parseFloat(A.getPropertyValue("--v-field-padding-bottom")),C=x.value.scrollHeight,S=parseFloat(A.lineHeight),N=Math.max(parseFloat(e.rows)*S+T,parseFloat(H.getPropertyValue("--v-input-control-height"))),ae=parseFloat(e.maxRows)*S+T||1/0,J=bl(C??0,N,ae);O.value=Math.floor((J-T)/S),p.value=En(J)})}It(b),ue(o,b),ue(()=>e.rows,b),ue(()=>e.maxRows,b),ue(()=>e.density,b);let I;return ue(x,A=>{A?(I=new ResizeObserver(b),I.observe(x.value)):I?.disconnect()}),yl(()=>{I?.disconnect()}),ye(()=>{const A=!!(l.counter||e.counter||e.counterValue),H=!!(A||l.details),[T,C]=en(t),{modelValue:S,...N}=je.filterProps(e),ae=_a(e);return u(je,L({ref:v,modelValue:o.value,"onUpdate:modelValue":J=>o.value=J,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":G.value},e.class],style:e.style},T,N,{centerAffix:O.value===1&&!G.value,focused:r.value}),{...l,default:J=>{let{id:ke,isDisabled:we,isDirty:tt,isReadonly:mt,isValid:ht}=J;return u(Ca,L({ref:h,style:{"--v-textarea-control-height":p.value},onClick:B,onMousedown:V,"onClick:clear":D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ae,{id:ke.value,active:k.value||tt.value,centerAffix:O.value===1&&!G.value,dirty:tt.value||e.dirty,disabled:we.value,focused:r.value,error:ht.value===!1}),{...l,default:pt=>{let{props:{class:Se,...nt}}=pt;return u(se,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),$n(u("textarea",L({ref:m,class:Se,value:o.value,onInput:_,autofocus:e.autofocus,readonly:mt.value,disabled:we.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:g,onBlur:i},nt,C),null),[[kl("intersect"),{handler:f},null,{once:!0}]]),e.autoGrow&&$n(u("textarea",{class:[Se,"v-textarea__sizer"],id:`${nt.id}-sizer`,"onUpdate:modelValue":rn=>o.value=rn,ref:x,readonly:!0,"aria-hidden":"true"},null),[[wl,o.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:H?J=>u(se,null,[l.details?.(J),A&&u(se,null,[u("span",null,null),u(Va,{active:e.persistentCounter||r.value,value:d.value,max:c.value},l.counter)])]):void 0})}),Et({},v,h,m)}}),Ea={__name:"AddProcedure",props:["editProcedure","editIndex"],emits:["submitProcedureStep","cancel","updateShowAddNewStep","update"],setup(e,{expose:n,emit:t}){const{editProcedure:a,editIndex:l}=e;It(()=>{a&&(c.tactic=a.tactic,c.technique=o.getDataObjectById(a.technique)===void 0?"":a.technique,c.description=a.description)});const o=In(),r=U(!1),s=U(null),i=M(()=>!!(!r.value||c.tactic&&c.technique)),d=[m=>m?!0:"Required"];let c=Ze({tactic:"",technique:"",description:""});const f=M(()=>o.getDataObjectsByType("tactics"));ue(()=>c.tactic,(m,k)=>{c.technique&&m!==k&&k&&(c.technique="")});const v=M(()=>{const m=o.getDataObjectsByTypeKeyContainingValue("techniques","tactics",c.tactic);for(let k=0;k<m.length;k++)if(m[k].subtechniques)for(let g=0;g<m[k].subtechniques.length;g++){const B=m[k].subtechniques[g],V=k+1+g;m.splice(V,0,B)}return m}),h=t;n({addProcedureStep:p});function p(){if(r.value=!0,s.value.validate(),i.value&&a){const m=JSON.parse(JSON.stringify(c));h("update",m,l),r.value=!1}else if(i.value){const m=JSON.parse(JSON.stringify(c));h("submitProcedureStep",m),s.value.reset(),r.value=!1}}return(m,k)=>($(),Z(ln,{ref_key:"procedureForm",ref:s,onSubmit:k[5]||(k[5]=tn(()=>{},["prevent"]))},{default:w(()=>[u(Fe,{title:"Add Procedure Step",variant:"outlined",style:st({borderColor:i.value?"grey":"red"})},{default:w(()=>[u(Ge,{class:"pa-6"},{default:w(()=>[u(kn,{cols:"12",lg:"6"},{default:w(()=>[u(Hn,{label:"Tactic",items:f.value,"item-title":"name","item-value":"id",modelValue:F(c).tactic,"onUpdate:modelValue":k[0]||(k[0]=g=>F(c).tactic=g),variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},null,8,["items","modelValue"])]),_:1}),u(kn,{cols:"12",lg:"6"},{default:w(()=>[u(Hn,{label:"Technique",items:v.value,"item-title":"name","item-value":"id",modelValue:F(c).technique,"onUpdate:modelValue":k[1]||(k[1]=g=>F(c).technique=g),disabled:!F(c).tactic,variant:"outlined","prepend-inner-icon":"mdi-magnify",rules:d},{item:w(({props:g,item:B})=>[u(qt,L(g,{"prepend-icon":B.raw.tactics?"":"mdi-subdirectory-arrow-right"}),null,16,["prepend-icon"])]),_:1},8,["items","modelValue","disabled"])]),_:1}),u(Pa,{label:"Description","prepend-inner-icon":"mdi-text",hint:"Describe how this technique was used in the case study",disabled:!F(c).tactic,variant:"outlined",modelValue:F(c).description,"onUpdate:modelValue":k[2]||(k[2]=g=>F(c).description=g),modelModifiers:{trim:!0},class:"mx-3"},null,8,["disabled","modelValue"])]),_:1}),u(et,null,{default:w(()=>[u(Ne),u(Q,{onClick:k[3]||(k[3]=g=>m.$emit(e.editProcedure?"cancel":"updateShowAddNewStep"))},{default:w(()=>[q("Cancel")]),_:1}),u(Q,{type:"submit",color:"green",onClick:k[4]||(k[4]=g=>p())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),r.value&&i.value===!1?($(),Z(Wt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(Ie(F(c).tactic?"Please fill out Technique":"Please fill out Tactic and Technique"),1)]),_:1})):pe("",!0)]),_:1},8,["style"])]),_:1},512))}};var No=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,jn=(e,n,t)=>n in e?No(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,rt=(e,n)=>{for(var t in n||(n={}))Ia.call(n,t)&&jn(e,t,n[t]);if(Xt)for(var t of Xt(n))Ta.call(n,t)&&jn(e,t,n[t]);return e},Aa=(e,n)=>{var t={};for(var a in e)Ia.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&Xt)for(var a of Xt(e))n.indexOf(a)<0&&Ta.call(e,a)&&(t[a]=e[a]);return t};const Ma="[vue-draggable-plus]: ";function Fo(e){console.warn(Ma+e)}function Bo(e){console.error(Ma+e)}function qn(e,n,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(n,1)[0]),e}function Yo(e){return e.replace(/-(\w)/g,(n,t)=>t?t.toUpperCase():"")}function Uo(e){return Object.keys(e).reduce((n,t)=>(typeof e[t]<"u"&&(n[Yo(t)]=e[t]),n),{})}function $o(e,n){if(Array.isArray(e))return e.splice(n,1)}function Lo(e,n,t){if(Array.isArray(e))return e.splice(n,0,t)}function Ho(e){return typeof e>"u"}function jo(e){return typeof e=="string"}function zn(e,n,t){const a=e.children[t];e.insertBefore(n,a)}function sn(e){e.parentNode&&e.parentNode.removeChild(e)}function qo(e,n=document){var t;let a=null;return typeof n?.querySelector=="function"?a=(t=n?.querySelector)==null?void 0:t.call(n,e):a=document.querySelector(e),a||Fo(`Element not found: ${e}`),a}function zo(e,n,t=null){return function(...a){return e.apply(t,a),n.apply(t,a)}}function Wo(e,n){const t=rt({},e);return Object.keys(n).forEach(a=>{t[a]?t[a]=zo(e[a],n[a]):t[a]=n[a]}),t}function Xo(e){return e instanceof HTMLElement}function Go(e,n){Object.keys(e).forEach(t=>{n(t,e[t])})}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Wn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,a)}return t}function Ae(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Wn(Object(t),!0).forEach(function(a){Jo(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Ut(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ut=function(n){return typeof n}:Ut=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(e)}function Jo(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Be(){return Be=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Be.apply(this,arguments)}function Ko(e,n){if(e==null)return{};var t={},a=Object.keys(e),l,o;for(o=0;o<a.length;o++)l=a[o],!(n.indexOf(l)>=0)&&(t[l]=e[l]);return t}function Qo(e,n){if(e==null)return{};var t=Ko(e,n),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var Zo="1.15.1";function Re(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ye=Re(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),At=Re(/Edge/i),Xn=Re(/firefox/i),_t=Re(/safari/i)&&!Re(/chrome/i)&&!Re(/android/i),Oa=Re(/iP(ad|od|hone)/i),Ra=Re(/chrome/i)&&Re(/android/i),Na={capture:!1,passive:!1};function X(e,n,t){e.addEventListener(n,t,!Ye&&Na)}function W(e,n,t){e.removeEventListener(n,t,!Ye&&Na)}function Gt(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function er(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ee(e,n,t,a){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&Gt(e,n):Gt(e,n))||a&&e===t)return e;if(e===t)break}while(e=er(e))}return null}var Gn=/\s+/g;function _e(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var a=(" "+e.className+" ").replace(Gn," ").replace(" "+n+" "," ");e.className=(a+(t?" "+n:"")).replace(Gn," ")}}function E(e,n,t){var a=e&&e.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=t+(typeof t=="string"?"":"px")}}function ct(e,n){var t="";if(typeof e=="string")t=e;else do{var a=E(e,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!n&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Fa(e,n,t){if(e){var a=e.getElementsByTagName(n),l=0,o=a.length;if(t)for(;l<o;l++)t(a[l],l);return a}return[]}function Te(){var e=document.scrollingElement;return e||document.documentElement}function re(e,n,t,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var o,r,s,i,d,c,f;if(e!==window&&e.parentNode&&e!==Te()?(o=e.getBoundingClientRect(),r=o.top,s=o.left,i=o.bottom,d=o.right,c=o.height,f=o.width):(r=0,s=0,i=window.innerHeight,d=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(n||t)&&e!==window&&(l=l||e.parentNode,!Ye))do if(l&&l.getBoundingClientRect&&(E(l,"transform")!=="none"||t&&E(l,"position")!=="static")){var v=l.getBoundingClientRect();r-=v.top+parseInt(E(l,"border-top-width")),s-=v.left+parseInt(E(l,"border-left-width")),i=r+o.height,d=s+o.width;break}while(l=l.parentNode);if(a&&e!==window){var h=ct(l||e),p=h&&h.a,m=h&&h.d;h&&(r/=m,s/=p,f/=p,c/=m,i=r+c,d=s+f)}return{top:r,left:s,bottom:i,right:d,width:f,height:c}}}function Ba(e){var n=re(e),t=parseInt(E(e,"padding-left")),a=parseInt(E(e,"padding-top")),l=parseInt(E(e,"padding-right")),o=parseInt(E(e,"padding-bottom"));return n.top+=a+parseInt(E(e,"border-top-width")),n.left+=t+parseInt(E(e,"border-left-width")),n.width=e.clientWidth-t-l,n.height=e.clientHeight-a-o,n.bottom=n.top+n.height,n.right=n.left+n.width,n}function Jn(e,n,t){for(var a=Le(e,!0),l=re(e)[n];a;){var o=re(a)[t],r=void 0;if(r=l>=o,!r)return a;if(a===Te())break;a=Le(a,!1)}return!1}function dt(e,n,t,a){for(var l=0,o=0,r=e.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==R.ghost&&(a||r[o]!==R.dragged)&&Ee(r[o],t.draggable,e,!1)){if(l===n)return r[o];l++}o++}return null}function Rn(e,n){for(var t=e.lastElementChild;t&&(t===R.ghost||E(t,"display")==="none"||n&&!Gt(t,n));)t=t.previousElementSibling;return t||null}function Ce(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==R.clone&&(!n||Gt(e,n))&&t++;return t}function Kn(e){var n=0,t=0,a=Te();if(e)do{var l=ct(e),o=l.a,r=l.d;n+=e.scrollLeft*o,t+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[n,t]}function tr(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===e[t][a])return Number(t)}return-1}function Le(e,n){if(!e||!e.getBoundingClientRect)return Te();var t=e,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=E(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Te();if(a||n)return t;a=!0}}while(t=t.parentNode);return Te()}function nr(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function cn(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var xt;function Ya(e,n){return function(){if(!xt){var t=arguments,a=this;t.length===1?e.call(a,t[0]):e.apply(a,t),xt=setTimeout(function(){xt=void 0},n)}}}function ar(){clearTimeout(xt),xt=void 0}function Ua(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function $a(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}var Ve="Sortable"+new Date().getTime();function lr(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(E(a,"display")==="none"||a===R.ghost)){e.push({target:a,rect:re(a)});var l=Ae({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=ct(a,!0);o&&(l.top-=o.f,l.left-=o.e)}a.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(tr(e,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(n),typeof t=="function"&&t();return}var l=!1,o=0;e.forEach(function(r){var s=0,i=r.target,d=i.fromRect,c=re(i),f=i.prevFromRect,v=i.prevToRect,h=r.rect,p=ct(i,!0);p&&(c.top-=p.f,c.left-=p.e),i.toRect=c,i.thisAnimationDuration&&cn(f,c)&&!cn(d,c)&&(h.top-c.top)/(h.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(s=rr(h,f,v,a.options)),cn(c,d)||(i.prevFromRect=d,i.prevToRect=c,s||(s=a.options.animation),a.animate(i,h,c,s)),s&&(l=!0,o=Math.max(o,s),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},s),i.thisAnimationDuration=s)}),clearTimeout(n),l?n=setTimeout(function(){typeof t=="function"&&t()},o):typeof t=="function"&&t(),e=[]},animate:function(t,a,l,o){if(o){E(t,"transition",""),E(t,"transform","");var r=ct(this.el),s=r&&r.a,i=r&&r.d,d=(a.left-l.left)/(s||1),c=(a.top-l.top)/(i||1);t.animatingX=!!d,t.animatingY=!!c,E(t,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=or(t),E(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),E(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}}function or(e){return e.offsetWidth}function rr(e,n,t,a){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*a.animation}var at=[],dn={initializeByDefault:!0},Mt={mount:function(e){for(var n in dn)dn.hasOwnProperty(n)&&!(n in e)&&(e[n]=dn[n]);at.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),at.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var l=e+"Global";at.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][l]&&n[o.pluginName][l](Ae({sortable:n},t)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ae({sortable:n},t)))})},initializePlugins:function(e,n,t,a){at.forEach(function(r){var s=r.pluginName;if(!(!e.options[s]&&!r.initializeByDefault)){var i=new r(e,n,e.options);i.sortable=e,i.options=e.options,e[s]=i,Be(t,i.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var o=this.modifyOption(e,l,e.options[l]);typeof o<"u"&&(e.options[l]=o)}},getEventProperties:function(e,n){var t={};return at.forEach(function(a){typeof a.eventProperties=="function"&&Be(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return at.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(a=l.optionListeners[n].call(e[l.pluginName],t))}),a}};function ir(e){var n=e.sortable,t=e.rootEl,a=e.name,l=e.targetEl,o=e.cloneEl,r=e.toEl,s=e.fromEl,i=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(n=n||t&&t[Ve],!!n){var m,k=n.options,g="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Ye&&!At?m=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(a,!0,!0)),m.to=r||t,m.from=s||t,m.item=l||t,m.clone=o,m.oldIndex=i,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=v,m.pullMode=h?h.lastPutMode:void 0;var B=Ae(Ae({},p),Mt.getEventProperties(a,n));for(var V in B)m[V]=B[V];t&&t.dispatchEvent(m),k[g]&&k[g].call(n,m)}}var ur=["evt"],be=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,l=Qo(t,ur);Mt.pluginEvent.bind(R)(e,n,Ae({dragEl:y,parentEl:ne,ghostEl:Y,rootEl:ee,nextEl:Je,lastDownEl:$t,cloneEl:te,cloneHidden:$e,dragStarted:bt,putSortable:de,activeSortable:R.active,originalEvent:a,oldIndex:it,oldDraggableIndex:Vt,newIndex:xe,newDraggableIndex:Ue,hideGhostForTarget:qa,unhideGhostForTarget:za,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(o){he({sortable:n,name:o,originalEvent:a})}},l))};function he(e){ir(Ae({putSortable:de,cloneEl:te,targetEl:y,rootEl:ee,oldIndex:it,oldDraggableIndex:Vt,newIndex:xe,newDraggableIndex:Ue},e))}var y,ne,Y,ee,Je,$t,te,$e,it,xe,Vt,Ue,Rt,de,ot=!1,Jt=!1,Kt=[],We,De,fn,vn,Qn,Zn,bt,lt,Ct,Dt=!1,Nt=!1,Lt,ve,mn=[],Sn=!1,Qt=[],on=typeof document<"u",Ft=Oa,ea=At||Ye?"cssFloat":"float",sr=on&&!Ra&&!Oa&&"draggable"in document.createElement("div"),La=function(){if(on){if(Ye)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ha=function(e,n){var t=E(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=dt(e,0,n),o=dt(e,1,n),r=l&&E(l),s=o&&E(o),i=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+re(l).width,d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(o).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var c=r.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===c)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||i>=a&&t[ea]==="none"||o&&t[ea]==="none"&&i+d>a)?"vertical":"horizontal"},cr=function(e,n,t){var a=t?e.left:e.top,l=t?e.right:e.bottom,o=t?e.width:e.height,r=t?n.left:n.top,s=t?n.right:n.bottom,i=t?n.width:n.height;return a===r||l===s||a+o/2===r+i/2},dr=function(e,n){var t;return Kt.some(function(a){var l=a[Ve].options.emptyInsertThreshold;if(!(!l||Rn(a))){var o=re(a),r=e>=o.left-l&&e<=o.right+l,s=n>=o.top-l&&n<=o.bottom+l;if(r&&s)return t=a}}),t},ja=function(e){function n(l,o){return function(r,s,i,d){var c=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(l==null&&(o||c))return!0;if(l==null||l===!1)return!1;if(o&&l==="clone")return l;if(typeof l=="function")return n(l(r,s,i,d),o)(r,s,i,d);var f=(o?r:s).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},a=e.group;(!a||Ut(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},qa=function(){!La&&Y&&E(Y,"display","none")},za=function(){!La&&Y&&E(Y,"display","")};on&&!Ra&&document.addEventListener("click",function(e){if(Jt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Jt=!1,!1},!0);var Xe=function(e){if(y){e=e.touches?e.touches[0]:e;var n=dr(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[Ve]._onDragOver(t)}}},fr=function(e){y&&y.parentNode[Ve]._isOutsideThisEl(e.target)};function R(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Be({},n),e[Ve]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ha(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,r){o.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:R.supportPointer!==!1&&"PointerEvent"in window&&!_t,emptyInsertThreshold:5};Mt.initializePlugins(this,e,t);for(var a in t)!(a in n)&&(n[a]=t[a]);ja(n);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=n.forceFallback?!1:sr,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?X(e,"pointerdown",this._onTapStart):(X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),Kt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Be(this,lr())}R.prototype={constructor:R,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,l=a.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(r||e).target,i=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,d=a.filter;if(kr(t),!y&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&_t&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Ee(s,a.draggable,t,!1),!(s&&s.animated)&&$t!==s)){if(it=Ce(s),Vt=Ce(s,a.draggable),typeof d=="function"){if(d.call(this,e,s,this)){he({sortable:n,rootEl:i,name:"filter",targetEl:s,toEl:t,fromEl:t}),be("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Ee(i,c.trim(),t,!1),c)return he({sortable:n,rootEl:c,name:"filter",targetEl:s,fromEl:t,toEl:t}),be("filter",n,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ee(i,a.handle,t,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,n,t){var a=this,l=a.el,o=a.options,r=l.ownerDocument,s;if(t&&!y&&t.parentNode===l){var i=re(t);if(ee=l,y=t,ne=y.parentNode,Je=y.nextSibling,$t=t,Rt=o.group,R.dragged=y,We={target:y,clientX:(n||e).clientX,clientY:(n||e).clientY},Qn=We.clientX-i.left,Zn=We.clientY-i.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,y.style["will-change"]="all",s=function(){if(be("delayEnded",a,{evt:e}),R.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Xn&&a.nativeDraggable&&(y.draggable=!0),a._triggerDragStart(e,n),he({sortable:a,name:"choose",originalEvent:e}),_e(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Fa(y,d.trim(),hn)}),X(r,"dragover",Xe),X(r,"mousemove",Xe),X(r,"touchmove",Xe),X(r,"mouseup",a._onDrop),X(r,"touchend",a._onDrop),X(r,"touchcancel",a._onDrop),Xn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),be("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(At||Ye))){if(R.eventCanceled){this._onDrop();return}X(r,"mouseup",a._disableDelayedDrag),X(r,"touchend",a._disableDelayedDrag),X(r,"touchcancel",a._disableDelayedDrag),X(r,"mousemove",a._delayedDragTouchMoveHandler),X(r,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&X(r,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(s,o.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&hn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._disableDelayedDrag),W(e,"touchend",this._disableDelayedDrag),W(e,"touchcancel",this._disableDelayedDrag),W(e,"mousemove",this._delayedDragTouchMoveHandler),W(e,"touchmove",this._delayedDragTouchMoveHandler),W(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?X(document,"pointermove",this._onTouchMove):n?X(document,"touchmove",this._onTouchMove):X(document,"mousemove",this._onTouchMove):(X(y,"dragend",this),X(ee,"dragstart",this._onDragStart));try{document.selection?Ht(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ot=!1,ee&&y){be("dragStarted",this,{evt:n}),this.nativeDraggable&&X(document,"dragover",fr);var t=this.options;!e&&_e(y,t.dragClass,!1),_e(y,t.ghostClass,!0),R.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,qa();for(var e=document.elementFromPoint(De.clientX,De.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==n);)n=e;if(y.parentNode[Ve]._isOutsideThisEl(e),n)do{if(n[Ve]){var t=void 0;if(t=n[Ve]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);za()}},_onTouchMove:function(e){if(We){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,l=e.touches?e.touches[0]:e,o=Y&&ct(Y,!0),r=Y&&o&&o.a,s=Y&&o&&o.d,i=Ft&&ve&&Kn(ve),d=(l.clientX-We.clientX+a.x)/(r||1)+(i?i[0]-mn[0]:0)/(r||1),c=(l.clientY-We.clientY+a.y)/(s||1)+(i?i[1]-mn[1]:0)/(s||1);if(!R.active&&!ot){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(Y){o?(o.e+=d-(fn||0),o.f+=c-(vn||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E(Y,"webkitTransform",f),E(Y,"mozTransform",f),E(Y,"msTransform",f),E(Y,"transform",f),fn=d,vn=c,De=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:ee,n=re(y,!0,Ft,!0,e),t=this.options;if(Ft){for(ve=e;E(ve,"position")==="static"&&E(ve,"transform")==="none"&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=Te()),n.top+=ve.scrollTop,n.left+=ve.scrollLeft):ve=Te(),mn=Kn(ve)}Y=y.cloneNode(!0),_e(Y,t.ghostClass,!1),_e(Y,t.fallbackClass,!0),_e(Y,t.dragClass,!0),E(Y,"transition",""),E(Y,"transform",""),E(Y,"box-sizing","border-box"),E(Y,"margin",0),E(Y,"top",n.top),E(Y,"left",n.left),E(Y,"width",n.width),E(Y,"height",n.height),E(Y,"opacity","0.8"),E(Y,"position",Ft?"absolute":"fixed"),E(Y,"zIndex","100000"),E(Y,"pointerEvents","none"),R.ghost=Y,e.appendChild(Y),E(Y,"transform-origin",Qn/parseInt(Y.style.width)*100+"% "+Zn/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,l=t.options;if(be("dragStart",this,{evt:e}),R.eventCanceled){this._onDrop();return}be("setupClone",this),R.eventCanceled||(te=$a(y),te.removeAttribute("id"),te.draggable=!1,te.style["will-change"]="",this._hideClone(),_e(te,this.options.chosenClass,!1),R.clone=te),t.cloneId=Ht(function(){be("clone",t),!R.eventCanceled&&(t.options.removeCloneOnHide||ee.insertBefore(te,y),t._hideClone(),he({sortable:t,name:"clone"}))}),!n&&_e(y,l.dragClass,!0),n?(Jt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(W(document,"mouseup",t._onDrop),W(document,"touchend",t._onDrop),W(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(t,a,y)),X(document,"drop",t),E(y,"transform","translateZ(0)")),ot=!0,t._dragStartId=Ht(t._dragStarted.bind(t,n,e)),X(document,"selectstart",t),bt=!0,_t&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,l,o,r=this.options,s=r.group,i=R.active,d=Rt===s,c=r.sort,f=de||i,v,h=this,p=!1;if(Sn)return;function m(ae,J){be(ae,h,Ae({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:o,dragRect:a,targetRect:l,canSort:c,fromSortable:f,target:t,completed:g,onMove:function(ke,we){return Bt(ee,n,y,a,ke,re(ke),e,we)},changed:B},J))}function k(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function g(ae){return m("dragOverCompleted",{insertion:ae}),ae&&(d?i._hideClone():i._showClone(h),h!==f&&(_e(y,de?de.options.ghostClass:i.options.ghostClass,!1),_e(y,r.ghostClass,!0)),de!==h&&h!==R.active?de=h:h===R.active&&de&&(de=null),f===h&&(h._ignoreWhileAnimating=t),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===y&&!y.animated||t===n&&!t.animated)&&(lt=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(y.parentNode[Ve]._isOutsideThisEl(e.target),!ae&&Xe(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function B(){xe=Ce(y),Ue=Ce(y,r.draggable),he({sortable:h,name:"change",toEl:n,newIndex:xe,newDraggableIndex:Ue,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Ee(t,r.draggable,n,!0),m("dragOver"),R.eventCanceled)return p;if(y.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||h._ignoreWhileAnimating===t)return g(!1);if(Jt=!1,i&&!r.disabled&&(d?c||(o=ne!==ee):de===this||(this.lastPutMode=Rt.checkPull(this,i,y,e))&&s.checkPut(this,i,y,e))){if(v=this._getDirection(e,t)==="vertical",a=re(y),m("dragOverValid"),R.eventCanceled)return p;if(o)return ne=ee,k(),this._hideClone(),m("revert"),R.eventCanceled||(Je?ee.insertBefore(y,Je):ee.appendChild(y)),g(!0);var V=Rn(n,r.draggable);if(!V||pr(e,v,this)&&!V.animated){if(V===y)return g(!1);if(V&&n===e.target&&(t=V),t&&(l=re(t)),Bt(ee,n,y,a,t,l,e,!!t)!==!1)return k(),V&&V.nextSibling?n.insertBefore(y,V.nextSibling):n.appendChild(y),ne=n,B(),g(!0)}else if(V&&hr(e,v,this)){var D=dt(n,0,r,!0);if(D===y)return g(!1);if(t=D,l=re(t),Bt(ee,n,y,a,t,l,e,!1)!==!1)return k(),n.insertBefore(y,D),ne=n,B(),g(!0)}else if(t.parentNode===n){l=re(t);var _=0,x,O=y.parentNode!==n,G=!cr(y.animated&&y.toRect||a,t.animated&&t.toRect||l,v),b=v?"top":"left",I=Jn(t,"top","top")||Jn(y,"top","top"),A=I?I.scrollTop:void 0;lt!==t&&(x=l[b],Dt=!1,Nt=!G&&r.invertSwap||O),_=gr(e,t,l,v,G?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,Nt,lt===t);var H;if(_!==0){var T=Ce(y);do T-=_,H=ne.children[T];while(H&&(E(H,"display")==="none"||H===Y))}if(_===0||H===t)return g(!1);lt=t,Ct=_;var C=t.nextElementSibling,S=!1;S=_===1;var N=Bt(ee,n,y,a,t,l,e,S);if(N!==!1)return(N===1||N===-1)&&(S=N===1),Sn=!0,setTimeout(mr,30),k(),S&&!C?n.appendChild(y):t.parentNode.insertBefore(y,S?C:t),I&&Ua(I,0,A-I.scrollTop),ne=y.parentNode,x!==void 0&&!Nt&&(Lt=Math.abs(x-re(t)[b])),B(),g(!0)}if(n.contains(y))return g(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){W(document,"mousemove",this._onTouchMove),W(document,"touchmove",this._onTouchMove),W(document,"pointermove",this._onTouchMove),W(document,"dragover",Xe),W(document,"mousemove",Xe),W(document,"touchmove",Xe)},_offUpEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._onDrop),W(e,"touchend",this._onDrop),W(e,"pointerup",this._onDrop),W(e,"touchcancel",this._onDrop),W(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(xe=Ce(y),Ue=Ce(y,t.draggable),be("drop",this,{evt:e}),ne=y&&y.parentNode,xe=Ce(y),Ue=Ce(y,t.draggable),R.eventCanceled){this._nulling();return}ot=!1,Nt=!1,Dt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_n(this.cloneId),_n(this._dragStartId),this.nativeDraggable&&(W(document,"drop",this),W(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_t&&E(document.body,"user-select",""),E(y,"transform",""),e&&(bt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(ee===ne||de&&de.lastPutMode!=="clone")&&te&&te.parentNode&&te.parentNode.removeChild(te),y&&(this.nativeDraggable&&W(y,"dragend",this),hn(y),y.style["will-change"]="",bt&&!ot&&_e(y,de?de.options.ghostClass:this.options.ghostClass,!1),_e(y,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),ee!==ne?(xe>=0&&(he({rootEl:ne,name:"add",toEl:ne,fromEl:ee,originalEvent:e}),he({sortable:this,name:"remove",toEl:ne,originalEvent:e}),he({rootEl:ne,name:"sort",toEl:ne,fromEl:ee,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),de&&de.save()):xe!==it&&xe>=0&&(he({sortable:this,name:"update",toEl:ne,originalEvent:e}),he({sortable:this,name:"sort",toEl:ne,originalEvent:e})),R.active&&((xe==null||xe===-1)&&(xe=it,Ue=Vt),he({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){be("nulling",this),ee=y=ne=Y=Je=te=$t=$e=We=De=bt=xe=Ue=it=Vt=lt=Ct=de=Rt=R.dragged=R.ghost=R.clone=R.active=null,Qt.forEach(function(e){e.checked=!0}),Qt.length=fn=vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),vr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,l=t.length,o=this.options;a<l;a++)n=t[a],Ee(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||br(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(l,o){var r=a.children[o];Ee(r,this.options.draggable,a,!1)&&(t[l]=r)},this),n&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(a.removeChild(t[l]),a.appendChild(t[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ee(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=Mt.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&ja(t)},destroy:function(){be("destroy",this);var e=this.el;e[Ve]=null,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Kt.splice(Kt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(be("hideClone",this),R.eventCanceled)return;E(te,"display","none"),this.options.removeCloneOnHide&&te.parentNode&&te.parentNode.removeChild(te),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(be("showClone",this),R.eventCanceled)return;y.parentNode==ee&&!this.options.group.revertClone?ee.insertBefore(te,y):Je?ee.insertBefore(te,Je):ee.appendChild(te),this.options.group.revertClone&&this.animate(y,te),E(te,"display",""),$e=!1}}};function vr(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Bt(e,n,t,a,l,o,r,s){var i,d=e[Ve],c=d.options.onMove,f;return window.CustomEvent&&!Ye&&!At?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=n,i.from=e,i.dragged=t,i.draggedRect=a,i.related=l||n,i.relatedRect=o||re(n),i.willInsertAfter=s,i.originalEvent=r,e.dispatchEvent(i),c&&(f=c.call(d,i,r)),f}function hn(e){e.draggable=!1}function mr(){Sn=!1}function hr(e,n,t){var a=re(dt(t.el,0,t.options,!0)),l=Ba(t.el),o=10;return n?e.clientX<l.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-o||e.clientY<a.bottom&&e.clientX<a.left}function pr(e,n,t){var a=re(Rn(t.el,t.options.draggable)),l=Ba(t.el),o=10;return n?e.clientX>l.right+o||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+o||e.clientX>a.right&&e.clientY>a.top}function gr(e,n,t,a,l,o,r,s){var i=a?e.clientY:e.clientX,d=a?t.height:t.width,c=a?t.top:t.left,f=a?t.bottom:t.right,v=!1;if(!r){if(s&&Lt<d*l){if(!Dt&&(Ct===1?i>c+d*o/2:i<f-d*o/2)&&(Dt=!0),Dt)v=!0;else if(Ct===1?i<c+Lt:i>f-Lt)return-Ct}else if(i>c+d*(1-l)/2&&i<f-d*(1-l)/2)return yr(n)}return v=v||r,v&&(i<c+d*o/2||i>f-d*o/2)?i>c+d/2?1:-1:0}function yr(e){return Ce(y)<Ce(e)?1:-1}function br(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,a=0;t--;)a+=n.charCodeAt(t);return a.toString(36)}function kr(e){Qt.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var a=n[t];a.checked&&Qt.push(a)}}function Ht(e){return setTimeout(e,0)}function _n(e){return clearTimeout(e)}on&&X(document,"touchmove",function(e){(R.active||ot)&&e.cancelable&&e.preventDefault()});R.utils={on:X,off:W,css:E,find:Fa,is:function(e,n){return!!Ee(e,n,e,!1)},extend:nr,throttle:Ya,closest:Ee,toggleClass:_e,clone:$a,index:Ce,nextTick:Ht,cancelNextTick:_n,detectDirection:Ha,getChild:dt};R.get=function(e){return e[Ve]};R.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(R.utils=Ae(Ae({},R.utils),a.utils)),Mt.mount(a)})};R.create=function(e,n){return new R(e,n)};R.version=Zo;var oe=[],kt,xn,Vn=!1,pn,gn,Zt,wt;function wr(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):this.options.supportPointer?X(document,"pointermove",this._handleFallbackAutoScroll):t.touches?X(document,"touchmove",this._handleFallbackAutoScroll):X(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?W(document,"dragover",this._handleAutoScroll):(W(document,"pointermove",this._handleFallbackAutoScroll),W(document,"touchmove",this._handleFallbackAutoScroll),W(document,"mousemove",this._handleFallbackAutoScroll)),ta(),jt(),ar()},nulling:function(){Zt=xn=kt=Vn=wt=pn=gn=null,oe.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,l=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(l,o);if(Zt=n,t||this.options.forceAutoScrollFallback||At||Ye||_t){yn(n,this.options,r,t);var s=Le(r,!0);Vn&&(!wt||l!==pn||o!==gn)&&(wt&&ta(),wt=setInterval(function(){var i=Le(document.elementFromPoint(l,o),!0);i!==s&&(s=i,jt()),yn(n,a.options,i,t)},10),pn=l,gn=o)}else{if(!this.options.bubbleScroll||Le(r,!0)===Te()){jt();return}yn(n,this.options,Le(r,!1),!1)}}},Be(e,{pluginName:"scroll",initializeByDefault:!0})}function jt(){oe.forEach(function(e){clearInterval(e.pid)}),oe=[]}function ta(){clearInterval(wt)}var yn=Ya(function(e,n,t,a){if(n.scroll){var l=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=n.scrollSensitivity,s=n.scrollSpeed,i=Te(),d=!1,c;xn!==t&&(xn=t,jt(),kt=n.scroll,c=n.scrollFn,kt===!0&&(kt=Le(t,!0)));var f=0,v=kt;do{var h=v,p=re(h),m=p.top,k=p.bottom,g=p.left,B=p.right,V=p.width,D=p.height,_=void 0,x=void 0,O=h.scrollWidth,G=h.scrollHeight,b=E(h),I=h.scrollLeft,A=h.scrollTop;h===i?(_=V<O&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),x=D<G&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(_=V<O&&(b.overflowX==="auto"||b.overflowX==="scroll"),x=D<G&&(b.overflowY==="auto"||b.overflowY==="scroll"));var H=_&&(Math.abs(B-l)<=r&&I+V<O)-(Math.abs(g-l)<=r&&!!I),T=x&&(Math.abs(k-o)<=r&&A+D<G)-(Math.abs(m-o)<=r&&!!A);if(!oe[f])for(var C=0;C<=f;C++)oe[C]||(oe[C]={});(oe[f].vx!=H||oe[f].vy!=T||oe[f].el!==h)&&(oe[f].el=h,oe[f].vx=H,oe[f].vy=T,clearInterval(oe[f].pid),(H!=0||T!=0)&&(d=!0,oe[f].pid=setInterval(function(){a&&this.layer===0&&R.active._onTouchMove(Zt);var S=oe[this.layer].vy?oe[this.layer].vy*s:0,N=oe[this.layer].vx?oe[this.layer].vx*s:0;typeof c=="function"&&c.call(R.dragged.parentNode[Ve],N,S,e,Zt,oe[this.layer].el)!=="continue"||Ua(oe[this.layer].el,N,S)}.bind({layer:f}),24))),f++}while(n.bubbleScroll&&v!==i&&(v=Le(v,!1)));Vn=d}},30),Wa=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,l=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var i=t||l;r();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);s(),i&&!i.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function Nn(){}Nn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=dt(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:Wa};Be(Nn,{pluginName:"revertOnSpill"});function Fn(){}Fn.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:Wa};Be(Fn,{pluginName:"removeOnSpill"});R.mount(new wr);R.mount(Fn,Nn);function Sr(e){return e==null?e:JSON.parse(JSON.stringify(e))}function _r(e){Tn()&&Vl(e)}function xr(e){Tn()?It(e):Oe(e)}const na=Symbol("cloneElement");function Vr(...e){var n,t;const a=(n=Tn())==null?void 0:n.proxy,l=e[0];let[,o,r]=e;Array.isArray(F(o))||(r=o,o=null);let s=null;const{immediate:i=!0,clone:d=Sr,customUpdate:c}=(t=F(r))!=null?t:{};function f(x){var O;x.item[na]=d(F((O=F(o))==null?void 0:O[x.oldIndex]))}function v(x){const O=x.item[na];Ho(O)||(sn(x.item),Lo(F(o),x.newDraggableIndex,O))}function h(x){const{from:O,item:G,oldIndex:b,oldDraggableIndex:I,pullMode:A,clone:H}=x;if(A==="clone"){zn(O,G,b),sn(H);return}$o(F(o),I)}function p(x){if(c){c(x);return}const{from:O,item:G,oldIndex:b,newIndex:I}=x;if(sn(G),zn(O,G,b),pa(o)){const A=[...F(o)];o.value=qn(A,b,I);return}qn(F(o),b,I)}const m={onUpdate:p,onStart:f,onAdd:v,onRemove:h};function k(x){const O=F(l);return x||(x=jo(O)?qo(O,a?.$el):O),x&&!Xo(x)&&(x=x.$el),x||Bo("Root element not found"),x}function g(){var x;const O=(x=F(r))!=null?x:{},{immediate:G,clone:b}=O,I=Aa(O,["immediate","clone"]);return Wo(o===null?{}:m,I)}const B=x=>{x=k(x),s&&V.destroy(),s=new R(x,g())};ue(()=>r,()=>{s&&Go(g(),(x,O)=>{s?.option(x,O)})},{deep:!0});const V={option:(x,O)=>s?.option(x,O),destroy:()=>{s?.destroy(),s=null},save:()=>s?.save(),toArray:()=>s?.toArray(),closest:(...x)=>s?.closest(...x)},D=()=>V?.option("disabled",!0),_=()=>V?.option("disabled",!1);return xr(()=>{i&&B()}),_r(V.destroy),rt({start:B,pause:D,resume:_},V)}const Cn=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Cr=["animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Cn.map(e=>`on${e.replace(/^\S/,n=>n.toUpperCase())}`)],Dr=Sl({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Cr,emits:["update:modelValue",...Cn],setup(e,{slots:n,emit:t,expose:a,attrs:l}){const o=Cn.reduce((c,f)=>{const v=`on${f.replace(/^\S/,h=>h.toUpperCase())}`;return c[v]=h=>t(f,h),c},{}),r=M(()=>{const c=_l(e),{modelValue:f}=c,v=Aa(c,["modelValue"]),h=Object.entries(v).reduce((p,[m,k])=>{const g=F(k);return g!==void 0&&(p[m]=g),p},{});return rt(rt({},o),Uo(rt(rt({},l),h)))}),s=M({get:()=>e.modelValue,set:c=>t("update:modelValue",c)}),i=U(),d=Ze(Vr(e.target||i,s,r));return a(d),()=>{if(n.default)return xl(e.tag||"div",{ref:i},n.default(d))}}}),Pr=["innerHTML"],Er={__name:"EditableProcedureTimeline",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=Cl("markdownit"),t=In(),a=Dl(e,"modelValue");function l(i){return t.getDataObjectById(i.technique)===void 0?`(Label not found for technique ${i.technique})`:t.getDataObjectById(i.technique)?.label}const o=U();function r(i,d){a.value[d]=i,o.value=null}function s(i,d){a.value.splice(i,1),d.value=!1}return(i,d)=>($(),Z(F(Dr),{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value=c),handle:".handle",animation:150,class:"list",ghostClass:"ghost"},{default:w(()=>[($(!0),ge(se,null,St(a.value,(c,f)=>($(),ge("div",{key:f+c.tactic+c.technique+c.description,"dot-color":"blue",size:"medium",width:"100%",class:"mb-3 pl-8 item"},[f===o.value?($(),Z(Ea,{key:0,editProcedure:c,editIndex:o.value,onCancel:d[0]||(d[0]=v=>o.value=null),onUpdate:r},null,8,["editProcedure","editIndex"])):($(),Z(Fe,{key:1,title:l(c),subtitle:F(t).getDataObjectById(c.tactic).name,variant:"outlined",style:{border:"solid 1px","border-color":"lightgray"}},{append:w(()=>[z("div",{style:st({cursor:o.value||a.value.length===1?"not-allowed":"grab"})},[u(He,{style:st({"pointer-events":o.value||a.value.length===1?"none":""}),class:"handle",color:o.value||a.value.length===1?"grey-lighten-1":"grey-darken-3"},{default:w(()=>[q(" mdi-arrow-up-down ")]),_:1},8,["style","color"])],4)]),default:w(()=>[c.description?($(),Z(Pt,{key:0,innerHTML:F(n).render(c.description)},null,8,["innerHTML"])):pe("",!0),u(et,null,{default:w(()=>[u(Ne),u(Q,{icon:"mdi-pencil",color:"blue",onClick:v=>o.value=f},null,8,["onClick"]),u(an,{width:"500"},{activator:w(({props:v})=>[u(Q,L(v,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:v})=>[u(Fe,null,{default:w(()=>[u(zt,{class:"text-wrap"},{default:w(()=>[q(Ie(`Delete "${l(c)}"?`),1)]),_:2},1024),u(Pt,null,{default:w(()=>[z("div",{innerHTML:c.description},null,8,Pr)]),_:2},1024),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:h=>v.value=!1},null,8,["onClick"]),u(Q,{text:"Delete",color:"red",onClick:h=>s(f,v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle"]))]))),128))]),_:1},8,["modelValue"]))}},Ir=ga(Er,[["__scopeId","data-v-3535407d"]]),Xa={__name:"AddSource",props:["sources","editSource","editIndex"],emits:["submit","cancel","update"],setup(e,{emit:n}){const t=n,{sources:a,editSource:l,editIndex:o}=e,r=U(!1),s=Ze({title:"",url:""});It(()=>{l&&(s.title=l.title,s.url=l.url)});const i=[v=>{if(!v)return!0;if(!v.startsWith("http://")&&!v.startsWith("https://"))return"URL does not start with http(s)://";if(/\s/.test(v.trim()))return"URL should not contain spaces";try{return new URL(v),!0}catch{return"URL is not valid"}}],d=U(!1);function c(){!s.title&&!s.url?d.value=!0:r.value&&l?t("update",s,o):r.value&&t("submit",s)}function f(){return l?o+1:a.length+1}return(v,h)=>($(),Z(ln,{onSubmit:h[4]||(h[4]=tn(()=>{},["prevent"])),modelValue:r.value,"onUpdate:modelValue":h[5]||(h[5]=p=>r.value=p)},{default:w(()=>[u(Fe,{variant:"outlined",title:`Source ${f()}`},{default:w(()=>[u(Ke,{modelValue:s.title,"onUpdate:modelValue":h[0]||(h[0]=p=>s.title=p),label:"Description",variant:"outlined",hint:"Brief description (optional)","prepend-inner-icon":"mdi-file-edit-outline",class:"pt-6 px-6 pb-3"},null,8,["modelValue"]),u(Ke,{modelValue:s.url,"onUpdate:modelValue":h[1]||(h[1]=p=>s.url=p),modelModifiers:{trim:!0},label:"URL",variant:"outlined",hint:"Link (optional)","prepend-inner-icon":"mdi-link",class:"px-6",rules:i},null,8,["modelValue"]),u(et,null,{default:w(()=>[u(Ne),u(Q,{onClick:h[2]||(h[2]=p=>v.$emit("cancel"))},{default:w(()=>[q("Cancel")]),_:1}),u(Q,{type:"submit",color:"green",onClick:h[3]||(h[3]=p=>c())},{default:w(()=>[q(" Save ")]),_:1})]),_:1}),d.value?($(),Z(Wt,{key:0,icon:"mdi-alert",color:"red-lighten-4"},{default:w(()=>[q(" Please complete at least one field ")]),_:1})):pe("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"]))}},Tr={key:0},Ar={key:1},Mr=["href"],Or={__name:"SourceList",props:["sources"],emits:["updateSource","delete"],setup(e,{emit:n}){const t=n,{sources:a}=e,l=U();function o(s,i){t("updateSource",s,i),l.value=null}function r(s,i){t("delete",s),l.value>s&&l.value--,i.value=!1}return(s,i)=>($(),Z(ba,null,{default:w(()=>[($(!0),ge(se,null,St(e.sources,(d,c)=>($(),ge("div",{key:c},[c===l.value?($(),Z(Xa,{key:0,editSource:d,editIndex:l.value,onCancel:i[0]||(i[0]=f=>l.value=null),onUpdate:o},null,8,["editSource","editIndex"])):($(),Z(qt,{key:1,value:c},{append:w(()=>[u(He,{icon:"mdi-pencil",color:"blue",class:"mr-5",onClick:f=>l.value=c},null,8,["onClick"]),u(an,{width:"500"},{activator:w(({props:f})=>[u(He,L(f,{icon:"mdi-delete",color:"red"}),null,16)]),default:w(({isActive:f})=>[u(Fe,null,{default:w(()=>[u(zt,{class:"text-wrap"},{default:w(()=>[q(" Delete "+Ie(d.title||d.url)+"? ",1)]),_:2},1024),u(et,null,{default:w(()=>[u(Ne),u(Q,{text:"Cancel",onClick:v=>f.value=!1},null,8,["onClick"]),u(Q,{text:"Delete",color:"red",onClick:v=>r(c,f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:w(()=>[q(Ie(c+1)+". ",1),d.url?($(),ge("span",Ar,[z("a",{href:d.url,target:"_blank"},Ie(d.title||d.url),9,Mr),u(He,{icon:"mdi-open-in-new",size:"x-small",class:"ml-1"})])):($(),ge("span",Tr,Ie(d.title),1))]),_:2},1032,["value"]))]))),128))]),_:1}))}},Ga=ce({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),aa=fe()({name:"VDatePickerControls",props:Ga(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:t}=n;const a=M(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=M(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=M(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),r=M(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){t("click:prev")}function i(){t("click:next")}function d(){t("click:year")}function c(){t("click:month")}return ye(()=>u("div",{class:["v-date-picker-controls"]},[u(Q,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:c},null),u(Q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),u(Ne,{key:"mode-spacer"},null),u("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[u(Q,{disabled:o.value,icon:e.prevIcon,variant:"text",onClick:s},null),u(Q,{disabled:r.value,icon:e.nextIcon,variant:"text",onClick:i},null)])])),{}}}),Rr=ce({appendIcon:String,color:String,header:String,transition:String,onClick:El()},"VDatePickerHeader"),la=fe()({name:"VDatePickerHeader",props:Rr(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:t,slots:a}=n;const{backgroundColorClasses:l,backgroundColorStyles:o}=An(e,"color");function r(){t("click")}function s(){t("click:append")}return ye(()=>{const i=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return u("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value],style:o.value,onClick:r},[a.prepend&&u("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),i&&u(Pl,{key:"content",name:e.transition},{default:()=>[u("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),d&&u("div",{class:"v-date-picker-header__append"},[a.append?u(ft,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):u(Q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:s},null)])])}),{}}}),Nr=ce({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function Fr(e){const n=Tt(),t=me(e,"modelValue",[],v=>ut(v)),a=M(()=>e.displayValue?n.date(e.displayValue):t.value.length>0?n.date(t.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),l=me(e,"year",void 0,v=>{const h=v!=null?Number(v):n.getYear(a.value);return n.startOfYear(n.setYear(n.date(),h))},v=>n.getYear(v)),o=me(e,"month",void 0,v=>{const h=v!=null?Number(v):n.getMonth(a.value),p=n.setYear(n.startOfMonth(n.date()),n.getYear(l.value));return n.setMonth(p,h)},v=>n.getMonth(v)),r=M(()=>{const v=n.getWeekArray(o.value),h=v.flat(),p=6*7;if(h.length<p){const m=h[h.length-1];let k=[];for(let g=1;g<=p-h.length;g++)k.push(n.addDays(m,g)),g%7===0&&(v.push(k),k=[])}return v});function s(v,h){return v.filter(p=>e.weekdays.includes(n.toJsDate(p).getDay())).map((p,m)=>{const k=n.toISO(p),g=!n.isSameMonth(p,o.value),B=n.isSameDay(p,n.startOfMonth(o.value)),V=n.isSameDay(p,n.endOfMonth(o.value)),D=n.isSameDay(p,o.value);return{date:p,isoDate:k,formatted:n.format(p,"keyboardDate"),year:n.getYear(p),month:n.getMonth(p),isDisabled:f(p),isWeekStart:m%7===0,isWeekEnd:m%7===6,isToday:n.isSameDay(p,h),isAdjacent:g,isHidden:g&&!e.showAdjacentMonths,isStart:B,isSelected:t.value.some(_=>n.isSameDay(p,_)),isEnd:V,isSame:D,localized:n.format(p,"dayOfMonth")}})}const i=M(()=>{const v=n.startOfWeek(t.value),h=[];for(let k=0;k<=6;k++)h.push(n.addDays(v,k));const p=h,m=n.date();return s(p,m)}),d=M(()=>{const v=r.value.flat(),h=n.date();return s(v,h)}),c=M(()=>r.value.map(v=>v.length?Il(n,v[0]):null));function f(v){if(e.disabled)return!0;const h=n.date(v);return e.min&&n.isAfter(n.date(e.min),h)||e.max&&n.isAfter(h,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(p=>n.isSameDay(n.date(p),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:d,daysInWeek:i,genDays:s,model:t,weeksInMonth:r,weekNumbers:c}}const Ja=ce({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,...Nr()},"VDatePickerMonth"),oa=fe()({name:"VDatePickerMonth",props:Ja(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=U(),{daysInMonth:o,model:r,weekNumbers:s}=Fr(e),i=Tt(),d=Me(),c=Me(),f=M(()=>{const m=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return r.value.length>=m});function v(m){const k=i.startOfDay(m);if(!d.value)d.value=k,r.value=[d.value];else if(c.value)d.value=m,c.value=void 0,r.value=[d.value];else{if(i.isSameDay(m,d.value)){d.value=void 0,r.value=[];return}else i.isBefore(m,d.value)?(c.value=d.value,d.value=k):c.value=k;const g=i.getDiff(c.value,d.value,"days"),B=[d.value];for(let V=1;V<g;V++){const D=i.addDays(d.value,V);B.push(D)}B.push(c.value),r.value=B}}function h(m){const k=r.value.findIndex(g=>i.isSameDay(g,m));if(k===-1)r.value=[...r.value,m];else{const g=[...r.value];g.splice(k,1),r.value=g}}function p(m){e.multiple==="range"?v(m):e.multiple?h(m):r.value=[m]}return()=>u("div",{class:"v-date-picker-month"},[e.showWeek&&u("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&u("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q(" ")]),s.value.map(m=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[m]))]),u("div",{ref:l,class:"v-date-picker-month__days"},[!e.hideWeekdays&&i.getWeekdays().map(m=>u("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[m])),o.value.map((m,k)=>{const g={props:{onClick:()=>p(m.date)},item:m,i:k};return f.value&&!m.isSelected&&(m.isDisabled=!0),u("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":m.isAdjacent,"v-date-picker-month__day--hide-adjacent":m.isHidden,"v-date-picker-month__day--selected":m.isSelected,"v-date-picker-month__day--week-end":m.isWeekEnd,"v-date-picker-month__day--week-start":m.isWeekStart}],"data-v-date":m.isDisabled?void 0:m.isoDate},[(e.showAdjacentMonths||!m.isAdjacent)&&u(ft,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(m.isSelected||m.isToday)&&!m.isDisabled?e.color:void 0,disabled:m.isDisabled,icon:!0,ripple:!1,text:m.localized,variant:m.isDisabled?m.isToday?"outlined":"text":m.isToday&&!m.isSelected?"outlined":"flat",onClick:()=>p(m.date)}}},{default:()=>[a.day?.(g)??u(Q,g.props,null)]})])})])])}}),Ka=ce({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),ra=fe()({name:"VDatePickerMonths",props:Ka(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),o=me(e,"modelValue"),r=M(()=>{let s=l.startOfYear(l.date());return ka(12).map(i=>{const d=l.format(s,"monthShort");return s=l.getNextMonth(s),{text:d,value:i}})});return Pn(()=>{o.value=o.value??l.getMonth(l.date())}),ye(()=>u("div",{class:"v-date-picker-months",style:{height:En(e.height)}},[u("div",{class:"v-date-picker-months__content"},[r.value.map((s,i)=>{const d={active:o.value===i,color:o.value===i?e.color:void 0,rounded:!0,text:s.text,variant:o.value===s.value?"flat":"text",onClick:()=>c(i)};function c(f){if(o.value===f){t("update:modelValue",o.value);return}o.value=f}return a.month?.({month:s,i,props:d})??u(Q,L({key:"month"},d),null)})])])),{}}}),Qa=ce({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ia=fe()({name:"VDatePickerYears",props:Qa(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),o=me(e,"modelValue"),r=M(()=>{const i=l.getYear(l.date());let d=i-100,c=i+52;e.min&&(d=l.getYear(l.date(e.min))),e.max&&(c=l.getYear(l.date(e.max)));let f=l.startOfYear(l.date());return f=l.setYear(f,d),ka(c-d+1,d).map(v=>{const h=l.format(f,"year");return f=l.setYear(f,l.getYear(f)+1),{text:h,value:v}})});Pn(()=>{o.value=o.value??l.getYear(l.date())});const s=U();return It(async()=>{await Oe(),s.value?.$el.scrollIntoView({block:"center"})}),ye(()=>u("div",{class:"v-date-picker-years",style:{height:En(e.height)}},[u("div",{class:"v-date-picker-years__content"},[r.value.map((i,d)=>{const c={ref:o.value===i.value?s:void 0,active:o.value===i.value,color:o.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:o.value===i.value?"flat":"text",onClick:()=>{if(o.value===i.value){t("update:modelValue",o.value);return}o.value=i.value}};return a.year?.({year:i,i:d,props:c})??u(Q,L({key:"month"},c),null)})])])),{}}}),Br=Tl("v-picker-title"),Za=ce({color:String,...zl(),...ha(),...ql(),...jl(),...Hl(),...Ll(),...$l(),...Ul(),...Yl()},"VSheet"),ua=fe()({name:"VSheet",props:Za(),setup(e,n){let{slots:t}=n;const{themeClasses:a}=Al(e),{backgroundColorClasses:l,backgroundColorStyles:o}=An(wa(e,"color")),{borderClasses:r}=Ml(e),{dimensionStyles:s}=Ol(e),{elevationClasses:i}=Rl(e),{locationStyles:d}=Nl(e),{positionClasses:c}=Fl(e),{roundedClasses:f}=Bl(e);return ye(()=>u(e.tag,{class:["v-sheet",a.value,l.value,r.value,i.value,c.value,f.value,e.class],style:[o.value,s.value,d.value,e.style]},t)),{}}}),el=ce({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Za()},"VPicker"),sa=fe()({name:"VPicker",props:el(),setup(e,n){let{slots:t}=n;const{backgroundColorClasses:a,backgroundColorStyles:l}=An(wa(e,"color"));return ye(()=>{const o=ua.filterProps(e),r=!!(e.title||t.title);return u(ua,L(o,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&u("div",{key:"header",class:[a.value],style:[l.value]},[r&&u(Br,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&u("div",{class:"v-picker__header"},[t.header()])]),u("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&u(ft,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[u("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),Yr=ce({header:{type:String,default:"$vuetify.datePicker.header"},...Ga(),...Ja(),...Qe(Ka(),["modelValue"]),...Qe(Qa(),["modelValue"]),...el({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ur=fe()({name:"VDatePicker",props:Yr(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const l=Tt(),{t:o}=Dn(),r=me(e,"modelValue",void 0,b=>ut(b),b=>e.multiple?b:b[0]),s=me(e,"viewMode"),i=M(()=>{const b=l.date(r.value?.[0]);return b&&l.isValid(b)?b:l.date()}),d=U(Number(e.month??l.getMonth(l.startOfMonth(i.value)))),c=U(Number(e.year??l.getYear(l.startOfYear(l.setMonth(i.value,d.value))))),f=Me(!1),v=M(()=>e.multiple&&r.value.length>1?o("$vuetify.datePicker.itemsSelected",r.value.length):r.value[0]&&l.isValid(r.value[0])?l.format(r.value[0],"normalDateWithWeekday"):o(e.header)),h=M(()=>l.format(l.date(new Date(c.value,d.value,1)),"monthAndYear")),p=M(()=>`date-picker-header${f.value?"-reverse":""}-transition`),m=M(()=>{const b=l.date(e.min);return e.min&&l.isValid(b)?b:null}),k=M(()=>{const b=l.date(e.max);return e.max&&l.isValid(b)?b:null}),g=M(()=>{if(e.disabled)return!0;const b=[];if(s.value!=="month")b.push("prev","next");else{let I=l.date();if(I=l.setYear(I,c.value),I=l.setMonth(I,d.value),m.value){const A=l.addDays(l.startOfMonth(I),-1);l.isAfter(m.value,A)&&b.push("prev")}if(k.value){const A=l.addDays(l.endOfMonth(I),1);l.isAfter(A,k.value)&&b.push("next")}}return b});function B(){d.value<11?d.value++:(c.value++,d.value=0,G(c.value)),O(d.value)}function V(){d.value>0?d.value--:(c.value--,d.value=11,G(c.value)),O(d.value)}function D(){s.value="month"}function _(){s.value=s.value==="months"?"month":"months"}function x(){s.value=s.value==="year"?"month":"year"}function O(b){s.value==="months"&&_(),t("update:month",b)}function G(b){s.value==="year"&&x(),t("update:year",b)}return ue(r,(b,I)=>{const A=l.date(ut(b)[0]),H=l.date(ut(I)[0]);f.value=l.isBefore(A,H)}),ye(()=>{const b=sa.filterProps(e),I=aa.filterProps(e),A=la.filterProps(e),H=oa.filterProps(e),T=Qe(ra.filterProps(e),["modelValue"]),C=Qe(ia.filterProps(e),["modelValue"]),S={header:v.value,transition:p.value};return u(sa,L(b,{class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>a.title?.()??u("div",{class:"v-date-picker__title"},[o(e.title)]),header:()=>a.header?u(ft,{defaults:{VDatePickerHeader:{...S}}},{default:()=>[a.header?.(S)]}):u(la,L({key:"header"},A,S,{onClick:s.value!=="month"?D:void 0}),{...a,default:void 0}),default:()=>u(se,null,[u(aa,L(I,{disabled:g.value,text:h.value,"onClick:next":B,"onClick:prev":V,"onClick:month":_,"onClick:year":x}),null),u(Sa,{hideOnLeave:!0},{default:()=>[s.value==="months"?u(ra,L({key:"date-picker-months"},T,{modelValue:d.value,"onUpdate:modelValue":[N=>d.value=N,O],min:m.value,max:k.value}),null):s.value==="year"?u(ia,L({key:"date-picker-years"},C,{modelValue:c.value,"onUpdate:modelValue":[N=>c.value=N,G],min:m.value,max:k.value}),null):u(oa,L({key:"date-picker-month"},H,{modelValue:r.value,"onUpdate:modelValue":N=>r.value=N,month:d.value,"onUpdate:month":[N=>d.value=N,O],year:c.value,"onUpdate:year":[N=>c.value=N,G],min:m.value,max:k.value}),null)]})]),actions:a.actions})}),{}}}),$r=ce({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...Xl()},"VHover"),Yt=fe()({name:"VHover",props:$r(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=me(e,"modelValue"),{runOpenDelay:l,runCloseDelay:o}=Wl(e,r=>!e.disabled&&(a.value=r));return()=>t.default?.({isHovering:a.value,props:{onMouseenter:l,onMouseleave:o}})}}),Lr=ce({...so({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ca=fe()({name:"VRadio",props:Lr(),setup(e,n){let{slots:t}=n;return ye(()=>u(Da,L(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),Hr=ce({height:{type:[Number,String],default:"auto"},...nn(),...Qe(co(),["multiple"]),trueIcon:{type:Ln,default:"$radioOn"},falseIcon:{type:Ln,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),da=fe()({name:"VRadioGroup",inheritAttrs:!1,props:Hr(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const l=fa(),o=M(()=>e.id||`radio-group-${l}`),r=me(e,"modelValue");return ye(()=>{const[s,i]=en(t),d=je.filterProps(e),c=Da.filterProps(e),f=a.label?a.label({label:e.label,props:{for:o.value}}):e.label;return u(je,L({class:["v-radio-group",e.class],style:e.style},s,d,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,id:o.value}),{...a,default:v=>{let{id:h,messagesId:p,isDisabled:m,isReadonly:k}=v;return u(se,null,[f&&u(fo,{id:h.value},{default:()=>[f]}),u(vo,L(c,{id:h.value,"aria-describedby":p.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:m.value,readonly:k.value,"aria-labelledby":f?h.value:void 0,multiple:!1},i,{modelValue:r.value,"onUpdate:modelValue":g=>r.value=g}),a)])}})}),{}}}),jr=z("p",{class:"text-h6 mb-0 mt-6"},"Details",-1),qr=z("p",{class:"text-body-2 text-grey"},"All fields are required.",-1),zr={key:0},Wr={class:"d-flex"},Xr={key:0,class:"ml-6 text-caption pt-1"},Gr={key:3},Jr={class:"d-flex"},Kr={key:0,class:"ml-6 text-caption pt-1"},Qr=z("p",{class:"text-h6 mb-0 mt-6"},"Procedure",-1),Zr={class:"text-body-2 text-grey"},ei=z("p",{class:"text-h6 mb-0 mt-12"},"References",-1),ti=z("p",{class:"text-body-2 text-grey mb-0"},"Optionally list sources for this case study.",-1),ni=z("p",{class:"text-h6 mb-0 mt-12"},"Download",-1),ai=z("p",{class:"text-body-2 text-grey"},[q(" Download the case study data file, specifying the filename here. Once downloaded, email the file to "),z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org"),q(". ")],-1),li=z("a",{href:"mailto:atlas@mitre.org"},"atlas@mitre.org",-1),oi="Create a Case Study",vi={__name:"BuildCaseStudyView",setup(e){const n=In(),t=U([]);a();async function a(){try{const C=await(await fetch(Gl("/content/case-study-legend.yaml"))).text(),S=Jl.load(C).legend;["case_study_type","name","target","actor","reporter","incident_date_granularity","incident_date","summary"].forEach(ae=>{t.value.push(S[ae])})}catch(T){console.error("Error fetching YAML file:",T)}}const l=U();let o=Ze({procedure:[],references:[],"incident-date-granularity":"DATE"});const r=["name","target","actor","reporter","incident_date"],s=U(""),i=M(()=>!!(o["case-study-type"]||o["case-study-type"]===void 0&&!v.value)),d=U(),c=U(!1),f=M(()=>{if(d.value){const T={year:"numeric"};return o["incident-date-granularity"]==="MONTH"?(T.month="long",d.value.toLocaleDateString("en-US",T)):o["incident-date-granularity"]==="YEAR"?d.value.getFullYear().toString():d.value.toISOString().split("T")[0]}return""});ue(f,()=>{o["incident-date"]=new Date(d.value)}),ue(()=>o["case-study-type"],()=>{v.value&&x.value.validate()});const v=U(!1);function h(T){return typeof T=="string"&&T.trim()?!0:"Required"}function p(T){o.procedure.push(T),m.value=!0}const m=U(!1),k=U(null),g=U(!1);function B(T){o.references.push(T),g.value=!1}function V(T){o.references.splice(T,1)}function D(T,C){o.references[C]=T}const _=U(!1),x=U(null),O=U(!1);let G,b=Ze({});function I(){if(v.value=!0,o.procedure.length===0&&k.value.addProcedureStep(),l.value&&o.procedure.length>0){let T={study:o,meta:b};o["case-study-type"]==="exercise"&&o.reporter!==void 0&&delete T.study.reporter,T.meta=Kl(T,bn.$version),Ql(T,s.value),_.value&&A(o),O.value=!0,clearTimeout(G),G=setTimeout(()=>{O.value=!1},"3000")}}async function A(T){for(const C of T.procedure){let S=await n.getDataObjectById(C.technique);S===void 0&&(S={label:`Technique not found (${C.technique})`}),C.techniqueObject=S}mo(T),T.procedure.forEach(C=>{delete C.techniqueObject})}function H(T,C){m.value=!0,s.value=C,Object.keys(T.study).forEach(S=>{S==="incident-date"?d.value=new Date(T.study["incident-date"]):o[S]=T.study[S]}),b=T.meta}return(T,C)=>($(),ge(se,null,[u(Ge,{class:"align-start"},{default:w(()=>[u(ho,{pageTitle:oi}),u(On,{class:"ml-2 mt-3"},{default:w(()=>[q(Ie(`v${F(bn).$version}`),1)]),_:1})]),_:1}),u(Ge,null,{default:w(()=>[u(_o,{onSubmit:H}),u(Ne),u(Ao)]),_:1}),jr,qr,u(ln,{onSubmit:C[13]||(C[13]=tn(()=>{},["prevent"])),modelValue:l.value,"onUpdate:modelValue":C[14]||(C[14]=S=>l.value=S),ref_key:"mainForm",ref:x},{default:w(()=>[($(!0),ge(se,null,St(t.value,S=>($(),ge("div",{key:S.name},[S.name==="Case Study Type"?($(),ge("div",zr,[u(Yt,null,{default:w(({isHovering:N,props:ae})=>[u(Fe,L(ae,{variant:"outlined",class:"mb-0",subtitle:"Select case study type",height:"120",style:[N&&i.value?{"border-color":"#424242"}:{"border-color":"#9E9E9E"},i.value?{}:{"border-color":"#b00020"}]}),{default:w(()=>[u(da,{modelValue:F(o)["case-study-type"],"onUpdate:modelValue":C[0]||(C[0]=J=>F(o)["case-study-type"]=J),"prepend-icon":S.icon,density:"compact",class:"pl-4 pt-3","hide-details":!0},{default:w(()=>[($(!0),ge(se,null,St(S.options,J=>($(),Z(Ge,{key:J.name},{default:w(()=>[u(Yt,null,{default:w(({isHovering:ke,props:we})=>[z("div",Wr,[u(ca,L(we,{label:J.name,value:J.name.toLowerCase()}),null,16,["label","value"]),ke?($(),ge("div",Xr,[u(He,null,{default:w(()=>[q("mdi-menu-right")]),_:1}),q(" "+Ie(J.description),1)])):pe("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon"])]),_:2},1040,["style"])]),_:2},1024),z("div",{style:st({visibility:i.value?"hidden":"visible",color:"#c13951"}),class:"ml-4 mt-1 mb-3 text-caption font-weight-medium"}," Required ",4)])):pe("",!0),r.includes(S.name.toLowerCase())?($(),Z(Ke,{key:1,modelValue:F(o)[S.name.toLowerCase()],"onUpdate:modelValue":N=>F(o)[S.name.toLowerCase()]=N,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:S.name==="Reporter"&&F(o)["case-study-type"]!=="incident"?[]:[h],disabled:S.name==="Reporter"&&F(o)["case-study-type"]!=="incident",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules","disabled"])):pe("",!0),S.name==="Summary"?($(),Z(Pa,{key:2,modelValue:F(o)[S.name.toLowerCase()],"onUpdate:modelValue":N=>F(o)[S.name.toLowerCase()]=N,variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,rules:[h]},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon","hint","rules"])):pe("",!0),S.name==="Incident Date Granularity"?($(),ge("div",Gr,[u(Yt,null,{default:w(({isHovering:N,props:ae})=>[u(Fe,L(ae,{variant:"outlined",class:"mb-7",subtitle:"Select granularity for the incident date",height:"150",style:[N?{"border-color":"#424242"}:{"border-color":"#9E9E9E"}]}),{default:w(()=>[u(da,{modelValue:F(o)["incident-date-granularity"],"onUpdate:modelValue":C[1]||(C[1]=J=>F(o)["incident-date-granularity"]=J),"prepend-icon":S.icon,density:"compact",class:"pl-4 pt-3","hide-details":!0},{default:w(()=>[($(!0),ge(se,null,St(S.options,J=>($(),Z(Ge,{key:J.name},{default:w(()=>[u(Yt,null,{default:w(({isHovering:ke,props:we})=>[z("div",Jr,[u(ca,L(we,{label:J.name,value:J.name.toUpperCase()}),null,16,["label","value"]),ke?($(),ge("div",Kr,[u(He,null,{default:w(()=>[q("mdi-menu-right")]),_:1}),q(" "+Ie(J.description),1)])):pe("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","prepend-icon"])]),_:2},1040,["style"])]),_:2},1024)])):pe("",!0),S.name==="Incident Date"?($(),Z(ya,{key:4,"close-on-content-click":!1,modelValue:c.value,"onUpdate:modelValue":C[5]||(C[5]=N=>c.value=N)},{activator:w(({props:N})=>[u(Ke,L(N,{modelValue:f.value,"onUpdate:modelValue":C[2]||(C[2]=ae=>f.value=ae),variant:"outlined",label:S.name,"prepend-inner-icon":S.icon,hint:S.description,class:"mb-3",readonly:"",rules:[h]}),null,16,["modelValue","label","prepend-inner-icon","hint","rules"])]),default:w(()=>[u(Ur,{modelValue:d.value,"onUpdate:modelValue":[C[3]||(C[3]=N=>d.value=N),C[4]||(C[4]=N=>c.value=!1)],max:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10)},null,8,["modelValue","max"])]),_:2},1032,["modelValue"])):pe("",!0)]))),128)),Qr,z("p",Zr,[q(" Construct a timeline of the incident, mapped to MITRE ATLAS™ techniques. "),z("span",{style:st(F(o).procedure.length===0&&v.value?"color: #FF5252":"")},"Add at least one step. ",4)]),F(o).procedure.length>0?($(),Z(Ir,{key:0,modelValue:F(o).procedure,"onUpdate:modelValue":C[6]||(C[6]=S=>F(o).procedure=S)},null,8,["modelValue"])):pe("",!0),m.value?pe("",!0):($(),Z(Ea,{key:1,ref_key:"procedureForm",ref:k,onSubmitProcedureStep:p,onUpdateShowAddNewStep:C[7]||(C[7]=S=>m.value=!0),existingProcedures:F(o).procedure},null,8,["existingProcedures"])),z("div",{style:st({visibility:F(o).procedure.length===0&&v.value&&!m.value?"visible":"hidden",color:"#c13951"}),class:"ml-4 mb-3 text-caption font-weight-medium"}," At least one procedure step is required. ",4),m.value?($(),Z(Q,{key:2,"prepend-icon":"mdi-plus",onClick:C[8]||(C[8]=S=>m.value=!1)},{default:w(()=>[q(" Add New Step ")]),_:1})):pe("",!0),ei,ti,u(Or,{sources:F(o).references,onDelete:V,onUpdateSource:D},null,8,["sources"]),g.value?($(),Z(Xa,{key:3,sources:F(o).references,onCancel:C[9]||(C[9]=S=>g.value=!1),onSubmit:B},null,8,["sources"])):($(),Z(Q,{key:4,"prepend-icon":"mdi-plus",onClick:C[10]||(C[10]=S=>g.value=!0)},{default:w(()=>[q(" Add New Source ")]),_:1})),ni,ai,u(Ge,null,{default:w(()=>[u(kn,null,{default:w(()=>[u(Ke,{modelValue:s.value,"onUpdate:modelValue":C[11]||(C[11]=S=>s.value=S),variant:"outlined",label:"Case Study Filename","prepend-inner-icon":"mdi-file-download",hint:"Filename of the case study. The .yaml extension will be auto-applied.",rules:[h],class:"mb-3",clearable:""},null,8,["modelValue","rules"])]),_:1}),u(go,{label:"Also download as PowerPoint",modelValue:_.value,"onUpdate:modelValue":C[12]||(C[12]=S=>_.value=S),class:"ml-6"},null,8,["modelValue"])]),_:1}),u(Ge,{class:"align-center"},{default:w(()=>[u(Q,{type:"submit",color:"blue","prepend-icon":"mdi-download",onClick:I},{default:w(()=>[q(" Download Case Study ")]),_:1}),v.value&&(l.value===!1||F(o).procedure.length===0)?($(),Z(Wt,{key:0,icon:"mdi-alert",color:"red-lighten-4",density:"compact",class:"ml-6"},{default:w(()=>[q(" Please address any errors above. ")]),_:1})):pe("",!0),u(Sa,{class:"pb-0"},{default:w(()=>[O.value?($(),Z(Wt,{key:0,icon:"mdi-check-circle-outline",color:"green-lighten-5",density:"compact",class:"ml-6 text-green"},{default:w(()=>[q(" Your case study has been downloaded! Email your yaml file to "),li]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{vi as default};
